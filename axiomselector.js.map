{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/axiomapi/AxiomApiHelper.js","webpack:///./node_modules/process/browser.js","webpack:///./src/classes/models/RunningData.ts","webpack:///./src/axiombuilder/models/WidgetsNestable.ts","webpack:///./src/recorder/Selectors/AttributeSelector.ts","webpack:///./src/recorder/tool/ScrapeHelper.ts","webpack:///(webpack)/buildin/global.js","webpack:///./src/recorder/tool/InjectedSelectorTool.ts","webpack:///./src/recorder/Selectors/HierachyActions.ts","webpack:///./src/recorder/Selectors/SelectorFacade.ts","webpack:///./src/recorder/Selectors/ClassSelector.ts","webpack:///./src/recorder/Selectors/ElementSelector.ts","webpack:///./src/recorder/Selectors/HierarchySelector.ts","webpack:///./node_modules/css.escape/css.escape.js","webpack:///./src/recorder/Selectors/IdSelector.ts","webpack:///./src/recorder/Selectors/InnerTextSelector.ts","webpack:///./src/recorder/Selectors/ParentElementSelector.ts","webpack:///./src/recorder/tool/BorderHighlight.ts","webpack:///./node_modules/diff-match-patch-typescript/dist/es/constants/index.js","webpack:///./node_modules/diff-match-patch-typescript/dist/es/types/DiffOperation.js","webpack:///./node_modules/diff-match-patch-typescript/dist/es/utils/math.js","webpack:///./node_modules/diff-match-patch-typescript/dist/es/utils/index.js","webpack:///./node_modules/diff-match-patch-typescript/dist/es/core/PatchObject.js","webpack:///./node_modules/diff-match-patch-typescript/dist/es/core/DiffMatchPatch.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","AxiomApiHelper","array","subArrayLength","newArray","length","push","j","jn","parseInt","time","v","Promise","resolve","setTimeout","index","ALPHA","base","done","res","colLetters","a","remainder","Math","round","trim","s_numbers","pow","charCodeAt","reduce","accumulator","array1","array2","columns","found","this","matchingArrays","cols","indeces","col","split","Number","isInteger","test","toUpperCase","getColIndex","singleDimension","Array","isArray","matching","tableWidth","getColLetter","cloned","item","indexOf","clone","keys","valueOf","url","domain","domainSegs","shift","route","pop","join","action","params","reject","rd","load","then","async","tab_id","states","e","resolve2","chrome","tabs","query","tab","sendMessage","id","response","runtime","error","message","lastError","str","obj","JSON","parse","selector","resultType","selectors","resultTypes","undefined","map","trimmed","callback","jQuery","each","el","content","contents","task","keepDisabled","formData","data","wid","form","is_disable","cookies","getAll","desiredCookie","filter","path","widgets","nestingData","buildNestingData","parts","windex","endingBlock","indent","stepNumber","slice","toLowerCase","urlObject","URL","hash","search","pathname","toString","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","noop","nextTick","args","arguments","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","op","TypeError","RunningData","store","skipEvent","_a","greeting","fireEventTrigger","_this","countStates","loadState","state","addState","cloud","clearState","clearAllStates","cloudStateCount","csc","desktopStateCount","dsc","_i","default","WidgetsNestable","NestingData","WidgetNestable","outdent","middent","widgetShow","startingBlock","midBlock","outputShow","list","getWidgetList","wn","machine_name","getIndentWindex","isNestable","widget","indents","nullNestingData","AttributeSelector","diff_match_patch_typescript_1","getSelector","hierarchy","parentEl","tagName","attr","map_1","attributes","mp","classes_1","sClass","replace","unshift","parentElement","groupAttributeSelectors","commonAncestor","dmp","DiffMatchPatch","tempDiff","diff_main","tempDiff_1","diff","cleanedGroup","cleanupGroupingSelector","groupSelectorValidator","groupSelector","elementSelectors","groupEl","document","querySelectorAll","elementCount","elementSelectorsString","elementsWithinGroup","forEach","items","cleanedSelector","lastCleanedCss","ScrapeHelper","getPreview","doc","stringify","traces","mapTraces","getDataV0210","outerHTML","innerHTML","text","String","linkEl","hasAttribute","children","href","imgEl","from","src","getData","scrapeLink","link","match","resultMatched","substring","linkMatched","window","location","parent","countSiblingsLeft","siblings","sibling","previousElementSibling","getRootTree","rootTree","node","nthCount","tracesEqual","b","depth","attemptGroups","all_res","gDepth","groups","grouped","lastRow","rowToAddTo","all_res_1","res_1","colsProcessed","traceMatchFound","colProcessed","trace","sg","it","0","gDepthMod","tides","selectors_1","els","results","els_1","tag","className","minTide","maxTide","prev","tide","sort","generateGroupSelector","Function","InjectedSelectorTool","AttributeSelector_1","HierachyActions_1","SelectorFacade_1","BorderHighlight_1","ScrapeHelper_1","AxiomApiHelper_1","SelectionActions","context","selectorData","add_column","request","addSelector","editSelector","remove_column","removeSelector","select_column","set_result_type","setResultType","sel_index","reset_column","resetSelector","addElementToSelection","removeElementFromSelection","edit_selector","updateSelector","target","SelectorData","refreshRequired","activeSelectorIndex","actions","actionRequest","selectedElements","rejectedElements","defaultResultType","splice","removedLastColumn","removedWhileSelected","selectedColumnShiftedLeft","singleSelector","SelectorFacade","querySelector","innerText","targetElement","newSelectors","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","selections","iframeHighlightBorders","lastSelectorId","activeSelector","selectingClass","suggestingClass","rejectingClass","iframeSupportEnabled","SelectorAlgorithm","hierarchyActions","HierarchyActions","matchingData","highlightBorder","BorderHighlight","scrapeHelper","onMessage","sender","sendResponse","suggestions","_b","selectionMode","selectionType","updateResultType","updateWindex","injectV0200","updateSelections","applyToIframes","sendStateUpdate","resetHighlights","template_mode","closingAction","widget_type","ejectV0200","removeAllHighlights","generateSuggestions","setIframeSupportEnabled","sharedAttributes","combinedSelector","getCombined","as","createAttributeSelector","testGeneratedSelector","classList","_c","_d","_e","sai","_f","_g","_h","sharedAttributes_1","targetLength","inuse","updateactiveSelectorIndex","inject","singleElementClickHandler","elementClickHandler","addClass","find","stylesheet","getURL","append","injectIntoSpecificClasses","algos","ejectFromSpecificClasses","activeResultType","updateActiveResultType","findMatchesV0190","setHighlights","removeClass","setFocus","msg","preview_data","focus","groupStyle","getElementById","head","removeChild","eject","groupStyle_1","ejectV0190","resume","setupBorder","selectorObj","isToken","matches","_loop_1","this_1","add","matches_1","removeSelectedChildren","sel","xpath","createElement","appendChild","otherSelectors","element","setClassForSelected","removeClassForSelected","remove","removeClassForRejected","setClassForSuggested","cls","highlightSelection","sug","reg","newData","transpose","skip","maxCols","thisLen","blockClicksOn","block_1","css","widgetType","elem_1","regex","buttonLabel","RegExp","val","$","confirm","boxWidth","useBootstrap","buttons","click","cancel","x","singleSelection","contains","console","warn","child","suggestedElements","combinedSelector_1","includes","attributeSelector","includeElements","excludeElements","type","includeSelectors","getAsAttributeSelectors","excludeSelectors","inSections","exSections","includeSelectors_1","splitHierarchyString","excludeSelectors_1","allSections","levels","allSections_1","tagsReversed","tags","reverse","inSections_1","is","largestTagIndex","allSections_2","section","inSections_2","reducedTags","tags_1","selectorWithNthSpecifiers","applyNthSpecifiers","matchedElements","trimAttributes","trimHierarchy","excludedMatches","excludedElements","misMatches","overSelected","elementsToMatch","missingElements","selectorLevels","trimmedLength","trimmedSelector","trimSelector","allAttributes","allAttributes_1","attribute","testSelector","nthMods","inc_levels","includeElements_1","counts","treeCount","level","exc_levels","excludeElements_1","inc_nth","nthMod","getNthMods","include","exclude","getUnique","check","count","countSiblings","siblingCount","ofTypeCount","uniqueInclude","uniqueExclude","sample","series","diffs","expandedSeries","genDiffs","includePattern","pattern","setObject","nthDescriptor","getSeriesFormula","findSeries","excludePatterns","commonItem","a_1","hasCommonItem","exc_pattern","set","newDiff","sortedDiffs","allFoundIn","a_2","getExpandedSeries","stepValue","sortedSeries","seriesLimit","seriesStart","testSeries","elements","attributeSelectors","elements_1","constructor","hierarchyString","seperators","sections","mods","substr","getCommonItems","arrays","commonItems","arrays_1","values","getDiff","singleArray","missing","unique","singleArray_1","exclusive","arrays_2","selectorAtLevel","testSelectorAtLevelSelectors","allSelectors","testGroup","testSelectorAtLevelGrouping","findGroupSelectors","groupSelectors","testA","testB","__importDefault","mod","ClassSelector_1","ElementSelector_1","HierarchySelector_1","IdSelector_1","InnerTextSelector_1","ParentElementSelector_1","multiple","classSelector","hierarchySelector","elementSelector","innerTextSelector","parentElementSelector","idSelector","generateAxiomSelector","targetParent","classSel","idSel","class","ClassSelector","classes","getAttribute","ElementSelector","HierarchySelector","stack","parentNode","sibCount","sibIndex","childNodes","sib","nodeType","Node","ELEMENT_NODE","nodeName","firstEl","getSelectorForSizzle","refs","cssName","escaped","escapeCssNames","CSS","escape","log","root","global","cssEscape","codeUnit","string","firstCodeUnit","charAt","factory","IdSelector","InnerTextSelector","textContent","ParentElementSelector","iframeElement","borderWidth","borderPadding","onscroll","borderElement","hide","mouseoverHandler","mouseLeaveHandler","removeBorderFromDom","width_1","shieldOverlay","bTop","bLeft","bBottom","style","setProperty","preview","bRight","addBorderToDom","showBorder","show","removeBorder","makeBorders","targetElem","position","offset","top","scrollY","left","width","outerWidth","height","outerHeight","currentURL","frameSrc","origin","alert","selectable","hasClass","relatedTarget","DiffOperation","NON_ALPHA_NUMERIC_REGEX","WHITESPACE_REGEX","LINEBREAK_REGEX","BLANKLINE_END_REGEX","BLANKLINE_START_REGEX","min","max","math","PatchObject","start1","start2","length1","length2","DIFF_INSERT","DIFF_DELETE","DIFF_EQUAL","encodeURI","diffTimeout","diffEditCost","matchThreshold","matchDistance","patchDeleteThreshold","patchMargin","matchMaxBits","text1","text2","optChecklines","optDeadline","MAX_VALUE","Date","now","deadline","checklines","commonlength","diff_commonPrefix","commonprefix","diff_commonSuffix","commonsuffix","diff_compute_","diff_cleanupMerge","pointermin","pointermax","pointermid","pointerstart","floor","pointerend","diff_cleanupSemantic","changes","equalities","equalitiesLength","lastEquality","pointer","lengthInsertions1","lengthDeletions1","lengthInsertions2","lengthDeletions2","diff_cleanupSemanticLossless","deletion","insertion","overlapLength1","diff_commonOverlap_","overlapLength2","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","diff_cleanupSemanticScore_","score","diff_cleanupEfficiency","preIns","preDel","postIns","postDel","countDelete","countInsert","textDelete","textInsert","diff_xIndex","loc","chars1","chars2","lastChars1","lastChars2","diff_prettyHtml","html","patternAMP","patternLT","patternGT","patternPARA","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","diff_fromDelta","delta","diffsLength","tokens","param","decodeURI","ex","isNaN","match_main","match_bitap_","patch_make","optB","optC","patches","patch","patchDiffLength","charCount1","charCount2","prepatchText","postpatchText","diffType","diffText","patch_addContext_","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","expectedLoc","startLoc","endLoc","index1","index2","paddingLength","fromCharCode","extraLength","patchSize","bigpatch","precontext","empty","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","sign","line","rawLine","longtext","shorttext","hm","diff_halfMatch_","text1A","text1B","text2A","text2B","midCommon","diffsA","diffsB","diff_lineMode_","diff_bisect_","diff_linesToChars_","linearray","lineArray","diff_charsToLines_","subDiff","text1Length","text2Length","maxD","ceil","vOffset","vLength","v1","v2","front","k1Start","k1End","k2Start","k2End","k1","k1Offset","x1","y1","k2Offset","x2","diff_bisectSplit_","k2","y2","lineHash","diff_linesToCharsMunge_","maxLines","chars","lineStart","lineEnd","lineArrayLength","textLength","best","hm1","diff_halfMatchI_","hm2","bestLongtextA","bestLongtextB","bestShorttextA","bestShorttextB","seed","bestCommon","prefixLength","suffixLength","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumeric2","whitespace1","whitespace2","lineBreak1","lineBreak2","blankLine1","blankLine2","match_alphabet_","scoreThreshold","bestLoc","match_bitapScore_","lastIndexOf","binMin","binMid","matchmask","lastRD","binMax","start","finish","charMatch","accuracy","proximity","abs","padding","prefix","suffix"],"mappings":"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","file":"axiomselector.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 916);\n","import RunningData from \"../../classes/models/RunningData\"\nimport {WidgetsNestable} from \"../../axiombuilder/models/WidgetsNestable\"\n\n/**\n * Helper functions for running axioms\n *\n */\nexport class AxiomApiHelper {\n\n    /**\n     * Transpose table data - swapping rows and columns\n     * @param {*} array a 2D array e.g. [[item1a, item1b], [item2a, item2b]]\n     * @example AxiomApiHelper.transpose([[item1a, item1b], [item2a, item2b]])\n     * @returns a 2D array e.g. [[item1a, item2a], [item1b, item2b]]\n     */\n    static transpose(array) {\n        let subArrayLength = 0\n        let newArray = []\n        for (let i = 0; i < array.length; i++) {\n            if (array[i].length > subArrayLength) {\n                subArrayLength = array[i].length\n            }\n        }\n        for (let i = 0; i < subArrayLength; i++) {\n            newArray.push([]);\n        }\n        for (let i = 0; i < array.length; i++) {\n            for(let j = 0; j < subArrayLength; j++) {\n                let jn = parseInt(j)\n                newArray[jn].push(array[i][jn])\n            }\n        }\n\n        return newArray;\n    }\n\n    /** \n    *\n    * Introduce a delay with a promise\n    * @param time - The time in milliseconds to delay\n    *\n    */\n\n    static delay(time, v) {\n        return new Promise(function(resolve) { \n            setTimeout(resolve.bind(null, v), time)\n        });\n     }\n\n    /**\n     * Convert a numerical index value into the column letter format\n     * used by spreadsheet applications i.e. 0 => 'A', 26 => 'AA', 30 => 'AE'\n     * @param {*} index the index of the column you want the corresponding column letter for e.g. 0\n     * @example AxiomApiHelper.getColLetter(30)\n     * @result a string representing the column in a spreadsheet that corresponds to the numerical index given e.g. 'AE'\n     */\n    static getColLetter(index) {\n        let ALPHA = ['!', 'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];\n\n        let base = ALPHA.length-1\n        let n = index\n\n        let done = false\n        let res = []\n        let colLetters = ''\n\n        while (!done) {\n            let a = (n / base)\n            let remainder = (n % base)\n            if (res.length == 0) {\n                remainder += 1\n            }\n            res.push(remainder)\n            colLetters = ALPHA[remainder] + colLetters\n            n = Math.round(a - (remainder / base))\n            done = (n == 0)\n        }\n\n        return colLetters\n    }\n\n    /**\n     * Convert the column letter format value into a numerical index\n     * used by spreadsheet applications i.e. 'A' => 0, 'AA' => 26, 'AE' => 30\n     * @param {*} colLetters\n     * @example AxiomApiHelper.getColIndex('AE')\n     * @returns a numerical index e.g. 30\n     */\n    static getColIndex(colLetters) {\n        if (!colLetters) {\n            return -1\n        }\n        colLetters = colLetters.trim()\n        if (parseInt(colLetters, 10) >= 0) {\n            return colLetters\n        }\n        let s_numbers = [0];\n        for (let i = 0; i < colLetters.length; i++) {\n            let pow = Math.pow(26, colLetters.length - i - 1)\n            s_numbers[i] = (colLetters[i].charCodeAt(0) - 64) * pow\n        }\n        return s_numbers.reduce((accumulator, a) => {return accumulator + a}) - 1\n    }\n\n    /**\n     * Check whether a 2D array contains a 1D array\n     *\n     * usefull for checking whether row data exists in table data\n     *\n     * If columns are provided as a param then\n     * the arrays will only be compared by the contents of those columns\n     * and not the entire contents of each array\n     * @param {*} array1 a single dimensional array e.g. [\"A\", \"Example A\"]\n     * @param {*} array2 a two dimensional array e.g. [[\"A\", \"Example A\"], [\"B\", \"Example B\"]]\n     * @param {*} columns an array of column letters to compare by\n     * @example AxiomApiHelper.inArray([\"A\", \"Example A\"], [[\"A\", \"Example A\"], [\"B\", \"Example B\"]])\n     * @returns a boolean value e.g. true\n     */\n    static inArray(array1, array2, columns = null) {\n        let found = false\n\n        for (let array of array2) {\n            if (this.matchingArrays(array, array1, columns)) {\n                found = true\n            }\n        }\n        return found\n    }\n\n    static colString2indexArray(cols) {\n        let indeces = []\n        for (let col of cols.split(',')) {\n            col = col.trim()\n            if (Number.isInteger(col)) {\n                col = col -1\n            } else {\n                if (/[A-Za-z]/.test(col)) {\n                    if (/[a-z]/.test(col)) {\n                        col = col.toUpperCase()\n                    }\n                    col = this.getColIndex(col)\n                } else {\n                    col = Number(col) - 1\n                }\n            }\n            if (col > -1){\n                indeces.push(col)\n            }\n        }\n\n        return indeces\n    }\n\n    /**\n     * Checks whether two single dimensional arrays match - for comparing whether two rows of data match\n     *\n     * If columns are provided as a param then\n     * the arrays will only be compared by the contents of those columns\n     * and not the entire contents of each array\n     * @param {*} array1 the first array to compare\n     * @param {*} array2 the second array to compare against\n     * @param {*} columns an array of columns letters to compare within each array e.g. ['A','D']\n     * @example AxiomApiHelper.matchingArrays([0,0,0,0], [0,2,1,0], ['A','D'])\n     * @return a boolean value e.g. true\n     */\n    static matchingArrays(array1, array2, columns = null) {\n        let singleDimension = true\n        if (array1.length != array2.length) {\n            return false\n        }\n        if (Array.isArray(array1) != Array.isArray(array2)) {\n            return false\n        } else {\n            if (Array.isArray(array1)) {\n                singleDimension = false\n            }\n        }\n        let matching = true\n\n        if (Array.isArray(columns) && columns.length > 0) {\n        } else {\n            columns = []\n            let tableWidth = (array1.length > array2.length) ? array1.length : array2.length\n            for (let i = 0; i < tableWidth; i ++) {\n                columns.push(this.getColLetter(i+1))\n            }\n        }\n\n        for (let colLetters of columns) {\n            let i = this.getColIndex(colLetters)\n\n            if (array1[i] != array2[i]) {\n                matching = false\n            }\n        }\n\n        return matching\n    }\n\n    static clone(array) {\n        if (!array) {\n            return [[\"\"]]\n        }\n        let cloned = []\n        if (Array.isArray(array[0])) {\n            for (let item of array) {\n                cloned[array.indexOf(item)] = this.clone(item)\n            }\n        } else {\n            for (let key of Object.keys(array)) {\n                cloned[key] = array[key].valueOf()\n            }\n        }\n        return cloned\n    }\n\n    static getRoute(url) {\n        let domain = url\n        if (/\\/\\//.test(url)) {\n            var split = url.split('//')\n            var protocol = split[0]\n            domain = split[split.length -1]\n            var domainSegs = domain.split('.')\n            if (domainSegs.length > 2) {\n                var net = domainSegs.shift()\n            }\n            let route = domainSegs.pop()\n            route = route.split('/')\n            route.pop()\n            domain = domainSegs.join('.') + '.' + route.join('/')\n        }\n        return domain\n    }\n\n    /**\n     * Send a message to the tab window.\n     */\n    static sendTabMessage(action, params) {\n        return new Promise((resolve, reject) => {\n            let rd = new RunningData()\n            rd.load().then(async () => {\n                let tab_id\n                try { \n                    tab_id = rd.states[0].tab_id\n                } catch (e) {\n                    // To stop javascript doing its normal idiot thing\n                }\n                if (!tab_id) {\n                    // If we have no tab id, try and find one in which axiom is loaded\n                    tab_id = await new Promise(resolve2 => {\n                        chrome.tabs.query({}, (tabs) => {\n                            for (let tab of tabs) {\n                                chrome.tabs.sendMessage(tab.id, {action: 'is_loaded'}, response => {\n                                    if (response) {\n                                        resolve2(tab.id)\n                                    }\n                                })\n                            }\n                        })\n                        setTimeout(() => {\n                            resolve2(null)\n                        }, 2000)\n                    })\n                }\n                params.action = action\n                chrome.tabs.sendMessage(tab_id, params, response => {\n                    if (chrome.runtime.hasOwnProperty(\"lastError\")) {\n                        switch (action) {\n                            case \"display_message\":\n                                resolve('')\n                                break\n                            default:\n                                resolve({error: {message: chrome.runtime.lastError.message}})\n                                break\n                        }\n                    } else {\n                        resolve(response)\n                    }\n                })\n            })\n        })\n    }\n\n    static isValidJson(str) {\n        try {\n            const obj = JSON.parse(str)\n\n            if (obj && typeof obj === 'object') {\n                return true\n            }\n        } catch (e) {\n        }\n\n        return false\n    }\n\n    static buildSelectorArray(selector, resultType) {\n        let selectors = []\n        let resultTypes = []\n        if (!Array.isArray(selector)) {\n            if (typeof selector === 'string') {\n                selectors = selector.split(',')// TODO - replace with split\n                let trimmed = []\n                for (let s of selectors) {\n                    trimmed.push(s.trim())\n                    if (typeof resultType === 'string') {\n                        resultTypes.push(resultType)\n                    } else {\n                        resultTypes.push('textContent')\n                    }\n                }\n                selectors = trimmed\n            }\n        } else {\n            if (selector[0].resultType !== undefined) {\n                resultTypes = selector.map(s => {\n                    return s.resultType\n                })\n                selectors = selector.map(s => {\n                    return s.selector\n                })\n            }\n        }\n        return {selectors, resultTypes}\n    }\n\n    static applyToIframes(callback) {\n        jQuery('iframe').each((index, el) => {\n            const content = jQuery(el).contents()\n            if (content && content.length) {\n                callback(index, content)\n            }\n        })\n    }\n\n    /**\n     * Extracts form data from an axiom / task object\n     * @param {} task \n     */\n    static extractFormData(task, keepDisabled = false) {\n        let formData = []\n        while (typeof task.data === 'string') {\n            task.data = JSON.parse(task.data)\n        }\n        // remove all disabled widgets from task before run.\n        // used `for in` to take the index\n        for (let wid in task.data.form) {\n            if(keepDisabled || !(task.data.form[wid].is_disable !== undefined && task.data.form[wid].is_disable === true)) {\n                formData.push(task.data.form[wid])\n            }\n        }\n        return formData\n    }\n\n    /**\n     * Loads the campaign cookie from the Axiom website, if one is set\n     */\n    static async getCampaign() {\n        return new Promise(resolve => {\n            chrome.cookies.getAll({name: \"axiom_ga_query_params\"}, res => {\n                if (res.length > 0) {\n                    const desiredCookie = res.filter(item => item.path === '/')[0]\n                    if (desiredCookie) {\n                        resolve(desiredCookie.value)\n                    } else {\n                        resolve(res[0].value)\n                    }\n                } else {\n                    resolve('')\n                }\n            })\n        })\n    }\n\n    static getStepNumbering(widgets, nestingData) {\n        if (!nestingData) {\n            const wn = new WidgetsNestable()\n            nestingData = wn.buildNestingData(widgets)\n        }\n        let parts = [0, 0, 0, 0, 0]\n        for (let windex in nestingData) {\n            if (!nestingData[windex].endingBlock) {\n                parts[nestingData[windex].indent]++\n            } else if (nestingData[windex-1] && nestingData[windex-1].indent > nestingData[windex].indent) {\n                parts[nestingData[windex-1].indent] = 0\n            }\n            widgets[windex].stepNumber = parts.slice(0, nestingData[windex].indent + 1).join('.')\n        }\n    }\n\n    static getTrimmedUrl(url) {\n        try {\n            let trimmed = url.trim().toLowerCase()\n            let urlObject = new URL(trimmed)\n\n            urlObject.hash = ''\n            urlObject.search = ''\n            urlObject.pathname = ''\n\n            return urlObject.toString()\n        } catch(e) {\n            return url\n        }\n    }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RunningData = /** @class */ (function () {\n    function RunningData() {\n        this.states = [];\n    }\n    RunningData.prototype.store = function (skipEvent) {\n        if (skipEvent === void 0) { skipEvent = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        chrome.runtime.sendMessage({ greeting: 'running_data_store', skipEvent: skipEvent }, function () {\n                            resolve('');\n                        });\n                    })];\n            });\n        });\n    };\n    RunningData.prototype.load = function (fireEventTrigger) {\n        if (fireEventTrigger === void 0) { fireEventTrigger = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        chrome.runtime.sendMessage({ greeting: 'running_data_load', fireEventTrigger: fireEventTrigger }, function (states) {\n                            if (Array.isArray(states)) {\n                                _this.states = states;\n                                _this.countStates();\n                            }\n                            resolve('');\n                        });\n                    })];\n            });\n        });\n    };\n    RunningData.prototype.loadState = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        chrome.runtime.sendMessage({ greeting: 'running_data_load_state', id: id }, function (res) {\n                            if (Array.isArray(res.states)) {\n                                _this.states = res.states;\n                                _this.countStates();\n                            }\n                            resolve(res.state);\n                        });\n                    })];\n            });\n        });\n    };\n    RunningData.prototype.addState = function (id, state, cloud) {\n        if (cloud === void 0) { cloud = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        chrome.runtime.sendMessage({ greeting: 'running_data_add_state', id: id, state: state, cloud: cloud }, function (res) {\n                            if (Array.isArray(res.states)) {\n                                _this.states = res.states;\n                                _this.countStates();\n                            }\n                            resolve(res.state);\n                        });\n                    })];\n            });\n        });\n    };\n    RunningData.prototype.clearState = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        chrome.runtime.sendMessage({ greeting: 'running_data_clear_state', id: id }, function (states) {\n                            if (Array.isArray(states)) {\n                                _this.states = states;\n                                _this.countStates();\n                            }\n                            resolve('');\n                        });\n                    })];\n            });\n        });\n    };\n    RunningData.prototype.clearAllStates = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        chrome.runtime.sendMessage({ greeting: 'running_data_clear_all_states' }, function (states) {\n                            _this.states = states;\n                            _this.countStates();\n                            resolve('');\n                        });\n                    })];\n            });\n        });\n    };\n    RunningData.prototype.cloudStateCount = function () {\n        return this.csc;\n    };\n    RunningData.prototype.desktopStateCount = function () {\n        return (process.env.NO_DESKTOP_CONCURRENCY_LIMIT) ? 0 : this.dsc;\n    };\n    RunningData.prototype.countStates = function () {\n        this.csc = 0;\n        this.dsc = 0;\n        for (var _i = 0, _a = this.states; _i < _a.length; _i++) {\n            var s = _a[_i];\n            if (s.cloud) {\n                this.csc++;\n            }\n            else {\n                this.dsc++;\n            }\n        }\n    };\n    return RunningData;\n}());\nexports.default = RunningData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WidgetsNestable = exports.NestingData = void 0;\nvar WidgetNestable = /** @class */ (function () {\n    function WidgetNestable(indent, outdent, middent, widgetShow) {\n        if (middent === void 0) { middent = ''; }\n        if (widgetShow === void 0) { widgetShow = 'all'; }\n        this.indent = indent;\n        this.middent = middent;\n        this.outdent = outdent;\n        this.widgetShow = widgetShow;\n    }\n    return WidgetNestable;\n}());\nvar NestingData = /** @class */ (function () {\n    function NestingData(indent, startingBlock, endingBlock, midBlock) {\n        if (midBlock === void 0) { midBlock = false; }\n        this.indent = indent;\n        this.startingBlock = startingBlock;\n        this.midBlock = midBlock;\n        this.endingBlock = endingBlock;\n        this.outputShow = false;\n    }\n    return NestingData;\n}());\nexports.NestingData = NestingData;\nvar WidgetsNestable = /** @class */ (function () {\n    function WidgetsNestable() {\n        this.list = [\n            new WidgetNestable('WidgetBotCreate', 'WidgetBotComplete'),\n            new WidgetNestable('TemplateUIBot', 'TemplateUIBot'),\n            new WidgetNestable('WidgetIf', 'WidgetIfEnd', 'WidgetElse'),\n            new WidgetNestable('WidgetTry', 'WidgetTryCatchEnd', 'WidgetCatch'),\n            new WidgetNestable('TemplateIfStatememt', 'TemplateIfStatement'),\n            new WidgetNestable('TemplateIfElse', 'TemplateIfElse'),\n            new WidgetNestable('TemplateLoopThroughData', 'TemplateLoopThroughData'),\n            new WidgetNestable('TemplateTryCatch', 'TemplateTryCatch')\n        ];\n    }\n    WidgetsNestable.prototype.getWidgetList = function (widgets, windex) {\n        for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n            var wn = _a[_i];\n            for (var i = windex - 1; i >= 0; i--) {\n                if (wn.indent === widgets[i].machine_name) {\n                    for (var j = windex; j < widgets.length; j++) {\n                        if (wn.outdent === widgets[j].machine_name) {\n                            return wn.widgetShow;\n                        }\n                    }\n                }\n            }\n        }\n        return 'all';\n    };\n    WidgetsNestable.prototype.getIndentWindex = function (widgets, windex, indent) {\n        var wn = this.list.filter(function (item) {\n            return item.indent === indent;\n        });\n        if (!wn || wn.length === 0) {\n            return -1;\n        }\n        for (var i = windex; i >= 0; i--) {\n            if (wn[0].indent === widgets[i].machine_name) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    WidgetsNestable.prototype.isNestable = function (widget) {\n        if (!widget) {\n            return 0;\n        }\n        for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.indent === widget.machine_name) {\n                return 1;\n            }\n            else if (item.outdent === widget.machine_name) {\n                return 2;\n            }\n            else if (item.middent === widget.machine_name) {\n                return 3;\n            }\n        }\n        return 0;\n    };\n    WidgetsNestable.prototype.buildNestingData = function (widgets) {\n        var indents = [];\n        var indent = 0;\n        for (var windex in widgets) {\n            var isNestable = this.isNestable(widgets[windex]);\n            switch (isNestable) {\n                case 0:\n                    indents[windex] = new NestingData(indent, false, false);\n                    break;\n                case 1:\n                    indents[windex] = new NestingData(indent, true, false);\n                    indent++;\n                    break;\n                case 2:\n                    indent--;\n                    indents[windex] = new NestingData(indent, false, true);\n                    break;\n                case 3:\n                    indents[windex] = new NestingData(indent, false, false, true);\n            }\n        }\n        return indents;\n    };\n    WidgetsNestable.prototype.nullNestingData = function () {\n        return new NestingData(0, false, false);\n    };\n    return WidgetsNestable;\n}());\nexports.WidgetsNestable = WidgetsNestable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AttributeSelector = void 0;\nvar diff_match_patch_typescript_1 = require(\"diff-match-patch-typescript\");\n/**\n * Generates a selector for the hierarchy of the target element from DOM\n */\nvar AttributeSelector = /** @class */ (function () {\n    function AttributeSelector() {\n    }\n    AttributeSelector.prototype.getSelector = function (el) {\n        var hierarchy = [];\n        var parentEl = el;\n        while (parentEl && parentEl.tagName.toLowerCase() !== 'html') {\n            var attr = (parentEl.tagName) ? parentEl.tagName.toLowerCase() : '';\n            var map = (parentEl.attributes) ? parentEl.attributes : [];\n            for (var _i = 0, map_1 = map; _i < map_1.length; _i++) {\n                var mp = map_1[_i];\n                if (!/click|style|\\-|href|src|on\\w+/g.test(mp.name)) {\n                    if (mp.name === 'class') {\n                        var classes = mp.value.split(' ');\n                        for (var _a = 0, classes_1 = classes; _a < classes_1.length; _a++) {\n                            var sClass = classes_1[_a];\n                            // Can remove the selectorgadget_ matcher from regex when we are done with the front-end part of the selector tool\n                            if (sClass !== '' && !/\\:|\\:\\/\\/|[\\(\\)\\$\\{\\}]|axiom-matched|axiom-suggested-group|axiom-link|axiom-download|axiom-sel-\\S+|selectorgadget_\\w+/g.test(sClass)) {\n                                attr += '[class~=\"' + sClass + '\"]';\n                            }\n                        }\n                    }\n                    else {\n                        if (!/value|data|\\[|\\]/gi.test(mp.name) && mp.value !== '' && !/\\:|\\:\\/\\//gi.test(mp.value)) {\n                            attr += '[' + mp.name + '=\"' + mp.value.replace(/\\\"/g, '\\\\\"') + '\"]';\n                        }\n                    }\n                }\n            }\n            hierarchy.unshift((attr === '') ? parentEl.tagName.toLowerCase() : attr);\n            parentEl = parentEl.parentElement;\n        }\n        // Useful sanity test - commented out because it shouldn't run in production\n        /*for (let h of hierarchy) {\n            try {\n                document.querySelectorAll(h)\n            } catch (e) {\n                console.error(\"failed querySelector: \", h)\n            }\n        }*/\n        return hierarchy.join(' > ');\n    };\n    /**\n     * Fetches the group selector out of a list of attribute selector\n     *\n     */\n    AttributeSelector.prototype.groupAttributeSelectors = function (selectors) {\n        var commonAncestor = selectors[0];\n        if (selectors.length > 1) {\n            var dmp = new diff_match_patch_typescript_1.DiffMatchPatch();\n            for (var i = 1; i < selectors.length; i++) {\n                var tempDiff = [];\n                tempDiff = dmp.diff_main(commonAncestor, selectors[i]);\n                commonAncestor = '';\n                for (var _i = 0, tempDiff_1 = tempDiff; _i < tempDiff_1.length; _i++) {\n                    var diff = tempDiff_1[_i];\n                    if (diff[0] === 0) {\n                        commonAncestor += diff[1];\n                    }\n                    if (commonAncestor !== '' && diff[0] !== 0) {\n                        break;\n                    }\n                }\n            }\n        }\n        var cleanedGroup = this.cleanupGroupingSelector(commonAncestor);\n        while (this.groupSelectorValidator(cleanedGroup, selectors) !== true) {\n            // trims away the last element from the selector\n            cleanedGroup = cleanedGroup.replace(/(\\s>\\s)(\\S*\\[\\S*\\]|\\S)$/gm, '');\n        }\n        return cleanedGroup;\n    };\n    /**\n     * Validates whether the group selector selects targetted elements\n     *\n     * @param groupSelector\n     * @param elementSelectors\n     */\n    AttributeSelector.prototype.groupSelectorValidator = function (groupSelector, elementSelectors) {\n        var groupEl = document.querySelectorAll(groupSelector);\n        var elementCount = elementSelectors.length;\n        var elementSelectorsString = elementSelectors.join(', ');\n        var elementsWithinGroup = 0;\n        groupEl.forEach(function (el) {\n            var items = el.querySelectorAll(elementSelectorsString);\n            if (items.length >= 0) {\n                elementsWithinGroup = items.length;\n            }\n        });\n        // Would work for cases where selections are made within a single list item\n        if (elementsWithinGroup >= elementCount) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Cleans selector string from incorrect string\n     *\n     * @param selector\n     */\n    AttributeSelector.prototype.cleanupGroupingSelector = function (selector) {\n        var cleanedSelector = selector;\n        var lastCleanedCss = null;\n        while (lastCleanedCss !== cleanedSelector) {\n            lastCleanedCss = cleanedSelector;\n            cleanedSelector = cleanedSelector\n                // removes empty class attributes\n                // [class~=\"\"]\n                .replace(/\\[class\\~\\=\\\"\\\"\\]/gm, '')\n                // removes ' > ' from end of string\n                .replace(/(\\s*\\>+\\s*)$/gm, '')\n                // removes empty attribute selections \n                // > [class~=\"xso\"] > \n                .replace(/(\\>\\s*\\[\\S*\\]\\s*\\>\\s*)/gm, '')\n                // removes dangling attributes at the end of string\n                //  > div[class~=\"\"\n                .replace(/(\\s*\\>\\s*\\S*\\[\\S*\\s*(?<!\\]))$/gm, '');\n        }\n        return cleanedSelector;\n    };\n    return AttributeSelector;\n}());\nexports.AttributeSelector = AttributeSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScrapeHelper = void 0;\nvar ScrapeHelper = /** @class */ (function () {\n    function ScrapeHelper() {\n        // This generates and stores the grouping selector when a preview is being built. Used later to visually highlight the grouping.\n        this.groupSelector = \"\";\n    }\n    ScrapeHelper.prototype.getPreview = function (doc, selectors, resultTypes) {\n        if (selectors && selectors.length > 0 && selectors[0] !== \"No valid path found.\" && /[^\\[\\]\"']/g.test(JSON.stringify(selectors))) {\n            var traces = this.mapTraces(doc, selectors, resultTypes);\n            if (Array.isArray(traces)) {\n                return traces;\n            }\n            else {\n                return [];\n            }\n        }\n        else {\n            return [[]];\n        }\n    };\n    ScrapeHelper.prototype.getDataV0210 = function (el, resultType) {\n        var data = '';\n        switch (resultType) { //TODO: review all result types\n            case 'outerHTML':\n                data = el.outerHTML;\n                break;\n            case 'innerHTML':\n                data = el.innerHTML;\n                if (!data) {\n                    data = el.outerHTML;\n                }\n                break;\n            case 'textContent':\n                data = '';\n                var text = el['innerText'];\n                if (typeof (text !== 'text')) {\n                    text = String(text);\n                }\n                if (text) {\n                    data = text.trim();\n                }\n                if (data === '') {\n                    try {\n                        var el2 = el;\n                        data = el2.value.trim();\n                    }\n                    catch (e) {\n                        // Stop execution from finishing here if there's an error\n                    }\n                }\n                break;\n            case 'link': //TODO: expand to match custom link result type in scraper\n            case 'href':\n                var linkEl = el;\n                if (!el.hasAttribute('href')) {\n                    var children = el.querySelectorAll('[href]');\n                    if (children && children.length) {\n                        linkEl = children[0];\n                    }\n                }\n                var href = null;\n                if (linkEl.hasAttribute('href')) {\n                    href = linkEl['href'];\n                }\n                data = (href !== null) ? href : '';\n                break;\n            case 'image':\n                var imgEl = el;\n                if (!el.hasAttribute('src') && !el.hasAttribute('srcset')) {\n                    var children = Array.from(el.querySelectorAll('[src]')).concat(Array.from(el.querySelectorAll('[srcset]')));\n                    if (children && children.length) {\n                        // According to Barlow, the last item is \"almost always\" correct, but this isn't really possible to determine without some extra UI\n                        imgEl = children[children.length - 1];\n                    }\n                }\n                var src = null;\n                if (imgEl.hasAttribute('src')) {\n                    src = imgEl['src'];\n                }\n                else if (imgEl.hasAttribute('srcset')) {\n                    src = imgEl['srcset'];\n                }\n                data = (src !== null) ? src : '';\n                break;\n        }\n        return data;\n    };\n    ScrapeHelper.prototype.getData = function (el, resultType) {\n        var scrapeLink = (resultType === \"link\" || resultType === 'href');\n        resultType = (scrapeLink) ? \"outerHTML\" : resultType;\n        var result = el[resultType];\n        if (scrapeLink) {\n            var i = 1;\n            var res = '';\n            while (res == \"\" && i <= 5) {\n                result = el[resultType];\n                var href = el['href'];\n                var link = void 0;\n                if (href && href.match(/(([A-Za-z]+[:][/][/])|([/][^\"' ])).[^\"' ]+[^\"' ]+([^\"' ])/)) {\n                    link = href;\n                }\n                else {\n                    var resultMatched = result.match(/href=[\"'](([A-Za-z]+[:][/][/])|([/][^\"' ])).[^\"' ]+[^\"' ]+([^\"' ])/);\n                    if (resultMatched) {\n                        link = resultMatched[0].substring(6);\n                    }\n                    else {\n                        var linkMatched = result.match(/[\"'](([A-Za-z]+[:][/][/])|([/][^\"' ])).[^\"' ]+[/]+[^\"' ]+([^\"' ])/);\n                        if (linkMatched) {\n                            link = linkMatched[0].substring(1);\n                        }\n                        else {\n                            res = \"\";\n                        }\n                    }\n                }\n                if (link) {\n                    if (link[0] == '/') {\n                        var url = window.location.href;\n                        if (link[1] == '/') {\n                            link = url.match(/.[^/]+[/][/]/)[0] + link.substring(2);\n                        }\n                        else {\n                            link = url.match(/[A-Za-z]+[:][/].[^/]+[/]/)[0] + link.substring(1);\n                        }\n                    }\n                    res = (link) ? link : \"\";\n                }\n                // If we didn't get a link then instead look at the parent of the current element and try to get a link from that instead\n                if (res === \"\") {\n                    var parent = el.parentElement;\n                    if (parent && parent.innerHTML) {\n                        i++;\n                        el = parent;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            result = res;\n        }\n        return result;\n    };\n    ScrapeHelper.prototype.countSiblingsLeft = function (el) {\n        var siblings = [];\n        var n = el;\n        var done = false;\n        while (!done) {\n            var sibling = n.previousElementSibling;\n            if (sibling) {\n                siblings.push(sibling);\n                n = sibling;\n            }\n            else {\n                done = true;\n            }\n        }\n        return siblings.length;\n    };\n    ScrapeHelper.prototype.getRootTree = function (el) {\n        var rootTree = [];\n        var node = el;\n        var done = false;\n        while (!done) {\n            var nthCount = this.countSiblingsLeft(node);\n            rootTree.unshift(nthCount);\n            var parent = node.parentElement;\n            if (parent) {\n                node = parent;\n            }\n            else {\n                done = true;\n            }\n        }\n        return rootTree;\n    };\n    ScrapeHelper.prototype.tracesEqual = function (a, b, depth) {\n        if (!a || !b) {\n            return false;\n        }\n        for (var i = 0; i < depth; i++) {\n            if (a[i] !== b[i]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    ScrapeHelper.prototype.attemptGroups = function (all_res, gDepth) {\n        var groups = [];\n        var grouped = [];\n        var lastRow = 0;\n        var rowToAddTo = null;\n        for (var _i = 0, all_res_1 = all_res; _i < all_res_1.length; _i++) {\n            var res = all_res_1[_i];\n            grouped.push([]);\n            for (var _a = 0, res_1 = res; _a < res_1.length; _a++) {\n                var item = res_1[_a];\n                var colsProcessed = 0;\n                // OK, so we need to check this item's trace against items not in this column to find a matching trace.\n                // If we find the matching row, insert our item there and stop. If we fall off the end, push the new row instead.\n                var traceMatchFound = false;\n                for (var g = 0; g < grouped.length - 1; g++) {\n                    var colProcessed = 0;\n                    for (var i = 0; i < grouped[g].length; i++) {\n                        if (grouped[g][i] && item.trace) {\n                            colProcessed = 1;\n                            traceMatchFound = this.tracesEqual(grouped[g][i].trace, item.trace, gDepth);\n                            if (traceMatchFound) {\n                                rowToAddTo = i;\n                                break;\n                            }\n                        }\n                    }\n                    colsProcessed += colProcessed;\n                    if (traceMatchFound)\n                        break;\n                }\n                if (colsProcessed === 1) {\n                    // If only one column has been processed, we basically want to ignore the grouping and just push the columns straight onto its row\n                    grouped[grouped.length - 1].push(item);\n                }\n                else if (grouped.length > 1 && lastRow === 1) {\n                    // We automatically assume this is a grouping match if there's more than one column but only one row\n                    grouped[grouped.length - 1][lastRow - 1] = item;\n                }\n                else if (!traceMatchFound) {\n                    // If a trace match was not found, increase the number of rows and place on a new row\n                    grouped[grouped.length - 1][lastRow] = item;\n                    lastRow++;\n                }\n                else {\n                    // A trace match has been found, so let's add to the correct row\n                    grouped[grouped.length - 1][rowToAddTo] = item;\n                    if (rowToAddTo > lastRow)\n                        lastRow = rowToAddTo;\n                }\n            }\n        }\n        for (var sg in grouped) {\n            for (var it in grouped[sg]) {\n                if (!groups[it]) {\n                    groups[it] = [];\n                }\n                groups[it][sg] = grouped[sg][it].data;\n            }\n        }\n        // Clean up empty items\n        for (var r = 0; r < groups.length; r++) {\n            for (var c = 0; c < groups[r].length; c++) {\n                if (!groups[r][c]) {\n                    groups[r][c] = '';\n                }\n            }\n        }\n        return groups;\n    };\n    ScrapeHelper.prototype.mapTraces = function (doc, selectors, resultTypes) {\n        if (resultTypes === void 0) { resultTypes = \"textContent\"; }\n        // Do nothing, change nothing if document is not set\n        if (!doc || !doc.querySelectorAll) {\n            return { 0: [] };\n        }\n        var gDepthMod = 0;\n        var tides = [];\n        var all_res = [];\n        // if we only have one result type provided then we should use that for all selectors\n        if (typeof resultTypes === 'string') {\n            var resultType = resultTypes.valueOf();\n            resultTypes = [];\n            for (var _i = 0, selectors_1 = selectors; _i < selectors_1.length; _i++) {\n                var s = selectors_1[_i];\n                resultTypes.push(resultType);\n            }\n        }\n        for (var s = 0; s < selectors.length; s++) {\n            var selector = selectors[s];\n            var resultType = resultTypes[s];\n            if (selector && selector.length > 0) {\n                try {\n                    if (selector === 'head' || !selector) {\n                        throw ('');\n                    }\n                    var els = Array.from(doc.querySelectorAll(selector));\n                    if (!els || els.length === 0) {\n                        // A missing element returns \"NO MATCHING ELEMENT\"; this is used later in comparing results from different iframes to choose the best outcome\n                        throw ('NO MATCHING ELEMENT');\n                    }\n                    if (els.length === 1) {\n                        gDepthMod -= 1;\n                    }\n                    var results = [];\n                    for (var _a = 0, els_1 = els; _a < els_1.length; _a++) {\n                        var el = els_1[_a];\n                        var e = els.indexOf(el);\n                        var data = this.getDataV0210(el, resultType);\n                        if (!data) {\n                            data = \"No data, change column type or re-select\";\n                        }\n                        var tag = 'axiom' + s + '-' + e;\n                        var trace = this.getRootTree(el);\n                        el.className = el.className.replace(\"axiom-matched\", '');\n                        results.push({ trace: trace, data: data, selector: selector, tag: tag, el: el });\n                    }\n                    var minTide = results[0].trace.length;\n                    var maxTide = 0;\n                    for (var r = 0; r < results.length; r++) {\n                        var trace = results[r].trace;\n                        var prev = results[results.length - 1].trace;\n                        if (r > 0) {\n                            prev = results[r - 1].trace;\n                        }\n                        var tide = 0;\n                        var done = false;\n                        while (!done && tide < trace.length) {\n                            var t_depth = trace[tide];\n                            var p_depth = prev[tide];\n                            if (t_depth !== p_depth) {\n                                done = true;\n                            }\n                            tide++;\n                        }\n                        if (tide < minTide) {\n                            minTide = tide;\n                        }\n                        if (tide > maxTide) {\n                            maxTide = tide;\n                        }\n                        results[r].trace.push(tide);\n                    }\n                    tides.push({ minTide: minTide, maxTide: maxTide });\n                    all_res.push(results);\n                }\n                catch (e) {\n                    tides.push({ minTide: 999, maxTide: 999 });\n                    all_res.push([{ trace: null, data: e, selector: selector, tag: null, el: null }]);\n                }\n            }\n        }\n        if (tides.length && all_res.length) {\n            tides.sort(function (a, b) {\n                return a.maxTide - b.maxTide;\n            });\n            var gDepth = tides[0].maxTide;\n            gDepth += gDepthMod;\n            this.generateGroupSelector(all_res, gDepth);\n            var grouped = this.attemptGroups(all_res, gDepth);\n            return grouped;\n        }\n        else {\n            return { 0: [] };\n        }\n    };\n    ScrapeHelper.prototype.generateGroupSelector = function (all_res, gDepth) {\n        this.groupSelector = \"\";\n        if (!all_res || !all_res[0] || !all_res[0][0] || !all_res[0][0].trace) {\n            return;\n        }\n        for (var i = 0; i < gDepth; i++) {\n            if (i > 0) {\n                this.groupSelector += \" > \";\n            }\n            this.groupSelector += \":-webkit-any(*):nth-child(\" + parseInt(all_res[0][0].trace[i] + 1) + \")\";\n        }\n    };\n    return ScrapeHelper;\n}());\nexports.ScrapeHelper = ScrapeHelper;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InjectedSelectorTool = void 0;\nvar AttributeSelector_1 = require(\"../Selectors/AttributeSelector\");\nvar HierachyActions_1 = require(\"../Selectors/HierachyActions\");\nvar SelectorFacade_1 = require(\"../Selectors/SelectorFacade\");\nvar BorderHighlight_1 = require(\"./BorderHighlight\");\nvar ScrapeHelper_1 = require(\"./ScrapeHelper\");\nvar AxiomApiHelper_1 = require(\"../../lib/axiomapi/AxiomApiHelper\");\n/**\n * SelectionActions\n */\nvar SelectionActions = /** @class */ (function () {\n    function SelectionActions(context) {\n        this.selectorData = context;\n    }\n    SelectionActions.prototype.add_column = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.selectorData.addSelector();\n                this.selectorData.editSelector(this.selectorData.selectors.length - 1);\n                return [2 /*return*/];\n            });\n        });\n    };\n    SelectionActions.prototype.remove_column = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.selectorData.removeSelector(request.index);\n                return [2 /*return*/];\n            });\n        });\n    };\n    SelectionActions.prototype.select_column = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.selectorData.editSelector(request.index);\n                return [2 /*return*/];\n            });\n        });\n    };\n    SelectionActions.prototype.set_result_type = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.selectorData.setResultType(request.sel_index, request.resultType);\n                return [2 /*return*/];\n            });\n        });\n    };\n    SelectionActions.prototype.reset_column = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.selectorData.resetSelector(request.index);\n                this.selectorData.editSelector(request.index);\n                return [2 /*return*/];\n            });\n        });\n    };\n    SelectionActions.prototype.addElementToSelection = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    SelectionActions.prototype.removeElementFromSelection = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    SelectionActions.prototype.edit_selector = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.selectorData.updateSelector(request.index, request.selector, request.target);\n                return [2 /*return*/];\n            });\n        });\n    };\n    return SelectionActions;\n}());\n/**\n * SelectorData\n */\nvar SelectorData = /** @class */ (function () {\n    function SelectorData() {\n        this.refreshRequired = false;\n        this.selectors = null;\n        this.activeSelectorIndex = 0;\n        this.actions = new SelectionActions(this);\n    }\n    /**\n     * Executes the requested action and then automatically handles any recalculations and issuing of updates\n     *\n     * @param request {action, ...params}\n     */\n    SelectorData.prototype.actionRequest = function (request) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.actions[request.action](request)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SelectorData.prototype.addSelector = function () {\n        this.selectors.push({\n            selector: 'head',\n            selectedElements: [],\n            rejectedElements: [],\n            resultType: this.defaultResultType\n        });\n        this.refreshRequired = true;\n    };\n    SelectorData.prototype.removeSelector = function (index) {\n        this.selectors.splice(index, 1);\n        if (this.selectors.length === 0) {\n            this.addSelector();\n        }\n        else {\n            var removedLastColumn = (index === this.selectors.length);\n            var removedWhileSelected = (index === this.activeSelectorIndex);\n            var selectedColumnShiftedLeft = (index <= this.activeSelectorIndex);\n            if ((removedLastColumn && removedWhileSelected) || selectedColumnShiftedLeft) {\n                this.editSelector(this.activeSelectorIndex - 1);\n            }\n        }\n        if (this.activeSelectorIndex === -1 && this.selectors.length > 0) {\n            this.activeSelectorIndex = 0;\n        }\n        this.refreshRequired = true;\n    };\n    SelectorData.prototype.editSelector = function (index) {\n        if (index < this.selectors.length) { // check index exists\n            this.activeSelectorIndex = index;\n        }\n        else if (this.activeSelectorIndex >= this.selectors.length) {\n            // if current selection is not valid then set to last column\n            this.activeSelectorIndex = this.selectors.length - 1;\n        }\n        this.refreshRequired = true;\n    };\n    SelectorData.prototype.updateSelector = function (index, selector, target) {\n        if (!this.selectors[index]) {\n            // Only happens if it's a brand new scrape, so this should be safe\n            this.addSelector();\n        }\n        this.selectors[index] = selector[index];\n        var singleSelector = new SelectorFacade_1.SelectorFacade();\n        if (target === \"hierarchy\") {\n            var el = document.querySelector(selector[index].selector.hierarchy);\n            if (!el) {\n                this.selectors[index].selector.innerText = \"\",\n                    this.selectors[index].selector.targetElement = undefined;\n                return;\n            }\n            var newSelectors = singleSelector.getSelector(el);\n            this.selectors[index].selector.innerText = newSelectors.innerText,\n                this.selectors[index].selector.targetElement = newSelectors.targetElement;\n        }\n        else if (target === \"innerText\") {\n            var el = document.evaluate(\"//*[text()='\" + selector[index].selector.innerText + \"']\", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n            if (!el) {\n                this.selectors[index].selector.hierarchy = \"\";\n                this.selectors[index].targetElement = undefined;\n                return;\n            }\n            var newSelectors = singleSelector.getSelector(el);\n            this.selectors[index].selector.hierarchy = newSelectors.hierarchy;\n            this.selectors[index].selector.targetElement = newSelectors.targetElement;\n        }\n        this.refreshRequired = true;\n    };\n    SelectorData.prototype.setResultType = function (index, resultType) {\n        if (!this.selectors[index]) {\n            this.addSelector();\n        }\n        this.activeSelectorIndex = index;\n        this.selectors[index].resultType = resultType;\n        this.refreshRequired = true;\n    };\n    SelectorData.prototype.resetSelector = function (index) {\n        this.selectors[index] = {\n            selector: 'head',\n            selections: [],\n            selectedElements: [],\n            rejectedElements: [],\n            resultType: this.defaultResultType,\n            groupSelector: 'body'\n        };\n        this.refreshRequired = true;\n    };\n    return SelectorData;\n}());\n/**\n * @author Nasik aka Kisan <nasik.shafeek@abstraction.co>\n * @author Simon Delany <simon.delany@axiom.ai>\n *\n * Injected into content page and will be kicked into action when the tool is in use\n *\n */\nvar InjectedSelectorTool = /** @class */ (function () {\n    function InjectedSelectorTool() {\n        var _this = this;\n        this.iframeHighlightBorders = [];\n        this.lastSelectorId = 0;\n        this.activeSelector = [];\n        this.activeSelectorIndex = -1;\n        this.selectingClass = 'axiom-sel-selected-';\n        this.suggestingClass = 'axiom-sel-suggested-';\n        this.rejectingClass = 'axiom-sel-rejected-';\n        this.resultType = 'textContent';\n        this.resultTypes = ['textContent'];\n        this.iframeSupportEnabled = false;\n        this.SelectorAlgorithm = new AttributeSelector_1.AttributeSelector();\n        this.hierarchyActions = new HierachyActions_1.HierarchyActions();\n        this.matching = [];\n        this.matchingData = [];\n        this.highlightBorder = new BorderHighlight_1.BorderHighlight(document, false, false);\n        this.singleSelector = new SelectorFacade_1.SelectorFacade();\n        this.scrapeHelper = new ScrapeHelper_1.ScrapeHelper();\n        this.selectorData = new SelectorData();\n        chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) { return __awaiter(_this, void 0, void 0, function () {\n            var _a, suggestions;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = request.action;\n                        switch (_a) {\n                            case 'selector_tool_start': return [3 /*break*/, 1];\n                            case 'selector_tool_confirm': return [3 /*break*/, 2];\n                            case \"selector_tool_reset\": return [3 /*break*/, 3];\n                            case \"selector_tool_cancel\": return [3 /*break*/, 4];\n                            case \"set_result_type\": return [3 /*break*/, 5];\n                            case 'select_column': return [3 /*break*/, 5];\n                            case 'remove_column': return [3 /*break*/, 5];\n                            case 'add_column': return [3 /*break*/, 5];\n                            case 'reset_column': return [3 /*break*/, 5];\n                            case 'edit_selector': return [3 /*break*/, 5];\n                            case \"hide_bubble\": return [3 /*break*/, 7];\n                            case \"generate_suggestions\": return [3 /*break*/, 8];\n                            case \"set_iframe_support\": return [3 /*break*/, 9];\n                        }\n                        return [3 /*break*/, 10];\n                    case 1:\n                        this.scrapeHelper.groupSelector = \"\";\n                        this.selectionMode = (request.selectionType === 'smart' || request.selectionType === 'multi') ? 'multiple' : 'single';\n                        if (request.resultType) {\n                            if (Array.isArray(request.resultType)) {\n                                this.resultTypes = request.resultType;\n                                this.resultType = this.resultTypes[this.selectorData.activeSelectorIndex];\n                            }\n                            else {\n                                this.resultType = request.resultType;\n                                this.resultTypes = [request.resultType];\n                            }\n                        }\n                        else {\n                            this.resultType = 'outerHTML';\n                        }\n                        // We have to set a default resultType e.g. for widgets like scrapeLink to have the link result type as default\n                        this.selectorData.defaultResultType = this.resultType; // this sets a default result type for this selection. any time you add a column it will default this this resultType.\n                        this.highlightBorder.updateResultType(this.resultType);\n                        this.highlightBorder.updateWindex(request.windex);\n                        this.injectV0200();\n                        if (!request.selectors) {\n                            return [2 /*return*/];\n                        }\n                        if (this.selectionMode === \"multiple\") {\n                            this.selectorData.selectors = request.selectors;\n                            this.selectionMode = 'multiple';\n                            this.updateSelections(this.selectorData.selectors[this.selectorData.activeSelectorIndex].resultType, this.selectorData.activeSelectorIndex, document);\n                            AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                                _this.updateSelections(_this.selectorData.selectors[_this.selectorData.activeSelectorIndex].resultType, _this.selectorData.activeSelectorIndex, content[0]);\n                            });\n                            this.sendStateUpdate();\n                        }\n                        else if (this.selectionMode === 'single') {\n                            this.selectorData.selectors = request.selectors;\n                            this.resetHighlights(document);\n                            AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                                _this.resetHighlights(content[0]);\n                            });\n                        }\n                        return [3 /*break*/, 10];\n                    case 2:\n                        if (!request.template_mode) {\n                            this.closingAction(request.widget_type);\n                        }\n                        sendResponse(this.selectorData.selectors);\n                        this.ejectV0200();\n                        return [3 /*break*/, 10];\n                    case 3:\n                        this.ejectV0200();\n                        this.selectionMode = (request.selectionType === 'smart' || request.selectionType === 'multi') ? 'multiple' : 'single';\n                        this.injectV0200();\n                        return [3 /*break*/, 10];\n                    case 4:\n                        this.ejectV0200();\n                        return [3 /*break*/, 10];\n                    case 5:\n                        this.removeAllHighlights(document);\n                        AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, doc) {\n                            _this.removeAllHighlights(doc);\n                        });\n                        return [4 /*yield*/, this.selectorData.actionRequest(request)];\n                    case 6:\n                        _b.sent();\n                        if (this.selectionMode === 'multiple') {\n                            if (this.selectorData.refreshRequired && this.selectorData.selectors[this.selectorData.activeSelectorIndex]) {\n                                this.updateSelections(this.selectorData.selectors[this.selectorData.activeSelectorIndex].resultType, this.selectorData.activeSelectorIndex, document);\n                                AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                                    _this.updateSelections(_this.selectorData.selectors[_this.selectorData.activeSelectorIndex].resultType, _this.selectorData.activeSelectorIndex, content[0]);\n                                });\n                                this.sendStateUpdate();\n                            }\n                        }\n                        else if (this.selectionMode === 'single') {\n                            this.resetHighlights(document);\n                            AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                                _this.resetHighlights(content[0]);\n                            });\n                            this.sendStateUpdate();\n                        }\n                        return [3 /*break*/, 10];\n                    case 7:\n                        chrome.runtime.sendMessage({ action: 'cancel_preview' });\n                        this.ejectV0200();\n                        return [3 /*break*/, 10];\n                    case 8:\n                        suggestions = this.generateSuggestions(request.selector);\n                        sendResponse({ suggestions: suggestions });\n                        return [3 /*break*/, 10];\n                    case 9:\n                        this.iframeSupportEnabled = request.value;\n                        this.iframeHighlightBorders.forEach(function (item) {\n                            item.setIframeSupportEnabled(request.value);\n                        });\n                        return [3 /*break*/, 10];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        }); });\n    }\n    InjectedSelectorTool.prototype.generateSuggestions = function (selector) {\n        if (!selector || selector === \"head\") {\n            return [];\n        }\n        var results;\n        try {\n            results = document.querySelectorAll(selector);\n        }\n        catch (e) {\n            return [];\n        }\n        var sharedAttributes = [];\n        var combinedSelector = this.hierarchyActions.getCombined(document, Array.from(results), [], 'selector');\n        sharedAttributes.push(combinedSelector);\n        for (var i in results) {\n            var el = results[i];\n            if (sharedAttributes.length === 1) {\n                if (el.attributes) {\n                    for (var _i = 0, _a = el.attributes; _i < _a.length; _i++) {\n                        var attr = _a[_i];\n                        if (attr.name !== \"class\" && attr.value) {\n                            var as = this.createAttributeSelector(attr);\n                            if (this.testGeneratedSelector(as, results.length)) {\n                                sharedAttributes.push(as);\n                            }\n                        }\n                    }\n                }\n                if (el.classList) {\n                    for (var _b = 0, _c = el.classList; _b < _c.length; _b++) {\n                        var c = _c[_b];\n                        if (c.indexOf('axiom') === -1) {\n                            if (this.testGeneratedSelector(\".\" + c, results.length)) {\n                                sharedAttributes.push(\".\" + c);\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                // This segment basically removes things in the case that the first result happened to have a length match, but it actually doesn't\n                // include one of the originally selected results (instead it includes something else).\n                if (el.attributes) {\n                    for (var _d = 0, _e = el.attributes; _d < _e.length; _d++) {\n                        var attr = _e[_d];\n                        var as = this.createAttributeSelector(attr);\n                        var found = \"\";\n                        for (var sai in sharedAttributes) {\n                            if (sharedAttributes[sai] === as) {\n                                found = sai;\n                                break;\n                            }\n                        }\n                        if (!found) {\n                            sharedAttributes[found] = null;\n                        }\n                    }\n                }\n                if (el.classList) {\n                    for (var _f = 0, _g = el.classList; _f < _g.length; _f++) {\n                        var c = _g[_f];\n                        var found = \"\";\n                        for (var _h = 0, sharedAttributes_1 = sharedAttributes; _h < sharedAttributes_1.length; _h++) {\n                            var sai = sharedAttributes_1[_h];\n                            if (sharedAttributes[sai] === \".\" + c) {\n                                found = sai;\n                            }\n                        }\n                        if (!found) {\n                            sharedAttributes[found] = null;\n                        }\n                    }\n                }\n            }\n        }\n        sharedAttributes = sharedAttributes.filter(function (el) {\n            return el != null;\n        });\n        return sharedAttributes;\n    };\n    InjectedSelectorTool.prototype.createAttributeSelector = function (attr) {\n        return '[' + attr.name + \"='\" + attr.value + \"']\";\n    };\n    InjectedSelectorTool.prototype.testGeneratedSelector = function (selector, targetLength) {\n        if (!selector) {\n            return false;\n        }\n        var r = document.querySelectorAll(selector);\n        return r.length === targetLength;\n    };\n    /**\n     * Start Using the tool\n     */\n    InjectedSelectorTool.prototype.injectV0200 = function () {\n        var _this = this;\n        this.inuse = true;\n        this.selectorData.selectors = [];\n        this.selectorData.activeSelectorIndex = 0;\n        this.highlightBorder.updateactiveSelectorIndex(0);\n        this.highlightBorder.inject();\n        if (this.selectionMode === 'single') {\n            jQuery(document).on('mousedown.axiom-selection', function (e) {\n                _this.singleElementClickHandler(e);\n            });\n            AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                jQuery(content[0]).on('mousedown.axiom-selection', function (e) {\n                    _this.singleElementClickHandler(e);\n                });\n            });\n        }\n        else {\n            // Adding require things to the parent window\n            jQuery(document).on('mousedown.axiom-selection', function (e) {\n                _this.elementClickHandler(e);\n            });\n            AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                jQuery(content[0]).on('mousedown.axiom-selection', _this.elementClickHandler.bind(_this));\n            });\n        }\n        if (this.resultType === 'link') {\n            jQuery('a').addClass('axiom-link');\n        }\n        else if (this.resultType === 'axiom-download') {\n            jQuery('a').addClass('axiom-download');\n        }\n        /**\n         * Linking the css file for highlighting and stuff\n         */\n        jQuery('body').addClass('axiom-sel-in-action');\n        // Adding the required things to each same origin iframe\n        AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n            if (content.length) {\n                _this.iframeHighlightBorders[index] = new BorderHighlight_1.BorderHighlight(content[0], true, _this.iframeSupportEnabled);\n                _this.iframeHighlightBorders[index].inject();\n                var body = content.find('body');\n                var stylesheet = chrome.runtime.getURL(\"axiomselector.css\");\n                body.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"' + stylesheet + '\">');\n                body.addClass('axiom-sel-in-action');\n                if (_this.resultType === 'link') {\n                    content.find('a').addClass('axiom-link');\n                }\n                else if (_this.resultType === 'axiom-download') {\n                    content.find('a').addClass('axiom-download');\n                }\n            }\n        });\n    };\n    /**\n     * Inject into specific classes where traditional injection doesn't work\n     *\n     * @param mode string | 'single', 'multiple'\n     */\n    InjectedSelectorTool.prototype.injectIntoSpecificClasses = function (mode) {\n        var algos = {\n            'single': this.singleElementClickHandler.bind(this),\n            'multiple': this.elementClickHandler.bind(this)\n        };\n        jQuery('.c9-menu-btn').on('mousedown.axiom-selection', algos[mode]);\n    };\n    InjectedSelectorTool.prototype.ejectFromSpecificClasses = function () {\n        jQuery('.c9-menu-btn').off('mousedown.axiom-selector');\n    };\n    InjectedSelectorTool.prototype.updateSelections = function (activeResultType, activeSelectorIndex, doc) {\n        this.highlightBorder.updateResultType(activeResultType);\n        this.highlightBorder.updateactiveSelectorIndex(activeSelectorIndex);\n        this.updateActiveResultType();\n        this.findMatchesV0190(doc); // TODO: split into the following\n        this.setHighlights(doc);\n    };\n    InjectedSelectorTool.prototype.updateActiveResultType = function () {\n        this.resultType = this.selectorData.selectors[this.selectorData.activeSelectorIndex].resultType;\n        // remove old result type dependant classes\n        jQuery('a').removeClass('axiom-link');\n        jQuery('a').removeClass('axiom-download');\n        // add current result type dependant classes\n        if (this.resultType === 'link') {\n            jQuery('a').addClass('axiom-link');\n        }\n        else if (this.resultType === 'axiom-download') {\n            jQuery('a').addClass('axiom-download');\n        }\n    };\n    InjectedSelectorTool.prototype.sendStateUpdate = function (setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var msg = {\n            action: \"update_state\",\n            preview_data: this.matchingData,\n            selectors: this.selectorData.selectors,\n            activeSelectorIndex: this.selectorData.activeSelectorIndex,\n            groupSelector: this.scrapeHelper.groupSelector\n        };\n        chrome.runtime.sendMessage(msg);\n        if (setFocus) {\n            // Set focus back to the extension after an element has been selected so that keyboard shortcuts function\n            window.focus();\n            chrome.runtime.sendMessage({ action: \"focus_selector_interface\" });\n        }\n    };\n    /**\n     * Disables the usage of the tool\n     */\n    InjectedSelectorTool.prototype.ejectV0200 = function () {\n        var _this = this;\n        jQuery(document).off('mousedown.axiom-selection');\n        jQuery('body').removeClass('axiom-sel-in-action');\n        this.removeAllHighlights(document);\n        var groupStyle = document.getElementById('axiom-group-style');\n        if (groupStyle) {\n            document.head.removeChild(groupStyle);\n        }\n        if (this.highlightBorder) {\n            this.highlightBorder.eject();\n        }\n        jQuery('a').removeClass('axiom-link');\n        AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n            jQuery(content[0]).off('mousedown.axiom-selection');\n            _this.removeAllHighlights(content[0]);\n            var body = content.find('body');\n            jQuery(body).removeClass('axiom-sel-in-action');\n            if (_this.iframeHighlightBorders[index]) {\n                _this.iframeHighlightBorders[index].eject();\n            }\n            try {\n                var groupStyle_1 = content[0].getElementById('axiom-group-style');\n                if (groupStyle_1) {\n                    content[0].head.removeChild(groupStyle_1);\n                }\n                content.find('a').removeClass('axiom-link');\n            }\n            catch (e) {\n                // If there's an error, don't worry be happy\n            }\n        });\n        this.inuse = false;\n        this.selectorData.selectors = [];\n        this.matching = [];\n        this.matchingData = [];\n    };\n    /**\n     * Disables the usage of the tool\n     */\n    InjectedSelectorTool.prototype.ejectV0190 = function (doc) {\n        this.ejectFromSpecificClasses();\n        jQuery(document).off('mousedown.axiom-selection');\n        jQuery('body').removeClass('axiom-sel-in-action');\n        this.removeAllHighlights(doc);\n        this.inuse = false;\n        this.selectorData.selectors = [];\n        this.matching = [];\n        this.matchingData = [];\n        var groupStyle = document.getElementById('axiom-group-style');\n        if (groupStyle) {\n            document.head.removeChild(groupStyle);\n        }\n        if (this.highlightBorder) {\n            this.highlightBorder.eject();\n        }\n        jQuery('a').removeClass('axiom-link');\n        jQuery('a').removeClass('axiom-download');\n    };\n    /**\n     *\n     */\n    InjectedSelectorTool.prototype.resume = function (doc) {\n        this.inuse = true;\n        jQuery('body').addClass('axiom-sel-in-action');\n        this.highlightBorder.setupBorder();\n        // remove all selection as this is a brand new selection\n        this.resetHighlights(doc);\n    };\n    /**\n     * Remove all highlights\n     */\n    InjectedSelectorTool.prototype.resetHighlights = function (doc) {\n        this.removeAllHighlights(doc);\n        this.setHighlights(doc);\n    };\n    InjectedSelectorTool.prototype.setHighlights = function (doc) {\n        var _this = this;\n        // No point doing anything if Document is undefined, null or not a document at all; can happen rarely inside certain iframes\n        if (!doc || !doc.getElementById) {\n            return;\n        }\n        if (this.selectorData.selectors.length && this.selectionMode === 'multiple') {\n            var selectors = this.selectorData.selectors.map(function (selectorObj) {\n                if (!selectorObj.isToken && typeof selectorObj.selector === 'string' && selectorObj.selector !== 'head' && /\\S/.test(selectorObj.selector)) {\n                    return selectorObj.selector;\n                }\n                if (selectorObj.selector.hierarchy) {\n                    return selectorObj.selector.hierarchy;\n                }\n            }).filter(function (s) { return !!s; });\n            var combinedSelector = selectors.join(', ');\n            var matches = [];\n            if (typeof combinedSelector === 'string' && /\\S/.test(combinedSelector)) {\n                matches = Array.from(doc.querySelectorAll(combinedSelector));\n            }\n            var _loop_1 = function (s) {\n                if (s === this_1.selectorData.activeSelectorIndex) {\n                    for (var _i = 0, _a = this_1.selectorData.selectors[this_1.selectorData.activeSelectorIndex].selectedElements; _i < _a.length; _i++) {\n                        var el = _a[_i];\n                        if (el.classList)\n                            el.classList.add(this_1.selectingClass + this_1.selectorData.activeSelectorIndex);\n                    }\n                    for (var _b = 0, _c = this_1.selectorData.selectors[this_1.selectorData.activeSelectorIndex].rejectedElements; _b < _c.length; _b++) {\n                        var el = _c[_b];\n                        if (el.classList)\n                            el.classList.add(this_1.rejectingClass + this_1.selectorData.activeSelectorIndex);\n                    }\n                }\n                if (selectors[s] && /\\S/g.test(selectors[s])) {\n                    var matchingEls = Array.from(doc.querySelectorAll(selectors[s])); // TODO: get combined selector from selectedEls\n                    matchingEls.forEach(function (el) {\n                        if (!/axiom-sel-selected-\\S*|axiom-sel-rejected-\\S*/g.test(el.className)) {\n                            el.classList.add(_this.suggestingClass + s);\n                        }\n                    });\n                }\n            };\n            var this_1 = this;\n            for (var s = 0; s < selectors.length; s++) {\n                _loop_1(s);\n            }\n            for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n                var el = matches_1[_i];\n                jQuery(el).addClass('axiom-matched');\n                this.removeSelectedChildren(el);\n            }\n        }\n        else if (this.selectionMode === 'single') {\n            var sel = this.selectorData.selectors[0].selector;\n            var el = void 0;\n            if (sel.hierarchy) {\n                el = document.querySelector(this.selectorData.selectors[0].selector.hierarchy);\n            }\n            else if (sel.innerText) {\n                var xpath = \"//*[text()='\" + sel.innerText + \"']\";\n                el = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n            }\n            jQuery(el).addClass('axiom-matched');\n            jQuery(el).addClass('axiom-sel-selected-0');\n        }\n        var groupStyle = doc.getElementById('axiom-group-style');\n        if (!groupStyle) {\n            groupStyle = doc.createElement('style');\n            groupStyle.id = 'axiom-group-style';\n            doc.head.appendChild(groupStyle);\n        }\n        if (this.scrapeHelper.groupSelector !== undefined && this.scrapeHelper.groupSelector !== '' && this.scrapeHelper.groupSelector !== 'body') {\n            groupStyle.innerHTML = this.scrapeHelper.groupSelector + \" {\\n                border-style: dotted !important;\\n                border-width: 3px !important;\\n                border-color: #FFC107 !important;\\n                padding: 5px !important;\\n                border-radius: 10px !important;\\n            }\";\n        }\n        else {\n            groupStyle.innerHTML = '';\n        }\n        var otherSelectors = \"\\n        [class*=\\\"\" + this.selectingClass + \"\\\"].axiom-matched  {\\n            background: rgba(0, 153, 255, 0.7) !important\\n            background-image: none !important;\\n        }\\n        [class*=\\\"\" + this.suggestingClass + \"\\\"].axiom-matched  {\\n            background: rgba(0, 153, 255, 0.3) !important;\\n            background-image: none !important;\\n        }\\n        \\n        [class*=\\\"\" + this.selectingClass + \"\\\"]:not(.axiom-matched)  {\\n            background: rgba(153, 153, 153, 0.7) !important\\n            background-image: none !important;\\n        }\\n        [class*=\\\"\" + this.suggestingClass + \"\\\"]:not(.axiom-matched)  {\\n            background: rgba(153, 153, 153, 0.3) !important;\\n            background-image: none !important;\\n        }\";\n        var activeSelector = \"\\n        [class~=\\\"\" + (this.selectingClass + this.selectorData.activeSelectorIndex) + \"\\\"].axiom-matched  {\\n            background-color: #FFC107 !important;\\n            background-image: none !important;\\n        }\\n        [class~=\\\"\" + (this.suggestingClass + this.selectorData.activeSelectorIndex) + \"\\\"].axiom-matched  {\\n            background-color: #ffd98c !important; \\n            background-image: none !important;\\n        }\\n        \\n        [class~=\\\"\" + (this.selectingClass + this.selectorData.activeSelectorIndex) + \"\\\"]:not(.axiom-matched)  {\\n            background-color: rgba(193,193,193, 0.7) !important;\\n            background-image: none !important;\\n        }\\n        [class~=\\\"\" + (this.suggestingClass + this.selectorData.activeSelectorIndex) + \"\\\"]:not(.axiom-matched)  {\\n            background-color: rgba(193,193,193, 0.3) !important; \\n            background-image: none !important;\\n        }\";\n        groupStyle.innerHTML += otherSelectors;\n        groupStyle.innerHTML += activeSelector;\n    };\n    InjectedSelectorTool.prototype.getSelector = function (element) {\n        return this.SelectorAlgorithm.getSelector(element);\n    };\n    /**\n     * Sets \"'axiom-sel-selected-' + number\" for the selection that has been clicked\n     *\n     */\n    InjectedSelectorTool.prototype.setClassForSelected = function (el) {\n        el.classList.add(this.selectingClass + this.selectorData.activeSelectorIndex);\n        return;\n    };\n    /**\n     * Removes \"'axiom-sel-selected-' + number\" for the selection that has been clicked\n     *\n     */\n    InjectedSelectorTool.prototype.removeClassForSelected = function (el) {\n        el.classList.remove(this.selectingClass + this.selectorData.activeSelectorIndex);\n        return;\n    };\n    InjectedSelectorTool.prototype.removeClassForRejected = function (el) {\n        el.classList.remove(this.rejectingClass + this.selectorData.activeSelectorIndex);\n        return;\n    };\n    /**\n     * Sets \"'axiom-sel-suggested-' + number\" for active selector's candidate selections\n     *\n     */\n    InjectedSelectorTool.prototype.setClassForSuggested = function () {\n        var cls = this.suggestingClass + this.selectorData.activeSelectorIndex;\n        this.matching.forEach(function (el) {\n            if (!/axiom-sel-selected-\\S*|axiom-sel-rejected-\\S*/g.test(el.className)) {\n                el.classList.add(cls);\n            }\n        });\n        return;\n    };\n    /**\n     * Removes all classes which are injected for the highlighting purposes\n     */\n    InjectedSelectorTool.prototype.removeAllHighlights = function (doc) {\n        if (!this.selectorData.selectors || this.selectorData.selectors.length === 0) {\n            return;\n        }\n        for (var s = 0; s < this.selectorData.selectors.length; s++) {\n            jQuery(doc).find('*').removeClass(\"axiom-sel-selected-\" + s);\n            jQuery(doc).find('*').removeClass(\"axiom-sel-suggested-\" + s);\n            jQuery(doc).find('*').removeClass(\"axiom-sel-rejected-\" + s);\n            jQuery(doc).find('*').removeClass(\"axiom-matched\");\n        }\n    };\n    /**\n     * Highlights the the current selectors\n     */\n    InjectedSelectorTool.prototype.highlightSelection = function () {\n        var _this = this;\n        if (this.selectionMode === 'multiple') {\n            var sel = document.querySelectorAll(this.selectingClass + this.selectorData.activeSelectorIndex);\n            var sug = document.querySelectorAll(this.suggestingClass + this.selectorData.activeSelectorIndex);\n            var reg = document.querySelectorAll(this.rejectingClass + this.selectorData.activeSelectorIndex);\n            sel.forEach(function (el) {\n                el.classList.add(_this.selectingClass + _this.selectorData.activeSelectorIndex);\n            });\n            sug.forEach(function (el) {\n                el.classList.add(_this.suggestingClass + _this.selectorData.activeSelectorIndex);\n            });\n            reg.forEach(function (el) {\n                el.classList.add(_this.rejectingClass + _this.selectorData.activeSelectorIndex);\n            });\n        }\n        else {\n            var sel = document.querySelectorAll(this.selectingClass + this.selectorData.activeSelectorIndex);\n            sel.forEach(function (el) {\n                el.classList.add(_this.selectingClass + _this.selectorData.activeSelectorIndex);\n                el.classList.add('axiom-matched');\n            });\n        }\n    };\n    InjectedSelectorTool.prototype.findMatchesV0190 = function (doc) {\n        if (this.selectionMode === 'multiple') {\n            var newData = [];\n            this.matching = []; // TODO: Check what this is actually doing. It's never checked anywhere I can see, just set.\n            var selectors = this.selectorData.selectors.filter(function (s) {\n                return typeof s.selector === 'string';\n            }).map(function (s) {\n                if (s.isToken) {\n                    return \"head\";\n                }\n                else {\n                    return s.selector;\n                }\n            });\n            if (selectors.length) {\n                if (this.resultTypes[0] === 'axiom-download' && selectors) {\n                    try {\n                        newData = Array.from(doc.querySelectorAll(selectors[0])).map(function (el) { return [el.outerHTML]; });\n                    }\n                    catch (e) {\n                        // no action required\n                    }\n                }\n                else {\n                    newData = this.scrapeHelper.getPreview(doc, selectors, this.selectorData.selectors.map(function (s) { return s.resultType; }));\n                }\n            }\n            newData = AxiomApiHelper_1.AxiomApiHelper.transpose(newData);\n            if (newData.length > 0) {\n                for (var n in newData) {\n                    var skip = false;\n                    if (newData[n] && newData[n].length > 0) {\n                        for (var _i = 0, _a = newData[n]; _i < _a.length; _i++) {\n                            var d = _a[_i];\n                            if (d === \"NO MATCHING ELEMENT\") {\n                                skip = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!skip) {\n                        this.matchingData[n] = newData[n];\n                    }\n                }\n            }\n            // Fix any holes in the data\n            if (selectors.length > 1) {\n                // First, determine the max number of columns\n                var maxCols = 0;\n                for (var i = 0; i < this.matchingData.length; i++) {\n                    if (this.matchingData[i] && maxCols < this.matchingData[i].length) {\n                        maxCols = this.matchingData[i].length;\n                    }\n                }\n                // Then fill in the gaps!\n                for (var i = 0; i < selectors.length; i++) {\n                    var thisLen = this.matchingData[i] ? this.matchingData[i].length : 0;\n                    if (thisLen < maxCols) {\n                        for (var j = thisLen; j < maxCols; j++) {\n                            if (!this.matchingData[i]) {\n                                this.matchingData[i] = [];\n                            }\n                            this.matchingData[i].push('');\n                        }\n                    }\n                }\n            }\n            // Trim matching data to maximum selector length\n            if (this.matchingData.length > selectors.length) {\n                this.matchingData = this.matchingData.slice(0, selectors.length);\n            }\n            // For any tokens, just add the token name into the matching data.\n            for (var s = 0; s < this.selectorData.selectors.length; s++) {\n                var sel = this.selectorData.selectors[s];\n                if (sel.isToken) {\n                    this.matchingData[s][0] = sel.selector;\n                }\n            }\n        }\n    };\n    InjectedSelectorTool.prototype.blockClicksOn = function (doc) {\n        // Block the entire screen to prevent anything else from being clicked. Amazing this works really!\n        try {\n            var block_1 = jQuery('<div>').css('position', 'fixed').css('z-index', '9999999').\n                css('width', '10000px').css('height', '10000px').\n                css('top', 0).css('left', 0).css('background-color', '');\n            doc.body.appendChild(block_1.get(0));\n            setTimeout(function () {\n                block_1.remove();\n            }, 300);\n        }\n        catch (e) {\n            // Discard the error so we don't interrupt functionality\n        }\n        return false;\n    };\n    /**\n     * When the selection is performed some widgets may require to perform any UI operation. Those are done here\n     *\n     * @param widgetType The type of widget to determine what to do\n     */\n    InjectedSelectorTool.prototype.closingAction = function (widgetType) {\n        return __awaiter(this, void 0, void 0, function () {\n            var selectedElements, elem_1, regex, buttonLabel, axiomWorkspace;\n            return __generator(this, function (_a) {\n                if (!this.selectorData.selectors[this.selectorData.activeSelectorIndex]) {\n                    return [2 /*return*/];\n                }\n                if (this.selectionMode === \"single\" && widgetType && widgetType === 'WidgetDriverClick') {\n                    selectedElements = this.selectorData.selectors[0].selector.hierarchy;\n                    elem_1 = jQuery(selectedElements);\n                    if (!elem_1[0]) {\n                        return [2 /*return*/];\n                    }\n                    regex = new RegExp(/\\w*(create|send|submit)\\w*/gi);\n                    buttonLabel = elem_1.text() || elem_1.val();\n                    if (!regex.test(buttonLabel)) {\n                        axiomWorkspace = document.getElementById('axiom-bot-draw-1976253492');\n                        axiomWorkspace.classList.add(\"axiom-static\");\n                        $.confirm({\n                            title: 'Selection Made',\n                            content: 'Do you want to click this element now?',\n                            boxWidth: '448px',\n                            useBootstrap: false,\n                            // Custom width\n                            // https://craftpip.github.io/jquery-confirm/#custom-width\n                            buttons: {\n                                confirm: function () {\n                                    if (elem_1[0].tagName.toLowerCase() == 'svg') {\n                                        elem_1 = elem_1.parent();\n                                    }\n                                    elem_1[0].click();\n                                    window.focus();\n                                    chrome.runtime.sendMessage({ action: \"focus_selector_interface\" });\n                                },\n                                cancel: function () {\n                                    window.focus();\n                                    chrome.runtime.sendMessage({ action: \"focus_selector_interface\" });\n                                    return;\n                                }\n                            }\n                        });\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Click Handler for single element selections when the selector tool is in action\n     *\n     * @param e\n     */\n    InjectedSelectorTool.prototype.singleElementClickHandler = function (e) {\n        return __awaiter(this, void 0, void 0, function () {\n            var x, singleSelection;\n            var _this = this;\n            return __generator(this, function (_a) {\n                x = e.target;\n                if (!x.classList.contains('axiom-selector-ignore')) {\n                    if (this.resultType === 'link') {\n                        while (x.parentElement && !/\\S/.test(this.scrapeHelper.getData(x, this.resultType))) {\n                            x = x.parentElement;\n                        }\n                    }\n                }\n                this.blockClicksOn(document);\n                AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                    _this.blockClicksOn(content[0]);\n                });\n                if (this.selectorData.selectors[this.selectorData.activeSelectorIndex] === undefined) {\n                    this.selectorData.selectors[this.selectorData.activeSelectorIndex] = {\n                        selector: '',\n                        selections: [],\n                        selectedElements: [],\n                        rejectedElements: [],\n                    };\n                }\n                singleSelection = this.singleSelector.getSelector(x);\n                this.selectorData.selectors[this.selectorData.activeSelectorIndex].selector = singleSelection;\n                this.removeAllHighlights(document);\n                AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                    _this.removeAllHighlights(content[0]);\n                });\n                this.sendStateUpdate();\n                if (!this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements) {\n                    this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements = [];\n                }\n                this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements.push(x);\n                this.setHighlights(document);\n                AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                    _this.setHighlights(content[0]);\n                });\n                // Reset the token flag - if you select something, it's no longer selected by a token\n                this.selectorData.selectors[this.selectorData.activeSelectorIndex].isToken = undefined;\n                try {\n                    this.sendStateUpdate();\n                }\n                catch (e) {\n                    console.warn('Unable to send back message to the chrome extension on single element selection');\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Go down the tree and remove any children of this element that have previously been selected but are no longer\n     * matched by anything - orphaned selectors essentially, which appear as grey blocks that cannot be clicked on inside\n     * a valid, working selector\n     * @param e An element to find the children of and remove any selectors\n     */\n    InjectedSelectorTool.prototype.removeSelectedChildren = function (e) {\n        var children = e.children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            child.classList.remove(this.selectingClass + this.selectorData.activeSelectorIndex);\n            this.removeSelectedChildren(child);\n        }\n    };\n    /**\n     * Hanldes click when the selector tool is in action\n     *\n     * @param e\n     */\n    InjectedSelectorTool.prototype.elementClickHandler = function (e) {\n        return __awaiter(this, void 0, void 0, function () {\n            var x, suggestedElements, combinedSelector_1;\n            var _this = this;\n            return __generator(this, function (_a) {\n                x = e.target;\n                if (this.resultType === 'link') {\n                    while (x.parentElement && !/\\S/.test(this.scrapeHelper.getDataV0210(x, this.resultType))) {\n                        x = x.parentElement;\n                    }\n                }\n                this.blockClicksOn(document);\n                AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                    _this.blockClicksOn(content[0]);\n                });\n                if (this.selectorData.selectors[this.selectorData.activeSelectorIndex] === undefined) {\n                    this.selectorData.selectors[this.selectorData.activeSelectorIndex] = {\n                        selector: '',\n                        selections: [],\n                        selectedElements: [],\n                        rejectedElements: [],\n                        resultType: this.selectorData.defaultResultType,\n                    };\n                }\n                else {\n                    this.selectorData.selectors[this.selectorData.activeSelectorIndex].isToken = false;\n                }\n                if (!/axiom-tool/g.test(x.className)) {\n                    suggestedElements = [];\n                    try {\n                        if (this.selectionMode = 'multiple') {\n                            suggestedElements = Array.from(document.querySelectorAll(this.selectorData.selectors[this.selectorData.activeSelectorIndex].selector));\n                        }\n                    }\n                    catch (e) {\n                        suggestedElements = [];\n                    }\n                    if (suggestedElements.includes(x)) {\n                        // if element is manually selected by user\n                        if (this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements.includes(x)) {\n                            // unselect element\n                            x.classList.remove(this.selectingClass + this.selectorData.activeSelectorIndex);\n                            this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements = this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements.filter(function (el) {\n                                return el !== x;\n                            });\n                            // if we have deselected all elements then we should automatically deselect all rejected elements:\n                            if (this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements.length === 0) {\n                                this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements = [];\n                            }\n                        }\n                        else { // element is only suggested by the selection\n                            // exclude the element\n                            if (!this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements.includes(x)) {\n                                x.classList.add(this.rejectingClass + this.selectorData.activeSelectorIndex);\n                                this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements.push(x);\n                            }\n                            else {\n                                x.classList.remove(this.rejectingClass + this.selectorData.activeSelectorIndex);\n                                this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements = this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements.filter(function (el) {\n                                    return el !== x;\n                                });\n                            }\n                        }\n                    }\n                    else { // element is not currently included in the selection\n                        if (this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements.includes(x)) {\n                            // element has previously been manually excluded: remove from rejected list\n                            x.classList.remove(this.rejectingClass + this.selectorData.activeSelectorIndex);\n                            this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements = this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements.filter(function (el) {\n                                return el !== x;\n                            });\n                            // If this hasn't been tagged as matched, immediately re-select it; this can happen in the case where you unselect a non-selected\n                            // element, and this removes everything. The main way that happens is when editing selectors.\n                            if (!x.classList.contains(\"axiom-matched\")) {\n                                x.classList.add(this.selectingClass + this.selectorData.activeSelectorIndex);\n                                this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements.push(x);\n                            }\n                        }\n                        else { // element is not rejected or suggested\n                            // select element\n                            x.classList.add(this.selectingClass + this.selectorData.activeSelectorIndex);\n                            this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements.push(x);\n                        }\n                    }\n                    combinedSelector_1 = this.hierarchyActions.getCombined(document, this.selectorData.selectors[this.selectorData.activeSelectorIndex].selectedElements, this.selectorData.selectors[this.selectorData.activeSelectorIndex].rejectedElements, 'selector');\n                    if (document.querySelectorAll(combinedSelector_1).length > 0) {\n                        this.selectorData.selectors[this.selectorData.activeSelectorIndex].selector = combinedSelector_1;\n                    }\n                    else {\n                        AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, content) {\n                            combinedSelector_1 = _this.hierarchyActions.getCombined(content[0], _this.selectorData.selectors[_this.selectorData.activeSelectorIndex].selectedElements, _this.selectorData.selectors[_this.selectorData.activeSelectorIndex].rejectedElements, 'selector');\n                            if (content[0].querySelectorAll(combinedSelector_1).length > 0) {\n                                _this.selectorData.selectors[_this.selectorData.activeSelectorIndex].selector = combinedSelector_1;\n                            }\n                        });\n                    }\n                    this.findMatchesV0190(document);\n                    this.resetHighlights(document);\n                    AxiomApiHelper_1.AxiomApiHelper.applyToIframes(function (index, doc) {\n                        try {\n                            _this.findMatchesV0190(doc[0]);\n                            _this.resetHighlights(doc[0]);\n                        }\n                        catch (e) {\n                            // Discard any errors that happen in iframes\n                        }\n                    });\n                    // Reset the token flag - if you select something, it's no longer selected by a token\n                    this.selectorData.selectors[this.selectorData.activeSelectorIndex].isToken = undefined;\n                    this.sendStateUpdate(true);\n                }\n                return [2 /*return*/, false];\n            });\n        });\n    };\n    return InjectedSelectorTool;\n}());\nexports.InjectedSelectorTool = InjectedSelectorTool;\nwindow['axiom_selector'] = new InjectedSelectorTool();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HierarchyActions = void 0;\nvar AttributeSelector_1 = require(\"./AttributeSelector\");\nvar HierarchyActions = /** @class */ (function () {\n    function HierarchyActions() {\n        this.attributeSelector = new AttributeSelector_1.AttributeSelector();\n    }\n    /**\n     * Takes 2 collections of elements\n     * Returns a single AtrributeSelector that will:\n     * -select all includeElements\n     * -select none of the excludeElements\n     *\n     * @param includeElements Array of Elements to be included in the selection\n     * @param excludeElements Array of Elements to be excluded from the selection\n     *\n     * @returns String to be used as a selector compatable with document.querySelectorAll(selector: String)\n     * @example ':-webkit-any(div, body):not([id=\"g2\"]) > :-webkit-any(article, section)[class~=\"post\"]:not([id=\"a4\"]) > h3:not([id=\"h4\"])'\n     *\n     */\n    HierarchyActions.prototype.getCombined = function (document, includeElements, excludeElements, type) {\n        if (includeElements.length === 0) {\n            return '';\n        }\n        var includeSelectors = this.getAsAttributeSelectors(includeElements);\n        var excludeSelectors = this.getAsAttributeSelectors(excludeElements);\n        var inSections = [];\n        var exSections = [];\n        for (var _i = 0, includeSelectors_1 = includeSelectors; _i < includeSelectors_1.length; _i++) {\n            var selector = includeSelectors_1[_i];\n            inSections.push(this.splitHierarchyString(selector));\n        }\n        for (var _a = 0, excludeSelectors_1 = excludeSelectors; _a < excludeSelectors_1.length; _a++) {\n            var selector = excludeSelectors_1[_a];\n            exSections.push(this.splitHierarchyString(selector));\n        }\n        var allSections = [].concat(inSections, exSections);\n        var levels = [];\n        // The tags arrays are ordered with the highest element in the tree first, and this causes things to go out of sync when selectors are not \n        // the same length. For example, body > div > span and body > div will be compared as [[span, div], [div, body], [body, undefined]].\n        // To fix this we add a new reversed version of the tags and modifers to each of the objects we check.\n        for (var _b = 0, allSections_1 = allSections; _b < allSections_1.length; _b++) {\n            var as = allSections_1[_b];\n            as.tagsReversed = as.tags.slice().reverse();\n        }\n        for (var _c = 0, inSections_1 = inSections; _c < inSections_1.length; _c++) {\n            var is = inSections_1[_c];\n            is.tagsReversed = is.tags.slice().reverse();\n        }\n        // Loop through the tags. This entire loop is inside out. We are looping through the inner array \n        // (which represents the parts of the hierarchy for each selector), as\n        // the outer loop, and the outer array (which represents each selector) as the inner loop. The reason for this is so we can compare the\n        // individual parts of the two selector strings.\n        var largestTagIndex = 0;\n        for (var _d = 0, allSections_2 = allSections; _d < allSections_2.length; _d++) {\n            var section = allSections_2[_d];\n            if (section.tagsReversed.length > largestTagIndex) {\n                largestTagIndex = section.tags.length;\n            }\n        }\n        for (var index = 0; index < largestTagIndex; index++) {\n            // We loop through the outer loop and get an array of tags and modifiers for each section for this part of the hierarchy\n            var tags = [];\n            for (var _e = 0, inSections_2 = inSections; _e < inSections_2.length; _e++) {\n                var section = inSections_2[_e];\n                // get tags\n                if (section.tagsReversed[index]) {\n                    tags.push(section.tagsReversed[index]);\n                }\n            }\n            if (tags.length === 0) {\n                return '';\n            }\n            var tag = '';\n            if (tags.length === inSections.length) {\n                if (tags.length === 1) {\n                    tag = tags[0];\n                }\n                else {\n                    var reducedTags = [];\n                    for (var _f = 0, tags_1 = tags; _f < tags_1.length; _f++) {\n                        var t = tags_1[_f];\n                        if (reducedTags.indexOf(t) === -1) {\n                            reducedTags.push(t);\n                        }\n                    }\n                    if (reducedTags.length === 1) {\n                        tag = reducedTags[0];\n                    }\n                    else {\n                        tag = \":-webkit-any(\" + reducedTags.join(', ') + \")\";\n                    }\n                }\n                levels.push(tag);\n            }\n        }\n        var combinedSelector = '';\n        combinedSelector = levels.join(' > ');\n        combinedSelector = combinedSelector.replace(/\\n/g, '');\n        combinedSelector = combinedSelector.replace(/\\s\\s/g, ' ');\n        combinedSelector = combinedSelector.replace(/\\[class~=\"[^\\S]*\"\\]/g, '');\n        if (type === 'selector') {\n            var selectorWithNthSpecifiers = this.applyNthSpecifiers(document, combinedSelector, includeElements, excludeElements);\n            // If this selector selects the same number of results as the previous one, we don't use it; it's likely too specific.\n            if (document.querySelectorAll(combinedSelector).length !== document.querySelectorAll(selectorWithNthSpecifiers).length) {\n                combinedSelector = selectorWithNthSpecifiers;\n            }\n        }\n        var matchedElements = [];\n        try {\n            matchedElements = Array.from(document.querySelectorAll(combinedSelector));\n        }\n        catch (e) {\n        }\n        combinedSelector = this.trimAttributes(document, combinedSelector, matchedElements, excludeElements);\n        combinedSelector = this.trimHierarchy(document, combinedSelector, matchedElements, excludeElements);\n        return combinedSelector.replace(/\\:not\\(\\)/g, \"\"); // strip empty :not() attributes\n    };\n    HierarchyActions.prototype.excludedMatches = function (document, selector, excludedElements) {\n        //get all elements that are currently matched by the combined selector\n        var matching = [];\n        try {\n            matching = Array.from(document.querySelectorAll(selector));\n        }\n        catch (e) {\n        }\n        //check for any elements in excludeElements that matched\n        return matching.filter(function (el) {\n            return excludedElements.includes(el);\n        });\n    };\n    HierarchyActions.prototype.misMatches = function (document, selector, excludedElements) {\n        //get all elements that are currently matched by the combined selector\n        var matching = [];\n        try {\n            matching = Array.from(document.querySelectorAll(selector));\n        }\n        catch (e) {\n        }\n        //check for any elements not includeedElements that matched\n        return matching.filter(function (el) {\n            return excludedElements.includes(el);\n        });\n    };\n    HierarchyActions.prototype.overSelected = function (document, selector, elementsToMatch) {\n        //get all elements that are currently matched by the combined selector\n        var matching = [];\n        try {\n            matching = Array.from(document.querySelectorAll(selector));\n        }\n        catch (e) {\n        }\n        //check for any extra elements sneaking in\n        return matching.filter(function (el) {\n            return !elementsToMatch.includes(el);\n        });\n    };\n    HierarchyActions.prototype.missingElements = function (document, selector, elementsToMatch) {\n        //get all elements that are currently matched by the combined selector\n        var matching = [];\n        try {\n            matching = Array.from(document.querySelectorAll(selector));\n        }\n        catch (e) {\n        }\n        //check for any missing elements\n        return elementsToMatch.filter(function (el) {\n            return !matching.includes(el);\n        });\n    };\n    HierarchyActions.prototype.trimHierarchy = function (document, combinedSelector, includeElements, excludeElements) {\n        var selectorLevels = combinedSelector.split(' > ');\n        var trimmedLength = selectorLevels.length;\n        var trimmedSelector = selectorLevels.slice(selectorLevels.length - trimmedLength, selectorLevels.length).join(' > ');\n        while (trimmedLength > 0 && !this.missingElements(document, trimmedSelector, includeElements).length && !this.misMatches(document, trimmedSelector, excludeElements).length && !this.overSelected(document, trimmedSelector, includeElements).length) {\n            trimmedLength--;\n            trimmedSelector = selectorLevels.slice(selectorLevels.length - trimmedLength, selectorLevels.length).join(' > ');\n            if (/\\:not\\(\\:nth/.test(selectorLevels[selectorLevels.length - trimmedLength])) { // here we have a user specified exclusion and so we shouldn't strip it out\n                return selectorLevels.slice(selectorLevels.length - (trimmedLength), selectorLevels.length).join(' > ');\n            }\n        }\n        return selectorLevels.slice(selectorLevels.length - (trimmedLength + 1), selectorLevels.length).join(' > ');\n    };\n    HierarchyActions.prototype.trimSelector = function (document, selector, includeElements, excludeElements) {\n        var selectorLevels = selector.split(' > ');\n        var trimmedLength = selectorLevels.length;\n        var trimmedSelector = selectorLevels.slice(selectorLevels.length - trimmedLength, selectorLevels.length).join(' > ');\n        while (trimmedLength < selectorLevels.length - 1 && !this.missingElements(document, trimmedSelector, includeElements).length && !this.misMatches(document, trimmedSelector, excludeElements).length) {\n            trimmedLength++;\n            trimmedSelector = selectorLevels.slice(selectorLevels.length - trimmedLength, selectorLevels.length).join(' > ');\n            trimmedSelector = this.trimAttributes(document, trimmedSelector, includeElements, excludeElements);\n        }\n        return selectorLevels.slice(selectorLevels.length - (trimmedLength + 1), selectorLevels.length).join(' > ');\n    };\n    HierarchyActions.prototype.trimAttributes = function (document, combinedSelector, includeElements, excludeElements) {\n        var allAttributes = combinedSelector.match(/\\[[^\\s\\[\\]]*\\]/g);\n        if (allAttributes && allAttributes.length) {\n            for (var _i = 0, allAttributes_1 = allAttributes; _i < allAttributes_1.length; _i++) {\n                var attribute = allAttributes_1[_i];\n                attribute = attribute.replace(/\\+/g, \"\\\\+\");\n                // we will make a selector for testing where all occurances of attribute are stripped out\n                var testSelector = combinedSelector.replace(new RegExp(attribute.replace('[', '\\\\[').replace(']', '\\\\]'), 'g'), \"\");\n                if (!this.missingElements(document, testSelector, includeElements).length && !this.misMatches(document, testSelector, excludeElements).length && !this.overSelected(document, testSelector, includeElements).length) {\n                    combinedSelector = testSelector;\n                }\n            }\n        }\n        return combinedSelector;\n    };\n    HierarchyActions.prototype.applyNthSpecifiers = function (document, combinedSelector, includeElements, excludeElements) {\n        // ensure there are no hidden elements selected by the combinedSelector before adding the nthSelectors\n        var initialMatches = Array.from(document.querySelectorAll(combinedSelector));\n        var invisible = initialMatches.filter(function (el) {\n            return !(includeElements.includes(el) || $(el).filter(':visible').length);\n        });\n        var nthMods = [];\n        // Pull out the number of siblings of the target element at each depth\n        // \"Inc Levels\" and \"Ex Levels\" here are poorly named, but are basically the array of each selector's sibling counts, transposed.\n        var inc_levels = [];\n        for (var _i = 0, includeElements_1 = includeElements; _i < includeElements_1.length; _i++) {\n            var include = includeElements_1[_i];\n            var counts = treeCount(include);\n            for (var level in counts) {\n                if (Array.isArray(inc_levels[level])) {\n                    inc_levels[level].push(counts[level]);\n                }\n                else {\n                    inc_levels[level] = [counts[level]];\n                }\n            }\n        }\n        var exc_levels = [];\n        for (var _a = 0, excludeElements_1 = excludeElements; _a < excludeElements_1.length; _a++) {\n            var exclude = excludeElements_1[_a];\n            var counts = treeCount(exclude);\n            for (var level in counts) {\n                if (Array.isArray(exc_levels[level])) {\n                    exc_levels[level].push(counts[level]);\n                }\n                else {\n                    exc_levels[level] = [counts[level]];\n                }\n            }\n        }\n        for (var level in inc_levels) {\n            var inc_nth = inc_levels[level];\n            var exc_nth = exc_levels[level];\n            // This basically removes stuff from inc_nth that is in exc_nth, but is expressed needlessly generically.\n            var unique_nth = getUnique(inc_nth, exc_nth);\n            var nthMod = getNthMods({ include: inc_nth, exclude: unique_nth.exclude });\n            nthMods[level] = (nthMod !== undefined) ? nthMod : '';\n        }\n        var split = combinedSelector.split(' > ');\n        split.reverse();\n        for (var level in split) {\n            if (nthMods[level]) {\n                split[level] += nthMods[level];\n            }\n        }\n        split.reverse();\n        return split.join(' > ');\n        // 'HELPER' FUNCTIONS\n        // Seriously these should not be nested 2 deep in the parent function, needs a refactor badly\n        function treeCount(element) {\n            var counts = [];\n            var check = element;\n            while (check.parentElement && check.tagName) {\n                var count = countSiblings(check);\n                counts.push(count);\n                check = check.parentElement;\n            }\n            return counts;\n        }\n        function countSiblings(element) {\n            var siblingCount = 1;\n            var ofTypeCount = 1;\n            var check = element;\n            while (check.previousElementSibling && check.tagName) {\n                siblingCount++;\n                if (check.previousElementSibling.tagName === check.tagName) {\n                    ofTypeCount++;\n                }\n                check = check.previousElementSibling;\n            }\n            return siblingCount;\n        }\n        // returns items in a that aren't in b and in b that aren't in a\n        function getUnique(include, exclude) {\n            var uniqueInclude = [];\n            if (include && include.length) {\n                if (exclude && exclude.length) {\n                    uniqueInclude = include.filter(function (item) {\n                        return !exclude.includes(item);\n                    });\n                }\n                else { // there are no excludes specified and so all includes are unique\n                    uniqueInclude = include;\n                }\n            }\n            var uniqueExclude = [];\n            if (exclude && exclude.length) {\n                if (include && include.length) {\n                    uniqueExclude = exclude.filter(function (item) {\n                        return !include.includes(item);\n                    });\n                }\n                else { // there are no includes specified and so all excludes are unique\n                    uniqueExclude = exclude;\n                }\n            }\n            return { include: uniqueInclude, exclude: uniqueExclude };\n        }\n        function getNthMods(sample) {\n            var include = { series: sample.include, diffs: [], expandedSeries: [] };\n            var exclude = { series: sample.exclude, diffs: [], expandedSeries: [] };\n            // So a diff here is an array, containing the differences between each chosen element for that level of the hierarchy\n            // For example, if elemnt 0 has selected the 2nd sibling at a particular level, and element 1 has the 3rd, this generates a diff of 1\n            genDiffs(include);\n            var includeMeta = findSeries(include.series, include.diffs);\n            var pattern = getSeriesFormula(includeMeta);\n            var includePattern;\n            if (pattern) {\n                includePattern = \":nth-child(\" + pattern + \")\";\n            }\n            genDiffs(exclude);\n            exclude = findSeries(exclude.series, include.diffs);\n            var excludePatterns = [];\n            if (exclude.expandedSeries.length && exclude.diffs[0] !== undefined && exclude.series[0] !== undefined && !hasCommonItem(include.series, exclude.expandedSeries)) {\n                // generate pattern\n                var m = exclude.diffs[0];\n                var c = exclude.series[0]; // use series so that any pattern starts with first excluded element\n                var offset = (c > 0) ? \"+\" + c : (c < 0) ? \"\" + c : '';\n                var pattern_1 = m + \"n\" + offset;\n                var exc_pattern = \":not(:nth-child(\" + pattern_1 + \"))\";\n                if (!excludePatterns.includes(exc_pattern)) {\n                    excludePatterns.push(exc_pattern);\n                }\n            }\n            else {\n                // generate nths\n                for (var _i = 0, _a = exclude.series; _i < _a.length; _i++) {\n                    var val = _a[_i];\n                    var exc_pattern = \":not(:nth-child(\" + val + \"))\";\n                    if (!excludePatterns.includes(exc_pattern)) {\n                        excludePatterns.push(exc_pattern);\n                    }\n                }\n            }\n            var nthMods = '';\n            if (includePattern) {\n                nthMods += includePattern;\n            }\n            if (excludePatterns.length) {\n                nthMods += \"\" + excludePatterns.join('');\n            }\n            return nthMods;\n            // HELPER FUNCTIONS\n            // Same anti-pattern as previously\n            function genDiffs(set) {\n                var diffs = [];\n                var series = set.series.sort(function (a, b) {\n                    return a - b;\n                });\n                for (var i = 0; i < series.length - 1; i++) {\n                    var newDiff = series[i + 1] - series[i];\n                    if (newDiff > 0 && !diffs.includes(newDiff)) {\n                        diffs.push(newDiff);\n                    }\n                }\n                set.diffs = diffs;\n                set.sortedDiffs = diffs.sort(function (a, b) {\n                    return a - b;\n                });\n            }\n            function hasCommonItem(a, b) {\n                var commonItem = false;\n                for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n                    var item = a_1[_i];\n                    if (b.includes(item)) {\n                        commonItem = true;\n                    }\n                }\n                return commonItem;\n            }\n            function allFoundIn(a, b) {\n                for (var _i = 0, a_2 = a; _i < a_2.length; _i++) {\n                    var item = a_2[_i];\n                    if (!b.includes(item)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            function getExpandedSeries(series, stepValue) {\n                if (!series.length) {\n                    return [];\n                }\n                var expandedSeries = [];\n                var sortedSeries = JSON.parse(JSON.stringify(series));\n                sortedSeries.sort(function (b, a) {\n                    var diff = b - a;\n                    return diff;\n                });\n                var seriesLimit = sortedSeries[sortedSeries.length - 1];\n                var seriesStart = seriesLimit % stepValue;\n                expandedSeries.push(seriesLimit);\n                while (expandedSeries[0] > seriesStart) {\n                    expandedSeries.unshift(expandedSeries[0] - stepValue);\n                }\n                return expandedSeries;\n            }\n            function findSeries(series, diffs) {\n                var result = { series: series, expandedSeries: [], diffs: [] };\n                if (!diffs.length) {\n                    result.expandedSeries = [series[0]];\n                }\n                else {\n                    var stepValue = diffs[0];\n                    var done = false;\n                    while (stepValue > 0 && !done) {\n                        var testSeries = getExpandedSeries(series, stepValue);\n                        if (allFoundIn(series, testSeries)) {\n                            result = { series: series, expandedSeries: testSeries, diffs: [stepValue] };\n                            done = true;\n                        }\n                        else {\n                            stepValue--;\n                        }\n                    }\n                }\n                return result;\n            }\n            function getSeriesFormula(setObject) {\n                var m; // (multiplier)\n                var c; // (x shift)\n                // set m value (multiplier)\n                if (!setObject.diffs.length) {\n                    m = 0;\n                }\n                else {\n                    m = setObject.diffs[0];\n                }\n                // set c value (x shift)\n                if (m === 0) {\n                    c = setObject.expandedSeries[0];\n                    if (c) {\n                        return \"\" + c;\n                    }\n                }\n                else {\n                    c = (setObject.expandedSeries[0] !== undefined) ? setObject.expandedSeries[0] - m : 0;\n                }\n                var nthDescriptor = m + \"n \";\n                if (c !== 0) {\n                    if (c > 0) {\n                        nthDescriptor += '+';\n                    }\n                    nthDescriptor += \"\" + c;\n                }\n                return nthDescriptor;\n            }\n        }\n    };\n    /**\n     * Takes an array of Elements and returns an Array of AttributeSelectors\n     *\n     * @param elements Array of type Elements\n     *\n     * @returns Array of AttributeSelectors\n     * @example [\n     *              'body > table[id=\"a1\"] > tr[id=\"b2\"] > div[id=\"c1\"] > div[id=\"g1] > article[id=\"a2\"][class~=\"post\"] > h3[id=\"h2\"]',\n     *              'body > div[id=\"g3] > article[id=\"a9\"][class~=\"post\"] > h3[id=\"h9\"]'\n     *              'body > section[class~=\"post\"] > h3[id=\"h10\"]'\n     *          ]\n     */\n    HierarchyActions.prototype.getAsAttributeSelectors = function (elements, document, excludeElements) {\n        var attributeSelectors = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var el = elements_1[_i];\n            if (typeof el === 'string' || !(Object.keys(el).length === 0 && el.constructor === Object)) {\n                var selector = this.attributeSelector.getSelector(el);\n                var trimmedSelector = (document === undefined) ? selector : this.trimAttributes(document, selector, [el], excludeElements);\n                attributeSelectors.push(trimmedSelector);\n            }\n        }\n        return attributeSelectors;\n    };\n    /**\n     *\n     * @param hierarchyString String based on the css hierachy selector\n     *\n     * @example splitHierarchyString('body > table[id=\"a1\"] > tr[id=\"b1\"] > div[id=\"c1\"][class~=\"target\"]:not(\".sticky\") > div[id=\"g1] > article[id=\"a1\"][class~=\"post\"] > h3[id=\"h1\"]')\n     *\n     * @returns Object {\n     *                    hierarchyString, (input param String)\n     *                    tags,            (html tags from input string)\n     *                    mods,            (css selectors applied to each html tag)\n     *                    seperators       (hierarchy seperators as strings)\n     *          }\n     * @example {\n     *      hierachyString: 'body > table[id=\"a1\"] > tr[id=\"b1\"] > div[id=\"c1\"][class~=\"target\"]:not(\".sticky\") > div[id=\"g1] > article[id=\"a1\"][class~=\"post\"] > h3[id=\"h1\"]',\n     *      tags: ['body', 'table', 'tr', 'div', 'div', 'article', 'h3']\n     *      mods: ['', '[id=\"a1\"]', '[id=\"b1\"]', '', '[id=\"c1\"][class~=\"target\"]:not(\".sticky\")', '[id=\"g1]', '[id=\"a1\"][class~=\"post\"]', '[id=\"h1\"]'],\n     *      seperators: [' > ', ' > ', ' > ', ' > ', ' > ', ' > ']\n     * }\n     */\n    HierarchyActions.prototype.splitHierarchyString = function (hierarchyString) {\n        // get the seperator strings between each level\n        var seperators = []; // a seperater per level e.g. ' > '\n        var sections = hierarchyString.split(/[\\s][\\s]*/);\n        for (var s = 0; s < sections.length - 1; s++) { // populate seperators\n            seperators.push(' > ');\n        }\n        // Split the hierarchy into levels\n        var levels = hierarchyString.split(' > ').reverse();\n        // get the html tag and modifiers (attribute and alias selectors) at each level of the hierarchy\n        var tags = []; // a html tag per level\n        var mods = []; // a String with all modifier selector at each level\n        for (var depth = 0; depth < levels.length; depth++) {\n            tags[depth] = levels[depth].split(/[\\[\\:]/)[0];\n            mods[depth] = levels[depth].substr(tags[depth].length);\n        }\n        return {\n            hierarchyString: hierarchyString,\n            tags: tags,\n            mods: mods,\n            seperators: seperators //TODO: redundant?\n        };\n    };\n    /**\n     * Takes a collection of arrays and compares the items in each array\n     * return a collection of items that can be found in all the arrays provided\n     *\n     * @param arrays Array of Arrays\n     *\n     * @returns Array of items common to all arrays provided in the arrays param\n     * @example getCommonItems([[1,2,3,4,5,6,7,8,9,10,11,12], [2,4,6,8,10,12], [4,8,12]])\n     *\n     * [4, 12]\n     */\n    HierarchyActions.prototype.getCommonItems = function (arrays) {\n        if (arrays.length === 0) {\n            return [];\n        }\n        if (arrays.length === 1) {\n            return arrays[0];\n        }\n        var commonItems = [];\n        var count = {};\n        for (var _i = 0, arrays_1 = arrays; _i < arrays_1.length; _i++) {\n            var a = arrays_1[_i];\n            for (var i = 0; i < a.length; i++) {\n                count[a[i]] = (count[a[i]] === undefined) ? count[a[i]] = 1 : count[a[i]] + 1;\n            }\n        }\n        var counts = Object.values(count);\n        var items = Object.keys(count);\n        for (var c = 0; c < counts.length; c++) {\n            if (counts[c] === arrays.length) { //item was found in all arrays\n                commonItems.push(items[c]);\n            }\n        }\n        return commonItems;\n    };\n    /**\n     * Takes an array and a collection of arrays\n     * and finds the items that are unique to the single Array\n     * and items that are in the arrays but not in the single array\n     *\n     * @param singleArray Array of items\n     * @param arrays Array of Array of items\n     *\n     * @example getDiff([3,6,9,12], [[2,4,6,8,10,12], [4,8,12]])\n     *\n     * @returns Object {\n     *              unique, (Items unique to the array)\n     *              missing, (Items each array in arrays but not in the sinlge array)\n     *          }\n     * @example {\n     *      unique: [3,9],\n     *      missing: [4,8]\n     * }\n     */\n    HierarchyActions.prototype.getDiff = function (singleArray, arrays) {\n        var unique = [];\n        var missing = [];\n        var common = this.getCommonItems(arrays);\n        missing = common.filter(function (item) {\n            return singleArray.indexOf(item) === -1;\n        });\n        for (var _i = 0, singleArray_1 = singleArray; _i < singleArray_1.length; _i++) {\n            var item = singleArray_1[_i];\n            var exclusive = true;\n            for (var _a = 0, arrays_2 = arrays; _a < arrays_2.length; _a++) {\n                var arr = arrays_2[_a];\n                if (arr.indexOf(item) > -1) {\n                    exclusive = false;\n                }\n            }\n            if (exclusive) {\n                unique.push(item);\n            }\n        }\n        return { unique: unique, missing: missing };\n    };\n    HierarchyActions.prototype.selectorAtLevel = function (selector, level) {\n        var levels = selector.split(' > ');\n        var res = (levels.length - level > 0) ? levels.slice(0, levels.length - level).join(' > ') : undefined;\n        return res;\n    };\n    HierarchyActions.prototype.testSelectorAtLevelSelectors = function (document, selector, allSelectors, groups) {\n        var testGroup = document.querySelector(selector);\n        var matches = [];\n        try {\n            matches = Array.from(testGroup.querySelectorAll(allSelectors));\n        }\n        catch (e) {\n            // failing to use selector on element, no action required\n        }\n        for (var _i = 0, _a = groups[0]; _i < _a.length; _i++) {\n            var el = _a[_i];\n            if (!matches.includes(el)) {\n                // testGroup is one step too large\n                return false;\n            }\n        }\n        return true;\n    };\n    HierarchyActions.prototype.testSelectorAtLevelGrouping = function (document, selector, allSelectors, groups) {\n        var testGroup = document.querySelector(selector);\n        var matches = [];\n        try {\n            matches = Array.from(testGroup.querySelectorAll(allSelectors));\n        }\n        catch (e) {\n            // failing to use selector on element, no action required\n        }\n        for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n            var match = matches_1[_i];\n            if (!groups[0].includes(match)) {\n                // testGroup is one step too large\n                return true;\n            }\n        }\n        return false;\n    };\n    HierarchyActions.prototype.findGroupSelectors = function (document, selectors, groups) {\n        var allSelectors = selectors.join(',');\n        var groupSelectors = [];\n        for (var _i = 0, selectors_1 = selectors; _i < selectors_1.length; _i++) {\n            var selector = selectors_1[_i];\n            var trimmed = 'body';\n            var level = 0;\n            var done = false;\n            while (trimmed !== undefined && !done) {\n                trimmed = this.selectorAtLevel(selector, level);\n                var testA = this.testSelectorAtLevelSelectors(document, trimmed, allSelectors, groups);\n                var testB = this.testSelectorAtLevelGrouping(document, trimmed, allSelectors, groups);\n                if (testA && !testB) {\n                    done = true;\n                }\n                else {\n                    if (testB) {\n                        trimmed = this.selectorAtLevel(selector, level - 1);\n                        done = true;\n                    }\n                    else {\n                        level++;\n                    }\n                }\n            }\n            groupSelectors.push(trimmed);\n        }\n        //TODO: remove duplicates before returning\n        return groupSelectors;\n    };\n    return HierarchyActions;\n}());\nexports.HierarchyActions = HierarchyActions;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectorFacade = void 0;\nvar ClassSelector_1 = __importDefault(require(\"./ClassSelector\"));\nvar ElementSelector_1 = __importDefault(require(\"./ElementSelector\"));\nvar HierarchySelector_1 = __importDefault(require(\"./HierarchySelector\"));\nvar IdSelector_1 = __importDefault(require(\"./IdSelector\"));\nvar InnerTextSelector_1 = __importDefault(require(\"./InnerTextSelector\"));\nvar ParentElementSelector_1 = __importDefault(require(\"./ParentElementSelector\"));\n/**\n * When the simmer selector fails, uses the naive hierarchy selector as a fallback\n */\nvar SelectorFacade = /** @class */ (function () {\n    function SelectorFacade(multiple) {\n        if (multiple === void 0) { multiple = false; }\n        this.multiple = multiple;\n        this.classSelector = new ClassSelector_1.default();\n        this.hierarchySelector = new HierarchySelector_1.default();\n        this.elementSelector = new ElementSelector_1.default();\n        this.innerTextSelector = new InnerTextSelector_1.default();\n        this.parentElementSelector = new ParentElementSelector_1.default();\n        this.idSelector = new IdSelector_1.default();\n    }\n    SelectorFacade.prototype.getSelector = function (element) {\n        var selected = false;\n        var classSelector = this.classSelector.getSelector(element);\n        var hierarchySelector = this.hierarchySelector.getSelector(element);\n        var elementSelector = this.elementSelector.getSelector(element);\n        var innerTextSelector = this.innerTextSelector.getSelector(element);\n        var parentElementSelector = this.parentElementSelector.getSelector(element);\n        var idSelector = this.idSelector.getSelector(element);\n        selected = this.generateAxiomSelector(hierarchySelector, elementSelector, parentElementSelector, innerTextSelector, classSelector, idSelector);\n        return selected;\n    };\n    SelectorFacade.prototype.generateAxiomSelector = function (hierarchy, targetElement, targetParent, innerText, classSel, idSel) {\n        var axSel = {\n            hierarchy: hierarchy,\n            targetElement: targetElement,\n            targetParent: targetParent,\n            innerText: innerText,\n            class: classSel,\n            id: idSel\n        };\n        return axSel;\n    };\n    return SelectorFacade;\n}());\nexports.SelectorFacade = SelectorFacade;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ClassSelector = /** @class */ (function () {\n    function ClassSelector() {\n    }\n    ClassSelector.prototype.getSelector = function (el) {\n        if (!el) {\n            return;\n        }\n        var classes = el.getAttribute('class') || '';\n        classes = classes.replace(/axiom-matched|axiom-suggested-group|axiom-link|axiom-download|axiom-sel-\\S+|selectorgadget_\\w+/g, '').trim();\n        if (classes !== '') {\n            classes = '.' + classes.replace(/\\s+/g, '.');\n        }\n        return classes;\n    };\n    return ClassSelector;\n}());\nexports.default = ClassSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Fetches the element in a string format\n */\nvar ElementSelector = /** @class */ (function () {\n    function ElementSelector() {\n    }\n    ElementSelector.prototype.getSelector = function (el) {\n        el.classList.remove('selectorgadget_selected');\n        return el.outerHTML.replace(/\\\"/g, \"\\'\");\n    };\n    return ElementSelector;\n}());\nexports.default = ElementSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// tslint:disable-next-line:no-var-requires\nrequire('css.escape');\n/**\n * Generates a selector for the hierarchy of the target element from DOM\n */\nvar HierarchySelector = /** @class */ (function () {\n    function HierarchySelector() {\n    }\n    HierarchySelector.prototype.getSelector = function (el) {\n        var stack = [];\n        // Bottom-up selector generator algorithm\n        while (el.parentNode != null) {\n            // Total count of siblings for a group\n            var sibCount = 0;\n            // Index of the sibling we are targetting\n            var sibIndex = 0;\n            // tslint:disable-next-line:prefer-for-of\n            for (var i = 0; i < el.parentNode.childNodes.length; i++) {\n                var sib = el.parentNode.childNodes[i];\n                /**\n                 * Avoid adding axiom injected toolbar components from messing the heirarchy of the selector\n                 * TODO: More specific; we'll define a particular AXIOM hash and check for that (in env)\n                 */\n                if (sib.nodeType === Node.ELEMENT_NODE) {\n                    if (sib.id && (typeof sib.id === 'string' && sib.id.includes('axiom'))) {\n                        continue;\n                    }\n                    if (sib.nodeName === el.nodeName) {\n                        if (sib === el) {\n                            sibIndex = sibCount;\n                        }\n                        sibCount++;\n                    }\n                }\n            }\n            if (sibCount > 1) {\n                if (sibIndex > 1 && (sibIndex + 1 === el.parentNode.childNodes.length || $(el).is(':nth-last-of-type(1)'))) {\n                    // If last child of a group, use the following snippet instead of `nth-of-type(sibIndex+1)`\n                    stack.unshift(el.nodeName.toLowerCase() + ':nth-last-of-type(1)');\n                }\n                else {\n                    stack.unshift(el.nodeName.toLowerCase() + ':nth-of-type(' + (sibIndex + 1) + ')');\n                }\n            }\n            else {\n                stack.unshift(el.nodeName.toLowerCase());\n            }\n            el = el.parentNode;\n        }\n        // removes the html element\n        stack.shift();\n        // Test the selector and trim it if it's working fine\n        var selector = stack.join(' > ');\n        var firstEl = null;\n        while (document.querySelectorAll(selector).length === 1 && stack.length >= 2) {\n            firstEl = stack.shift();\n            selector = stack.join(' > ');\n        }\n        // This is needed because the iframe code is not feature complete\n        if (firstEl) {\n            stack.unshift(firstEl);\n        }\n        if (stack.length > 0) {\n            // joins each tags of the selector by space (children element)\n            return stack.join(' > ');\n        }\n        else {\n            // failed to fetch the selector\n            return false;\n        }\n    };\n    HierarchySelector.prototype.getSelectorForSizzle = function (el) {\n        var stack = [];\n        // Bottom-up selector generator algorithm\n        while (el.parentNode != null) {\n            // Total count of siblings for a group\n            var sibCount = 0;\n            // Index of the sibling we are targetting\n            var sibIndex = 0;\n            // tslint:disable-next-line:prefer-for-of\n            for (var i = 0; i < el.parentNode.childNodes.length; i++) {\n                var sib = el.parentNode.childNodes[i];\n                /**\n                 * Avoid adding axiom injected toolbar components from messing the heirarchy of the selector\n                 * TODO: More specific; we'll define a particular AXIOM hash and check for that (in env)\n                 */\n                if (sib.nodeType === Node.ELEMENT_NODE) {\n                    if (sib.id && (typeof sib.id === 'string' && sib.id.includes('axiom'))) {\n                        continue;\n                    }\n                    if (sib === el) {\n                        sibIndex = sibCount;\n                    }\n                    sibCount++;\n                }\n            }\n            if (sibCount > 1) {\n                var path = el.nodeName.toLowerCase();\n                // Add the classname to node element when it is requested\n                if (el.className) {\n                    var refs = el.className.split(\" \");\n                    for (var i = 0, len = refs.length; i < len; i++) {\n                        var cssName = refs[i];\n                        var escaped = this.escapeCssNames(cssName);\n                        escaped = CSS.escape(escaped);\n                        if (cssName && escaped.length > 0) {\n                            path += '.' + escaped;\n                        }\n                    }\n                }\n                if (sibIndex > 1) {\n                    path += ':nth-child(' + (sibIndex + 1) + ')';\n                }\n                stack.unshift(path);\n            }\n            else {\n                stack.unshift(el.nodeName.toLowerCase());\n            }\n            el = el.parentNode;\n        }\n        // removes the html element\n        stack = stack.slice(1);\n        if (stack.length > 0) {\n            // joins each tags of the selector by space (children element)\n            return stack.join(' > ');\n        }\n        else {\n            // failed to fetch the selector\n            return false;\n        }\n    };\n    HierarchySelector.prototype.escapeCssNames = function (name) {\n        if (name) {\n            try {\n                return name.replace(/\\bselectorgadget_\\w+\\b/g, '').replace(/\\\\/g, '\\\\\\\\').replace(/[\\#\\;\\&\\,\\.\\+\\*\\~\\'\\:\\\"\\!\\^\\$\\[\\]\\(\\)\\=\\>\\|\\/]/g, function (e) {\n                    return '\\\\' + e;\n                }).replace(/\\s+/, '');\n            }\n            catch (e) {\n                if (window.console) {\n                    console.log('---');\n                    console.log(\"exception in escapeCssNames\");\n                    console.log(name);\n                    console.log('---');\n                }\n                return '';\n            }\n        }\n        else {\n            return '';\n        }\n    };\n    return HierarchySelector;\n}());\nexports.default = HierarchySelector;\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: there’s no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, […]\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), […]\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), […]\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, […]\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), […]\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Fetches the parent of the element in a string format\n */\nvar IdSelector = /** @class */ (function () {\n    function IdSelector() {\n    }\n    IdSelector.prototype.getSelector = function (el) {\n        return \"#\" + el.id;\n    };\n    return IdSelector;\n}());\nexports.default = IdSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Fetches the inner text of an element in a string\n */\nvar InnerTextSelector = /** @class */ (function () {\n    function InnerTextSelector() {\n    }\n    InnerTextSelector.prototype.getSelector = function (el) {\n        var content = el.textContent.trim();\n        if (content && content.length < 1000) {\n            return content;\n        }\n        return '';\n    };\n    return InnerTextSelector;\n}());\nexports.default = InnerTextSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Fetches the parent of the element in a string format\n */\nvar ParentElementSelector = /** @class */ (function () {\n    function ParentElementSelector() {\n    }\n    ParentElementSelector.prototype.getSelector = function (el) {\n        el.classList.remove('selectorgadget_selected');\n        return el.parentElement.outerHTML.replace(/\\\"/g, \"\\'\");\n    };\n    return ParentElementSelector;\n}());\nexports.default = ParentElementSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BorderHighlight = void 0;\nvar ScrapeHelper_1 = require(\"./ScrapeHelper\");\nvar BorderHighlight = /** @class */ (function () {\n    function BorderHighlight(doc, iframeElement, iframeSupportEnabled) {\n        var _this = this;\n        if (iframeElement === void 0) { iframeElement = false; }\n        if (iframeSupportEnabled === void 0) { iframeSupportEnabled = false; }\n        this.borderWidth = 5;\n        this.borderPadding = 2;\n        this.activeSelectorIndex = 0;\n        this.resultType = 'textContent';\n        this.scrapeHelper = new ScrapeHelper_1.ScrapeHelper();\n        this.doc = doc;\n        this.iframeElement = iframeElement;\n        this.iframeSupportEnabled = iframeSupportEnabled;\n        doc.onscroll = function (e) {\n            jQuery(_this.borderElement).hide();\n        };\n    }\n    BorderHighlight.prototype.updateactiveSelectorIndex = function (id) {\n        this.activeSelectorIndex = id;\n    };\n    BorderHighlight.prototype.updateResultType = function (resultType) {\n        this.resultType = (resultType === 'axiom-download' ? \"outerHTML\" : resultType);\n    };\n    BorderHighlight.prototype.updateWindex = function (windex) {\n        this.windex = windex;\n    };\n    BorderHighlight.prototype.inject = function () {\n        this.setupBorder();\n        jQuery(this.doc).on('mouseover.axiom-selection', this.mouseoverHandler.bind(this));\n        jQuery(this.doc).on('mouseout.axiom-selection:not(.axiom-shield-overlay)', this.mouseLeaveHandler.bind(this));\n    };\n    BorderHighlight.prototype.eject = function () {\n        this.removeBorderFromDom();\n        jQuery(this.doc).off('mouseover.axiom-selection');\n        jQuery(this.doc).off('mouseout.axiom-selection');\n    };\n    BorderHighlight.prototype.setupBorder = function () {\n        if (!this.borderElement) {\n            var width_1 = this.borderWidth + 'px';\n            var bottomHeight = this.borderWidth * 2 + 'px';\n            this.shieldOverlay = jQuery(\"<div class=\\\"axiom-shield-overlay axiom-tool axiom-selector-ignore\\\"></div>\");\n            this.borderElement = jQuery(\"<div class=\\\"axiom-tool-highlight-border\\\"></div>\").hide();\n            this.bTop = jQuery('<div>').addClass('axiom-border-highlight').addClass('axiom-border-top').css('height', width_1);\n            this.bLeft = jQuery('<div>').addClass('axiom-border-highlight').addClass('axiom-border-left').css('width', width_1);\n            this.bBottom = jQuery('<div>').addClass('axiom-border-highlight').addClass('axiom-border-bottom').css('min-height', width_1).css('text-overflow', 'clip').css('font-family', 'Quicksand,sans-serif');\n            $(this.bBottom).each(function (index, el) {\n                el.style.setProperty('padding-left', width_1, 'important');\n            });\n            this.preview = jQuery(\"\\n            <div id=\\\"axiom-preview-wrapper\\\"\\n            style=\\\"\\n            position:relative!important;\\n            left:0!important;\\n            display: flex!important;\\n            justify-content: center!important;\\n            padding: 0!important;\\n            justify-content: start!important;\\n            font-size:12px!important;\\n            line-height:0px!important;\\n            background-color;red!important;\\n            background;red!important;\\n            min-height:10px!important;\\n            height:auto!important;\\n            max-width:400px!important;\\n            width: auto!important;\\n            white-space:nowrap!important;\\n            overflow:visible!important;\\n            overflow-x: clip!important;\\n            margin: 0!important;\\n            float:none!important;\\n            font-weight:bold!important;\\n            box-sizing: initial!important;\\n            top: 5px!important;\\n            scrollbar-width: none!important;\\n            \\\"\\n            >\\n              <p\\n              ></p>\\n            </div>\"); //TODO: hide this\n            this.bBottom.append(this.preview);\n            this.bRight = jQuery('<div>').addClass('axiom-border-highlight').addClass('axiom-border-right').css('width', width_1);\n            this.addBorderToDom();\n        }\n    };\n    BorderHighlight.prototype.removeBorderFromDom = function () {\n        if (this.borderElement) {\n            this.borderElement.remove();\n            this.bTop.remove();\n            this.bRight.remove();\n            this.bBottom.remove();\n            this.bRight.remove();\n        }\n        this.borderElement = this.bTop = this.bRight = this.bBottom = this.bLeft = null;\n    };\n    BorderHighlight.prototype.addBorderToDom = function () {\n        this.borderElement.append(this.shieldOverlay);\n        this.borderElement.append(this.bTop);\n        this.borderElement.append(this.bRight);\n        this.borderElement.append(this.bBottom);\n        this.borderElement.append(this.bLeft);\n        try {\n            this.doc.body.appendChild(this.borderElement.get(0));\n        }\n        catch (e) {\n            // No worries if it doesn't work\n        }\n    };\n    BorderHighlight.prototype.showBorder = function () {\n        this.borderElement.show();\n    };\n    BorderHighlight.prototype.removeBorder = function () {\n        if (this.borderElement) {\n            this.borderElement.hide();\n        }\n    };\n    BorderHighlight.prototype.makeBorders = function (targetElem) {\n        var _this = this;\n        if (targetElem.tagName === 'IFRAME') {\n            return;\n        }\n        var element = jQuery(targetElem);\n        var position = element.offset();\n        var top = position.top - scrollY;\n        var left = position.left;\n        var width = element.outerWidth();\n        var height = element.outerHeight();\n        this.preview.show();\n        this.bTop.css('width', (width + this.borderPadding * 2 + this.borderWidth * 2) + 'px')\n            .css('top', (top - this.borderWidth - this.borderPadding) + 'px')\n            .css('left', (left - this.borderPadding - this.borderWidth) + 'px');\n        this.bRight.css('height', (height + this.borderPadding * 2) + 'px')\n            .css('top', (top - this.borderPadding) + 'px')\n            .css('left', (left + width + this.borderPadding) + 'px');\n        this.bBottom.css('width', (width + this.borderPadding * 2 + this.borderWidth * 2 - 5) + 'px')\n            .css('top', (top + height + this.borderPadding) + 'px')\n            .css('left', (left - this.borderPadding - this.borderWidth) + 'px')\n            .css('color', '#F5F5F5')\n            .css('height', this.borderWidth * 4 + 'px');\n        this.bLeft.css('height', (height + this.borderPadding * 2) + 'px')\n            .css('top', (top - this.borderPadding) + 'px')\n            .css('left', (left - this.borderPadding - this.borderWidth) + 'px');\n        this.shieldOverlay.css('top', top + 'px') // used to prevent selection of invlaid elements (iframes)\n            .css('left', left + 'px');\n        if (targetElem.tagName.toLowerCase() === 'iframe') { // we expand the shield over the dissalowed elements\n            this.shieldOverlay.css('width', width + 'px')\n                .css('height', height + 'px');\n            this.shieldOverlay.off(\"click\");\n            this.shieldOverlay.click(function (e) {\n                _this.shieldOverlay.off(\"click\");\n                if (_this.windex !== undefined) {\n                    var navigate = confirm(\"You have selected content within an iframe that can't currently be selected. Would you like to try to goto the url?\\n(Current selections will be lost if you click 'OK')\");\n                    if (navigate) {\n                        var currentURL = window.location.href;\n                        var frameSrc = targetElem.src;\n                        // add goto widget with frame src\n                        chrome.runtime.sendMessage({\n                            action: \"change_url\",\n                            origin: currentURL,\n                            target: frameSrc,\n                            windex: _this.windex\n                        });\n                    }\n                }\n                else {\n                    alert(\"Magic button cannot be placed here, as this is a window getting content from a different website. Please select another area of the page\");\n                }\n            });\n        }\n        else {\n            this.shieldOverlay.css('width', 0 + 'px')\n                .css('height', 0 + 'px');\n            this.shieldOverlay.off(\"click\");\n        }\n        // Make a way to target clicks on these border elements to direct to the element beneath\n        // TODO\n        // modify the colors if we are removing a selection\n        var removingSelection = $(targetElem).is(\".axiom-sel-suggested-\" + this.activeSelectorIndex + \", .axiom-sel-selected-\" + this.activeSelectorIndex);\n        if (removingSelection) {\n            $(\".axiom-border-highlight\").each(function (index, el) {\n                el.style.setProperty(\"background-color\", \"rgb(245, 58, 58)\", \"important\");\n            });\n        }\n        else {\n            $(\".axiom-border-highlight\").each(function (index, el) {\n                el.style.setProperty(\"background-color\", \"#FFAB00\", \"important\");\n            });\n        }\n        if (this.iframeElement && !this.iframeSupportEnabled) {\n            this.preview.children('p').text('Enable iframe support');\n        }\n        else {\n            var preview = this.scrapeHelper.getData(targetElem, this.resultType);\n            if (this.resultType === 'textContent') {\n                var text = targetElem['innerText'];\n                if (text) {\n                    preview = text;\n                }\n                else {\n                    preview = '';\n                }\n            }\n            preview = (preview) ? preview : '';\n            preview = (preview.length > 25) ? preview.substr(0, 25) + '...' : preview;\n            this.preview.children('p').text(preview);\n        }\n        this.showBorder();\n    };\n    /**\n     * This is just debarring the chrome extension items, we can make this more cool\n     *\n     * @param element\n     */\n    BorderHighlight.prototype.selectable = function (element) {\n        if (element.tagName.toLowerCase() === \"body\" || jQuery(element).hasClass('axiom-selector-ignore')) {\n            return false;\n        }\n        return true;\n    };\n    BorderHighlight.prototype.mouseoverHandler = function (e) {\n        var target = e.target;\n        if (this.resultType === 'link') {\n            while (target.parentElement && !/\\S/.test(this.scrapeHelper.getData(target, this.resultType))) {\n                target = target.parentElement;\n            }\n        }\n        if (this.selectable(target) && e.target !== this.shieldOverlay.get(0)) {\n            this.makeBorders(target);\n        }\n    };\n    BorderHighlight.prototype.mouseLeaveHandler = function (e) {\n        if (e.target === this.doc.body || e.target === this.doc.body.parentNode || e.relatedTarget === this.shieldOverlay.get(0)) {\n            return false;\n        }\n        this.removeBorder();\n        return false;\n    };\n    BorderHighlight.prototype.setIframeSupportEnabled = function (val) {\n        this.iframeSupportEnabled = val;\n    };\n    return BorderHighlight;\n}());\nexports.BorderHighlight = BorderHighlight;\n","/**\n * Define some regex patterns for matching boundaries.\n *\n * Ported by [xiaochao.k@gmail.com](https://github.com/nonoroazoro)\n */\nexport var NON_ALPHA_NUMERIC_REGEX = /[^a-zA-Z0-9]/;\nexport var WHITESPACE_REGEX = /\\s/;\nexport var LINEBREAK_REGEX = /[\\r\\n]/;\nexport var BLANKLINE_END_REGEX = /\\n\\r?\\n$/;\nexport var BLANKLINE_START_REGEX = /^\\r?\\n\\r?\\n/;\n","/**\n * Represents the operations of a `Diff`.\n *\n * The data structure representing a `Diff` is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n *\n * Ported by [xiaochao.k@gmail.com](https://github.com/nonoroazoro)\n */\nexport var DiffOperation;\n(function (DiffOperation) {\n    DiffOperation[DiffOperation[\"DIFF_DELETE\"] = -1] = \"DIFF_DELETE\";\n    DiffOperation[DiffOperation[\"DIFF_INSERT\"] = 1] = \"DIFF_INSERT\";\n    DiffOperation[DiffOperation[\"DIFF_EQUAL\"] = 0] = \"DIFF_EQUAL\";\n})(DiffOperation || (DiffOperation = {}));\n","/**\n * Returns the smaller number.\n */\nexport function min(a, b) {\n    return a < b ? a : b;\n}\n/**\n * Returns the larger number.\n */\nexport function max(a, b) {\n    return a > b ? a : b;\n}\n","import * as m from \"./math\";\nexport var math = m;\n","import { DiffOperation } from \"../types\";\n/**\n * Class representing one patch operation.\n *\n * Ported by [xiaochao.k@gmail.com](https://github.com/nonoroazoro)\n */\nvar PatchObject = /** @class */ (function () {\n    function PatchObject() {\n        this.diffs = [];\n        this.start1 = 0;\n        this.start2 = 0;\n        this.length1 = 0;\n        this.length2 = 0;\n    }\n    /**\n     * Emulate GNU diff format.\n     * Header: @@ -382,8 +481,9 @@\n     * Indices are printed as 1-based, not 0-based.\n     *\n     * @returns {string} The GNU diff string.\n     */\n    PatchObject.prototype.toString = function () {\n        var coords1;\n        var coords2;\n        if (this.length1 === 0) {\n            coords1 = this.start1 + \",0\";\n        }\n        else if (this.length1 === 1) {\n            coords1 = this.start1 + 1;\n        }\n        else {\n            coords1 = (this.start1 + 1) + \",\" + this.length1;\n        }\n        if (this.length2 === 0) {\n            coords2 = this.start2 + \",0\";\n        }\n        else if (this.length2 === 1) {\n            coords2 = this.start2 + 1;\n        }\n        else {\n            coords2 = (this.start2 + 1) + \",\" + this.length2;\n        }\n        var text = [\"@@ -\" + coords1 + \" +\" + coords2 + \" @@\\n\"];\n        var op;\n        // Escape the body of the patch with %xx notation.\n        for (var x = 0; x < this.diffs.length; x++) {\n            switch (this.diffs[x][0]) {\n                case DiffOperation.DIFF_INSERT:\n                    op = \"+\";\n                    break;\n                case DiffOperation.DIFF_DELETE:\n                    op = \"-\";\n                    break;\n                case DiffOperation.DIFF_EQUAL:\n                    op = \" \";\n                    break;\n            }\n            text[x + 1] = op + encodeURI(this.diffs[x][1]) + \"\\n\";\n        }\n        return text.join(\"\").replace(/%20/g, \" \");\n    };\n    return PatchObject;\n}());\nexport { PatchObject };\n","import { BLANKLINE_END_REGEX, BLANKLINE_START_REGEX, LINEBREAK_REGEX, NON_ALPHA_NUMERIC_REGEX, WHITESPACE_REGEX } from \"../constants\";\nimport { DiffOperation } from \"../types\";\nimport { math } from \"../utils\";\nimport { PatchObject } from \"./PatchObject\";\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n *\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n *\n * Ported by [xiaochao.k@gmail.com](https://github.com/nonoroazoro)\n */\n/**\n * Class containing the diff, match and patch methods.\n */\nvar DiffMatchPatch = /** @class */ (function () {\n    function DiffMatchPatch() {\n        // Defaults.\n        // Redefine these in your program to override the defaults.\n        /**\n         * Number of seconds to map a diff before giving up (0 for infinity).\n         */\n        this.diffTimeout = 1.0;\n        /**\n         * Cost of an empty edit operation in terms of edit characters.\n         */\n        this.diffEditCost = 4;\n        /**\n         * At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n         */\n        this.matchThreshold = 0.5;\n        /**\n         * How far to search for a match (0 = exact location, 1000+ = broad match).\n         * A match this many characters away from the expected location will add\n         * 1.0 to the score (0.0 is a perfect match).\n         */\n        this.matchDistance = 1000;\n        /**\n         * When deleting a large block of text (over ~64 characters), how close do\n         * the contents have to be to match the expected contents. (0.0 = perfection,\n         * 1.0 = very loose). Note that Match_Threshold controls how closely the\n         * end points of a delete need to match.\n         */\n        this.patchDeleteThreshold = 0.5;\n        /**\n         * Chunk size for context length.\n         */\n        this.patchMargin = 4;\n        /**\n         * The number of bits in an int.\n         */\n        this.matchMaxBits = 32;\n        //#endregion PATCH FUNCTIONS (private)\n    }\n    //#region DIFF FUNCTIONS (public)\n    /**\n     * Find the differences between two texts. Simplifies the problem by stripping\n     * any common prefix or suffix off the texts before diffing.\n     *\n     * @param {string} text1 Old string to be diffed.\n     * @param {string} text2 New string to be diffed.\n     * @param {boolean} [optChecklines] Optional speedup flag. If present and false,\n     * then don't run a line-level diff first to identify the changed areas.\n     * Defaults to true, which does a faster, slightly less optimal diff.\n     * @param {number} [optDeadline] Optional time when the diff should be complete\n     * by. Used internally for recursive calls. Users should set DiffTimeout\n     * instead.\n     * @returns {Diff[]} Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_main = function (text1, text2, optChecklines, optDeadline) {\n        // Set a deadline by which time the diff must be complete.\n        if (typeof optDeadline === \"undefined\") {\n            if (this.diffTimeout <= 0) {\n                optDeadline = Number.MAX_VALUE;\n            }\n            else {\n                optDeadline = Date.now() + this.diffTimeout * 1000;\n            }\n        }\n        var deadline = optDeadline;\n        // Check for null inputs.\n        if (text1 == null || text2 == null) {\n            throw new Error(\"Null input. (diff_main)\");\n        }\n        // Check for equality (speedup).\n        if (text1 === text2) {\n            if (text1) {\n                return [[DiffOperation.DIFF_EQUAL, text1]];\n            }\n            return [];\n        }\n        if (typeof optChecklines === \"undefined\") {\n            optChecklines = true;\n        }\n        var checklines = optChecklines;\n        // Trim off common prefix (speedup).\n        var commonlength = this.diff_commonPrefix(text1, text2);\n        var commonprefix = text1.substring(0, commonlength);\n        text1 = text1.substring(commonlength);\n        text2 = text2.substring(commonlength);\n        // Trim off common suffix (speedup).\n        commonlength = this.diff_commonSuffix(text1, text2);\n        var commonsuffix = text1.substring(text1.length - commonlength);\n        text1 = text1.substring(0, text1.length - commonlength);\n        text2 = text2.substring(0, text2.length - commonlength);\n        // Compute the diff on the middle block.\n        var diffs = this.diff_compute_(text1, text2, checklines, deadline);\n        // Restore the prefix and suffix.\n        if (commonprefix) {\n            diffs.unshift([DiffOperation.DIFF_EQUAL, commonprefix]);\n        }\n        if (commonsuffix) {\n            diffs.push([DiffOperation.DIFF_EQUAL, commonsuffix]);\n        }\n        this.diff_cleanupMerge(diffs);\n        return diffs;\n    };\n    /**\n     * Determine the common prefix of two strings.\n     *\n     * @param {string} text1 First string.\n     * @param {string} text2 Second string.\n     * @returns {number} The number of characters common to the start of each string.\n     */\n    DiffMatchPatch.prototype.diff_commonPrefix = function (text1, text2) {\n        // Quick check for common null cases.\n        if (!text1 ||\n            !text2 ||\n            text1.charAt(0) !== text2.charAt(0)) {\n            return 0;\n        }\n        // Binary search.\n        // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n        var pointermin = 0;\n        var pointermax = math.min(text1.length, text2.length);\n        var pointermid = pointermax;\n        var pointerstart = 0;\n        while (pointermin < pointermid) {\n            if (text1.substring(pointerstart, pointermid) ===\n                text2.substring(pointerstart, pointermid)) {\n                pointermin = pointermid;\n                pointerstart = pointermin;\n            }\n            else {\n                pointermax = pointermid;\n            }\n            pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n        }\n        return pointermid;\n    };\n    /**\n     * Determine the common suffix of two strings.\n     *\n     * @param {string} text1 First string.\n     * @param {string} text2 Second string.\n     * @returns {number} The number of characters common to the end of each string.\n     */\n    DiffMatchPatch.prototype.diff_commonSuffix = function (text1, text2) {\n        // Quick check for common null cases.\n        if (!text1 ||\n            !text2 ||\n            text1.charAt(text1.length - 1) !== text2.charAt(text2.length - 1)) {\n            return 0;\n        }\n        // Binary search.\n        // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n        var pointermin = 0;\n        var pointermax = math.min(text1.length, text2.length);\n        var pointermid = pointermax;\n        var pointerend = 0;\n        while (pointermin < pointermid) {\n            if (text1.substring(text1.length - pointermid, text1.length - pointerend) ===\n                text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n                pointermin = pointermid;\n                pointerend = pointermin;\n            }\n            else {\n                pointermax = pointermid;\n            }\n            pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n        }\n        return pointermid;\n    };\n    /**\n     * Reduce the number of edits by eliminating semantically trivial equalities.\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_cleanupSemantic = function (diffs) {\n        var changes = false;\n        var equalities = []; // Stack of indices where equalities are found.\n        var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n        var lastEquality = null;\n        // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n        var pointer = 0; // Index of current position.\n        // Number of characters that changed prior to the equality.\n        var lengthInsertions1 = 0;\n        var lengthDeletions1 = 0;\n        // Number of characters that changed after the equality.\n        var lengthInsertions2 = 0;\n        var lengthDeletions2 = 0;\n        while (pointer < diffs.length) {\n            if (diffs[pointer][0] === DiffOperation.DIFF_EQUAL) {\n                // Equality found.\n                equalities[equalitiesLength++] = pointer;\n                lengthInsertions1 = lengthInsertions2;\n                lengthDeletions1 = lengthDeletions2;\n                lengthInsertions2 = 0;\n                lengthDeletions2 = 0;\n                lastEquality = diffs[pointer][1];\n            }\n            else {\n                // An insertion or deletion.\n                if (diffs[pointer][0] === DiffOperation.DIFF_INSERT) {\n                    lengthInsertions2 += diffs[pointer][1].length;\n                }\n                else {\n                    lengthDeletions2 += diffs[pointer][1].length;\n                }\n                // Eliminate an equality that is smaller or equal to the edits on both\n                // sides of it.\n                if (lastEquality &&\n                    (lastEquality.length <= math.max(lengthInsertions1, lengthDeletions1)) &&\n                    (lastEquality.length <= math.max(lengthInsertions2, lengthDeletions2))) {\n                    // Duplicate record.\n                    diffs.splice(equalities[equalitiesLength - 1], 0, [DiffOperation.DIFF_DELETE, lastEquality]);\n                    // Change second copy to insert.\n                    diffs[equalities[equalitiesLength - 1] + 1][0] = DiffOperation.DIFF_INSERT;\n                    // Throw away the equality we just deleted.\n                    equalitiesLength--;\n                    // Throw away the previous equality (it needs to be reevaluated).\n                    equalitiesLength--;\n                    pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n                    lengthInsertions1 = 0; // Reset the counters.\n                    lengthDeletions1 = 0;\n                    lengthInsertions2 = 0;\n                    lengthDeletions2 = 0;\n                    lastEquality = null;\n                    changes = true;\n                }\n            }\n            pointer++;\n        }\n        // Normalize the diff.\n        if (changes) {\n            this.diff_cleanupMerge(diffs);\n        }\n        this.diff_cleanupSemanticLossless(diffs);\n        // Find any overlaps between deletions and insertions.\n        // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n        //   -> <del>abc</del>xxx<ins>def</ins>\n        // e.g: <del>xxxabc</del><ins>defxxx</ins>\n        //   -> <ins>def</ins>xxx<del>abc</del>\n        // Only extract an overlap if it is as big as the edit ahead or behind it.\n        pointer = 1;\n        while (pointer < diffs.length) {\n            if (diffs[pointer - 1][0] === DiffOperation.DIFF_DELETE &&\n                diffs[pointer][0] === DiffOperation.DIFF_INSERT) {\n                var deletion = diffs[pointer - 1][1];\n                var insertion = diffs[pointer][1];\n                var overlapLength1 = this.diff_commonOverlap_(deletion, insertion);\n                var overlapLength2 = this.diff_commonOverlap_(insertion, deletion);\n                if (overlapLength1 >= overlapLength2) {\n                    if (overlapLength1 >= deletion.length / 2 ||\n                        overlapLength1 >= insertion.length / 2) {\n                        // Overlap found. Insert an equality and trim the surrounding edits.\n                        diffs.splice(pointer, 0, [DiffOperation.DIFF_EQUAL, insertion.substring(0, overlapLength1)]);\n                        diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlapLength1);\n                        diffs[pointer + 1][1] = insertion.substring(overlapLength1);\n                        pointer++;\n                    }\n                }\n                else {\n                    if (overlapLength2 >= deletion.length / 2 ||\n                        overlapLength2 >= insertion.length / 2) {\n                        // Reverse overlap found.\n                        // Insert an equality and swap and trim the surrounding edits.\n                        diffs.splice(pointer, 0, [DiffOperation.DIFF_EQUAL, deletion.substring(0, overlapLength2)]);\n                        diffs[pointer - 1][0] = DiffOperation.DIFF_INSERT;\n                        diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlapLength2);\n                        diffs[pointer + 1][0] = DiffOperation.DIFF_DELETE;\n                        diffs[pointer + 1][1] = deletion.substring(overlapLength2);\n                        pointer++;\n                    }\n                }\n                pointer++;\n            }\n            pointer++;\n        }\n    };\n    /**\n     * Look for single edits surrounded on both sides by equalities\n     * which can be shifted sideways to align the edit to a word boundary.\n     * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n        var pointer = 1;\n        // Intentionally ignore the first and last element (don't need checking).\n        while (pointer < diffs.length - 1) {\n            if (diffs[pointer - 1][0] === DiffOperation.DIFF_EQUAL &&\n                diffs[pointer + 1][0] === DiffOperation.DIFF_EQUAL) {\n                // This is a single edit surrounded by equalities.\n                var equality1 = diffs[pointer - 1][1];\n                var edit = diffs[pointer][1];\n                var equality2 = diffs[pointer + 1][1];\n                // First, shift the edit as far left as possible.\n                var commonOffset = this.diff_commonSuffix(equality1, edit);\n                if (commonOffset) {\n                    var commonString = edit.substring(edit.length - commonOffset);\n                    equality1 = equality1.substring(0, equality1.length - commonOffset);\n                    edit = commonString + edit.substring(0, edit.length - commonOffset);\n                    equality2 = commonString + equality2;\n                }\n                // Second, step character by character right, looking for the best fit.\n                var bestEquality1 = equality1;\n                var bestEdit = edit;\n                var bestEquality2 = equality2;\n                var bestScore = this.diff_cleanupSemanticScore_(equality1, edit)\n                    + this.diff_cleanupSemanticScore_(edit, equality2);\n                while (edit.charAt(0) === equality2.charAt(0)) {\n                    equality1 += edit.charAt(0);\n                    edit = edit.substring(1) + equality2.charAt(0);\n                    equality2 = equality2.substring(1);\n                    var score = this.diff_cleanupSemanticScore_(equality1, edit)\n                        + this.diff_cleanupSemanticScore_(edit, equality2);\n                    // The >= encourages trailing rather than leading whitespace on edits.\n                    if (score >= bestScore) {\n                        bestScore = score;\n                        bestEquality1 = equality1;\n                        bestEdit = edit;\n                        bestEquality2 = equality2;\n                    }\n                }\n                if (diffs[pointer - 1][1] !== bestEquality1) {\n                    // We have an improvement, save it back to the diff.\n                    if (bestEquality1) {\n                        diffs[pointer - 1][1] = bestEquality1;\n                    }\n                    else {\n                        diffs.splice(pointer - 1, 1);\n                        pointer--;\n                    }\n                    diffs[pointer][1] = bestEdit;\n                    if (bestEquality2) {\n                        diffs[pointer + 1][1] = bestEquality2;\n                    }\n                    else {\n                        diffs.splice(pointer + 1, 1);\n                        pointer--;\n                    }\n                }\n            }\n            pointer++;\n        }\n    };\n    /**\n     * Reduce the number of edits by eliminating operationally trivial equalities.\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_cleanupEfficiency = function (diffs) {\n        var changes = false;\n        var equalities = []; // Stack of indices where equalities are found.\n        var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n        var lastEquality = null;\n        // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n        var pointer = 0; // Index of current position.\n        // Is there an insertion operation before the last equality.\n        var preIns = false;\n        // Is there a deletion operation before the last equality.\n        var preDel = false;\n        // Is there an insertion operation after the last equality.\n        var postIns = false;\n        // Is there a deletion operation after the last equality.\n        var postDel = false;\n        while (pointer < diffs.length) {\n            if (diffs[pointer][0] === DiffOperation.DIFF_EQUAL) {\n                // Equality found.\n                if (diffs[pointer][1].length < this.diffEditCost &&\n                    (postIns || postDel)) {\n                    // Candidate found.\n                    equalities[equalitiesLength++] = pointer;\n                    preIns = postIns;\n                    preDel = postDel;\n                    lastEquality = diffs[pointer][1];\n                }\n                else {\n                    // Not a candidate, and can never become one.\n                    equalitiesLength = 0;\n                    lastEquality = null;\n                }\n                postIns = postDel = false;\n            }\n            else {\n                // An insertion or deletion.\n                if (diffs[pointer][0] === DiffOperation.DIFF_DELETE) {\n                    postDel = true;\n                }\n                else {\n                    postIns = true;\n                }\n                /*\n                 * Five types to be split:\n                 * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n                 * <ins>A</ins>X<ins>C</ins><del>D</del>\n                 * <ins>A</ins><del>B</del>X<ins>C</ins>\n                 * <ins>A</del>X<ins>C</ins><del>D</del>\n                 * <ins>A</ins><del>B</del>X<del>C</del>\n                 */\n                if (lastEquality &&\n                    ((preIns && preDel && postIns && postDel) ||\n                        ((lastEquality.length < this.diffEditCost / 2) &&\n                            (Number(preIns) + Number(preDel) + Number(postIns) + Number(postDel)) === 3))) {\n                    // Duplicate record.\n                    diffs.splice(equalities[equalitiesLength - 1], 0, [DiffOperation.DIFF_DELETE, lastEquality]);\n                    // Change second copy to insert.\n                    diffs[equalities[equalitiesLength - 1] + 1][0] = DiffOperation.DIFF_INSERT;\n                    equalitiesLength--; // Throw away the equality we just deleted;\n                    lastEquality = null;\n                    if (preIns && preDel) {\n                        // No changes made which could affect previous entry, keep going.\n                        postIns = postDel = true;\n                        equalitiesLength = 0;\n                    }\n                    else {\n                        equalitiesLength--; // Throw away the previous equality.\n                        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n                        postIns = postDel = false;\n                    }\n                    changes = true;\n                }\n            }\n            pointer++;\n        }\n        if (changes) {\n            this.diff_cleanupMerge(diffs);\n        }\n    };\n    /**\n     * Reorder and merge like edit sections. Merge equalities.\n     * Any edit section can move as long as it doesn't cross an equality.\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_cleanupMerge = function (diffs) {\n        // Add a dummy entry at the end.\n        diffs.push([DiffOperation.DIFF_EQUAL, \"\"]);\n        var pointer = 0;\n        var countDelete = 0;\n        var countInsert = 0;\n        var textDelete = \"\";\n        var textInsert = \"\";\n        var commonlength;\n        while (pointer < diffs.length) {\n            switch (diffs[pointer][0]) {\n                case DiffOperation.DIFF_INSERT:\n                    countInsert++;\n                    textInsert += diffs[pointer][1];\n                    pointer++;\n                    break;\n                case DiffOperation.DIFF_DELETE:\n                    countDelete++;\n                    textDelete += diffs[pointer][1];\n                    pointer++;\n                    break;\n                case DiffOperation.DIFF_EQUAL:\n                    // Upon reaching an equality, check for prior redundancies.\n                    if (countDelete + countInsert > 1) {\n                        if (countDelete !== 0 && countInsert !== 0) {\n                            // Factor out any common prefixes.\n                            commonlength = this.diff_commonPrefix(textInsert, textDelete);\n                            if (commonlength !== 0) {\n                                if ((pointer - countDelete - countInsert) > 0 &&\n                                    (diffs[pointer - countDelete - countInsert - 1][0]\n                                        === DiffOperation.DIFF_EQUAL)) {\n                                    diffs[pointer - countDelete - countInsert - 1][1]\n                                        += textInsert.substring(0, commonlength);\n                                }\n                                else {\n                                    diffs.splice(0, 0, [DiffOperation.DIFF_EQUAL, textInsert.substring(0, commonlength)]);\n                                    pointer++;\n                                }\n                                textInsert = textInsert.substring(commonlength);\n                                textDelete = textDelete.substring(commonlength);\n                            }\n                            // Factor out any common suffixes.\n                            commonlength = this.diff_commonSuffix(textInsert, textDelete);\n                            if (commonlength !== 0) {\n                                diffs[pointer][1] = textInsert.substring(textInsert.length\n                                    - commonlength) + diffs[pointer][1];\n                                textInsert = textInsert.substring(0, textInsert.length - commonlength);\n                                textDelete = textDelete.substring(0, textDelete.length - commonlength);\n                            }\n                        }\n                        // Delete the offending records and add the merged ones.\n                        pointer -= countDelete + countInsert;\n                        diffs.splice(pointer, countDelete + countInsert);\n                        if (textDelete.length) {\n                            diffs.splice(pointer, 0, [DiffOperation.DIFF_DELETE, textDelete]);\n                            pointer++;\n                        }\n                        if (textInsert.length) {\n                            diffs.splice(pointer, 0, [DiffOperation.DIFF_INSERT, textInsert]);\n                            pointer++;\n                        }\n                        pointer++;\n                    }\n                    else if (pointer !== 0 && diffs[pointer - 1][0] === DiffOperation.DIFF_EQUAL) {\n                        // Merge this equality with the previous one.\n                        diffs[pointer - 1][1] += diffs[pointer][1];\n                        diffs.splice(pointer, 1);\n                    }\n                    else {\n                        pointer++;\n                    }\n                    countInsert = 0;\n                    countDelete = 0;\n                    textDelete = \"\";\n                    textInsert = \"\";\n                    break;\n            }\n        }\n        if (diffs[diffs.length - 1][1] === \"\") {\n            diffs.pop(); // Remove the dummy entry at the end.\n        }\n        // Second pass: look for single edits surrounded on both sides by equalities\n        // which can be shifted sideways to eliminate an equality.\n        // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n        var changes = false;\n        pointer = 1;\n        // Intentionally ignore the first and last element (don't need checking).\n        while (pointer < diffs.length - 1) {\n            if (diffs[pointer - 1][0] === DiffOperation.DIFF_EQUAL &&\n                diffs[pointer + 1][0] === DiffOperation.DIFF_EQUAL) {\n                // This is a single edit surrounded by equalities.\n                if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length)\n                    === diffs[pointer - 1][1]) {\n                    // Shift the edit over the previous equality.\n                    diffs[pointer][1] = diffs[pointer - 1][1]\n                        + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n                    diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n                    diffs.splice(pointer - 1, 1);\n                    changes = true;\n                }\n                else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length)\n                    === diffs[pointer + 1][1]) {\n                    // Shift the edit over the next equality.\n                    diffs[pointer - 1][1] += diffs[pointer + 1][1];\n                    diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length)\n                        + diffs[pointer + 1][1];\n                    diffs.splice(pointer + 1, 1);\n                    changes = true;\n                }\n            }\n            pointer++;\n        }\n        // If shifts were made, the diff needs reordering and another shift sweep.\n        if (changes) {\n            this.diff_cleanupMerge(diffs);\n        }\n    };\n    /**\n     * loc is a location in text1, compute and return the equivalent location in\n     * text2.\n     * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     * @param {number} loc Location within text1.\n     * @returns {number} Location within text2.\n     */\n    DiffMatchPatch.prototype.diff_xIndex = function (diffs, loc) {\n        var chars1 = 0;\n        var chars2 = 0;\n        var lastChars1 = 0;\n        var lastChars2 = 0;\n        var x;\n        for (x = 0; x < diffs.length; x++) {\n            if (diffs[x][0] !== DiffOperation.DIFF_INSERT) {\n                // Equality or deletion.\n                chars1 += diffs[x][1].length;\n            }\n            if (diffs[x][0] !== DiffOperation.DIFF_DELETE) {\n                // Equality or insertion.\n                chars2 += diffs[x][1].length;\n            }\n            if (chars1 > loc) {\n                // Overshot the location.\n                break;\n            }\n            lastChars1 = chars1;\n            lastChars2 = chars2;\n        }\n        // Was the location was deleted?\n        if (diffs.length !== x &&\n            diffs[x][0] === DiffOperation.DIFF_DELETE) {\n            return lastChars2;\n        }\n        // Add the remaining character length.\n        return lastChars2 + (loc - lastChars1);\n    };\n    /**\n     * Convert a diff array into a pretty HTML report.\n     *\n     * @param {Diff[]>} diffs Array of diff tuples.\n     * @returns {string} HTML representation.\n     */\n    DiffMatchPatch.prototype.diff_prettyHtml = function (diffs) {\n        var html = [];\n        var patternAMP = /&/g;\n        var patternLT = /</g;\n        var patternGT = />/g;\n        var patternPARA = /\\n/g;\n        for (var x = 0; x < diffs.length; x++) {\n            var op = diffs[x][0]; // Operation (insert, delete, equal)\n            var data = diffs[x][1]; // Text of change.\n            var text = data.replace(patternAMP, \"&amp;\")\n                .replace(patternLT, \"&lt;\")\n                .replace(patternGT, \"&gt;\")\n                .replace(patternPARA, \"&para;<br>\");\n            switch (op) {\n                case DiffOperation.DIFF_INSERT:\n                    html[x] = '<ins style=\"background:#e6ffe6;\">' + text + \"</ins>\";\n                    break;\n                case DiffOperation.DIFF_DELETE:\n                    html[x] = '<del style=\"background:#ffe6e6;\">' + text + \"</del>\";\n                    break;\n                case DiffOperation.DIFF_EQUAL:\n                    html[x] = \"<span>\" + text + \"</span>\";\n                    break;\n            }\n        }\n        return html.join(\"\");\n    };\n    /**\n     * Compute and return the source text (all equalities and deletions).\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     * @returns {string} Source text.\n     */\n    DiffMatchPatch.prototype.diff_text1 = function (diffs) {\n        var text = [];\n        for (var x = 0; x < diffs.length; x++) {\n            if (diffs[x][0] !== DiffOperation.DIFF_INSERT) {\n                text[x] = diffs[x][1];\n            }\n        }\n        return text.join(\"\");\n    };\n    /**\n     * Compute and return the destination text (all equalities and insertions).\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     * @returns {string} Destination text.\n     */\n    DiffMatchPatch.prototype.diff_text2 = function (diffs) {\n        var text = [];\n        for (var x = 0; x < diffs.length; x++) {\n            if (diffs[x][0] !== DiffOperation.DIFF_DELETE) {\n                text[x] = diffs[x][1];\n            }\n        }\n        return text.join(\"\");\n    };\n    /**\n     * Compute the Levenshtein distance; the number of inserted, deleted or\n     * substituted characters.\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     * @returns {number} Number of changes.\n     */\n    DiffMatchPatch.prototype.diff_levenshtein = function (diffs) {\n        var levenshtein = 0;\n        var insertions = 0;\n        var deletions = 0;\n        for (var x = 0; x < diffs.length; x++) {\n            var op = diffs[x][0];\n            var data = diffs[x][1];\n            switch (op) {\n                case DiffOperation.DIFF_INSERT:\n                    insertions += data.length;\n                    break;\n                case DiffOperation.DIFF_DELETE:\n                    deletions += data.length;\n                    break;\n                case DiffOperation.DIFF_EQUAL:\n                    // A deletion and an insertion is one substitution.\n                    levenshtein += math.max(insertions, deletions);\n                    insertions = 0;\n                    deletions = 0;\n                    break;\n            }\n        }\n        levenshtein += math.max(insertions, deletions);\n        return levenshtein;\n    };\n    /**\n     * Crush the diff into an encoded string which describes the operations\n     * required to transform text1 into text2.\n     * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n     * Operations are tab-separated. Inserted text is escaped using %xx notation.\n     *\n     * @param {Diff[]} diffs Array of diff tuples.\n     * @returns {string} Delta text.\n     */\n    DiffMatchPatch.prototype.diff_toDelta = function (diffs) {\n        var text = [];\n        for (var x = 0; x < diffs.length; x++) {\n            switch (diffs[x][0]) {\n                case DiffOperation.DIFF_INSERT:\n                    text[x] = \"+\" + encodeURI(diffs[x][1]);\n                    break;\n                case DiffOperation.DIFF_DELETE:\n                    text[x] = \"-\" + diffs[x][1].length;\n                    break;\n                case DiffOperation.DIFF_EQUAL:\n                    text[x] = \"=\" + diffs[x][1].length;\n                    break;\n            }\n        }\n        return text.join(\"\\t\").replace(/%20/g, \" \");\n    };\n    /**\n     * Given the original text1, and an encoded string which describes the\n     * operations required to transform text1 into text2, compute the full diff.\n     *\n     * @param {string} text1 Source string for the diff.\n     * @param {string} delta Delta text.\n     * @returns {Diff[]} Array of diff tuples.\n     * @throws {Error} If invalid input.\n     */\n    DiffMatchPatch.prototype.diff_fromDelta = function (text1, delta) {\n        var diffs = [];\n        var diffsLength = 0; // Keeping our own length var is faster in JS.\n        var pointer = 0; // Cursor in text1\n        var tokens = delta.split(/\\t/g);\n        for (var x = 0; x < tokens.length; x++) {\n            // Each token begins with a one character parameter which specifies the\n            // operation of this token (delete, insert, equality).\n            var param = tokens[x].substring(1);\n            switch (tokens[x].charAt(0)) {\n                case \"+\":\n                    try {\n                        diffs[diffsLength++] = [DiffOperation.DIFF_INSERT, decodeURI(param)];\n                    }\n                    catch (ex) {\n                        // Malformed URI sequence.\n                        throw new Error(\"Illegal escape in diff_fromDelta: \" + param);\n                    }\n                    break;\n                case \"-\":\n                // Fall through.\n                case \"=\":\n                    var n = parseInt(param, 10);\n                    if (isNaN(n) || n < 0) {\n                        throw new Error(\"Invalid number in diff_fromDelta: \" + param);\n                    }\n                    var text = text1.substring(pointer, pointer += n);\n                    if (tokens[x].charAt(0) === \"=\") {\n                        diffs[diffsLength++] = [DiffOperation.DIFF_EQUAL, text];\n                    }\n                    else {\n                        diffs[diffsLength++] = [DiffOperation.DIFF_DELETE, text];\n                    }\n                    break;\n                default:\n                    // Blank tokens are ok (from a trailing \\t).\n                    // Anything else is an error.\n                    if (tokens[x]) {\n                        throw new Error(\"Invalid diff operation in diff_fromDelta: \" + tokens[x]);\n                    }\n            }\n        }\n        if (pointer !== text1.length) {\n            throw new Error(\"Delta length (\" + pointer + \") does not equal source text length (\"\n                + text1.length + \")\");\n        }\n        return diffs;\n    };\n    //#endregion DIFF FUNCTIONS (public)\n    //#region MATCH FUNCTIONS (public)\n    /**\n     * Locate the best instance of 'pattern' in 'text' near 'loc'.\n     *\n     * @param {string} text The text to search.\n     * @param {string} pattern The pattern to search for.\n     * @param {number} loc The location to search around.\n     * @returns {number} Best match index or -1.\n     */\n    DiffMatchPatch.prototype.match_main = function (text, pattern, loc) {\n        // Check for null inputs.\n        if (text == null || pattern == null || loc == null) {\n            throw new Error(\"Null input. (match_main)\");\n        }\n        loc = math.max(0, math.min(loc, text.length));\n        if (text === pattern) {\n            // Shortcut (potentially not guaranteed by the algorithm)\n            return 0;\n        }\n        else if (!text.length) {\n            // Nothing to match.\n            return -1;\n        }\n        else if (text.substring(loc, loc + pattern.length) === pattern) {\n            // Perfect match at the perfect spot!  (Includes case of null pattern)\n            return loc;\n        }\n        else {\n            // Do a fuzzy compare.\n            return this.match_bitap_(text, pattern, loc);\n        }\n    };\n    //#endregion MATCH FUNCTIONS (public)\n    //#region PATCH FUNCTIONS (public)\n    /**\n     * Compute a list of patches to turn text1 into text2.\n     * Use diffs if provided, otherwise compute it ourselves.\n     * There are four ways to call this function, depending on what data is\n     * available to the caller:\n     * Method 1:\n     * a = text1, b = text2\n     * Method 2:\n     * a = diffs\n     * Method 3 (optimal):\n     * a = text1, b = diffs\n     * Method 4 (deprecated, use method 3):\n     * a = text1, b = text2, c = diffs\n     *\n     * @param {(string|Diff[])} a text1 (methods 1,3,4) or\n     * Array of diff tuples for text1 to text2 (method 2).\n     * @param {(string|Diff[])} [optB] text2 (methods 1,4) or\n     * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n     * @param {(string|Diff[])} [optC] Array of diff tuples\n     * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n     * @returns {PatchObject[]} Array of Patch objects.\n     */\n    DiffMatchPatch.prototype.patch_make = function (a, optB, optC) {\n        var text1;\n        var diffs;\n        if (typeof a === \"string\" &&\n            typeof optB === \"string\" &&\n            typeof optC === \"undefined\") {\n            // Method 1: text1, text2\n            // Compute diffs from text1 and text2.\n            text1 = a;\n            diffs = this.diff_main(text1, optB, true);\n            if (diffs.length > 2) {\n                this.diff_cleanupSemantic(diffs);\n                this.diff_cleanupEfficiency(diffs);\n            }\n        }\n        else if (a &&\n            typeof a === \"object\" &&\n            typeof optB === \"undefined\" &&\n            typeof optC === \"undefined\") {\n            // Method 2: diffs\n            // Compute text1 from diffs.\n            diffs = a;\n            text1 = this.diff_text1(diffs);\n        }\n        else if (typeof a === \"string\" &&\n            optB &&\n            typeof optB === \"object\" &&\n            typeof optC === \"undefined\") {\n            // Method 3: text1, diffs\n            text1 = a;\n            diffs = optB;\n        }\n        else if (typeof a === \"string\" &&\n            typeof optB === \"string\" &&\n            optC &&\n            typeof optC === \"object\") {\n            // Method 4: text1, text2, diffs\n            // text2 is not used.\n            text1 = a;\n            diffs = optC;\n        }\n        else {\n            throw new Error(\"Unknown call format to patch_make\");\n        }\n        if (diffs.length === 0) {\n            return []; // Get rid of the null case.\n        }\n        var patches = [];\n        var patch = new PatchObject();\n        var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n        var charCount1 = 0; // Number of characters into the text1 string.\n        var charCount2 = 0; // Number of characters into the text2 string.\n        // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n        // text2 (postpatch_text). We recreate the patches one by one to determine\n        // context info.\n        var prepatchText = text1;\n        var postpatchText = text1;\n        for (var x = 0; x < diffs.length; x++) {\n            var diffType = diffs[x][0];\n            var diffText = diffs[x][1];\n            if (!patchDiffLength && diffType !== DiffOperation.DIFF_EQUAL) {\n                // A new patch starts here.\n                patch.start1 = charCount1;\n                patch.start2 = charCount2;\n            }\n            switch (diffType) {\n                case DiffOperation.DIFF_INSERT:\n                    patch.diffs[patchDiffLength++] = diffs[x];\n                    patch.length2 += diffText.length;\n                    postpatchText = postpatchText.substring(0, charCount2)\n                        + diffText + postpatchText.substring(charCount2);\n                    break;\n                case DiffOperation.DIFF_DELETE:\n                    patch.length1 += diffText.length;\n                    patch.diffs[patchDiffLength++] = diffs[x];\n                    postpatchText = postpatchText.substring(0, charCount2)\n                        + postpatchText.substring(charCount2 + diffText.length);\n                    break;\n                case DiffOperation.DIFF_EQUAL:\n                    if (diffText.length <= 2 * this.patchMargin &&\n                        patchDiffLength &&\n                        diffs.length !== x + 1) {\n                        // Small equality inside a patch.\n                        patch.diffs[patchDiffLength++] = diffs[x];\n                        patch.length1 += diffText.length;\n                        patch.length2 += diffText.length;\n                    }\n                    else if (diffText.length >= 2 * this.patchMargin) {\n                        // Time for a new patch.\n                        if (patchDiffLength) {\n                            this.patch_addContext_(patch, prepatchText);\n                            patches.push(patch);\n                            patch = new PatchObject();\n                            patchDiffLength = 0;\n                            // Unlike Unidiff, our patch lists have a rolling context.\n                            // https://github.com/google/diff-match-patch/wiki/Unidiff\n                            // Update prepatch text & pos to reflect the application of the\n                            // just completed patch.\n                            prepatchText = postpatchText;\n                            charCount1 = charCount2;\n                        }\n                    }\n                    break;\n            }\n            // Update the current character count.\n            if (diffType !== DiffOperation.DIFF_INSERT) {\n                charCount1 += diffText.length;\n            }\n            if (diffType !== DiffOperation.DIFF_DELETE) {\n                charCount2 += diffText.length;\n            }\n        }\n        // Pick up the leftover patch if not empty.\n        if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatchText);\n            patches.push(patch);\n        }\n        return patches;\n    };\n    /**\n     * Given an array of patches, return another array that is identical.\n     *\n     * @param {PatchObject[]>} patches Array of Patch objects.\n     * @returns {PatchObject[]} Array of Patch objects.\n     */\n    DiffMatchPatch.prototype.patch_deepCopy = function (patches) {\n        // Making deep copies is hard in JavaScript.\n        var patchesCopy = [];\n        for (var x = 0; x < patches.length; x++) {\n            var patch = patches[x];\n            var patchCopy = new PatchObject();\n            for (var y = 0; y < patch.diffs.length; y++) {\n                patchCopy.diffs[y] = [patch.diffs[y][0], patch.diffs[y][1]];\n            }\n            patchCopy.start1 = patch.start1;\n            patchCopy.start2 = patch.start2;\n            patchCopy.length1 = patch.length1;\n            patchCopy.length2 = patch.length2;\n            patchesCopy[x] = patchCopy;\n        }\n        return patchesCopy;\n    };\n    /**\n     * Merge a set of patches onto the text. Return a patched text, as well\n     * as a list of true/false values indicating which patches were applied.\n     *\n     * @param {PatchObject[]} patches Array of Patch objects.\n     * @param {string} text Old text.\n     * @returns {PatchApplyArray} Two element Array, containing the\n     * new text and an array of boolean values.\n     */\n    DiffMatchPatch.prototype.patch_apply = function (patches, text) {\n        if (patches.length === 0) {\n            return [text, []];\n        }\n        // Deep copy the patches so that no changes are made to originals.\n        patches = this.patch_deepCopy(patches);\n        var nullPadding = this.patch_addPadding(patches);\n        text = nullPadding + text + nullPadding;\n        this.patch_splitMax(patches);\n        // delta keeps track of the offset between the expected and actual location\n        // of the previous patch. If there are patches expected at positions 10 and\n        // 20, but the first patch was found at 12, delta is 2 and the second patch\n        // has an effective expected position of 22.\n        var delta = 0;\n        var results = [];\n        for (var x = 0; x < patches.length; x++) {\n            var expectedLoc = patches[x].start2 + delta;\n            var text1 = this.diff_text1(patches[x].diffs);\n            var startLoc = void 0;\n            var endLoc = -1;\n            if (text1.length > this.matchMaxBits) {\n                // patch_splitMax will only provide an oversized pattern in the case of\n                // a monster delete.\n                startLoc = this.match_main(text, text1.substring(0, this.matchMaxBits), expectedLoc);\n                if (startLoc !== -1) {\n                    endLoc = this.match_main(text, text1.substring(text1.length - this.matchMaxBits), expectedLoc + text1.length - this.matchMaxBits);\n                    if (endLoc === -1 || startLoc >= endLoc) {\n                        // Can't find valid trailing context. Drop this patch.\n                        startLoc = -1;\n                    }\n                }\n            }\n            else {\n                startLoc = this.match_main(text, text1, expectedLoc);\n            }\n            if (startLoc === -1) {\n                // No match found. :(\n                results[x] = false;\n                // Subtract the delta for this failed patch from subsequent patches.\n                delta -= patches[x].length2 - patches[x].length1;\n            }\n            else {\n                // Found a match. :)\n                results[x] = true;\n                delta = startLoc - expectedLoc;\n                var text2 = void 0;\n                if (endLoc === -1) {\n                    text2 = text.substring(startLoc, startLoc + text1.length);\n                }\n                else {\n                    text2 = text.substring(startLoc, endLoc + this.matchMaxBits);\n                }\n                if (text1 === text2) {\n                    // Perfect match, just shove the replacement text in.\n                    text = text.substring(0, startLoc)\n                        + this.diff_text2(patches[x].diffs)\n                        + text.substring(startLoc + text1.length);\n                }\n                else {\n                    // Imperfect match. Run a diff to get a framework of equivalent\n                    // indices.\n                    var diffs = this.diff_main(text1, text2, false);\n                    if (text1.length > this.matchMaxBits &&\n                        this.diff_levenshtein(diffs) / text1.length > this.patchDeleteThreshold) {\n                        // The end points match, but the content is unacceptably bad.\n                        results[x] = false;\n                    }\n                    else {\n                        this.diff_cleanupSemanticLossless(diffs);\n                        var index1 = 0;\n                        var index2 = 0;\n                        for (var y = 0; y < patches[x].diffs.length; y++) {\n                            var mod = patches[x].diffs[y];\n                            if (mod[0] !== DiffOperation.DIFF_EQUAL) {\n                                index2 = this.diff_xIndex(diffs, index1);\n                            }\n                            if (mod[0] === DiffOperation.DIFF_INSERT) {\n                                // Insertion\n                                text = text.substring(0, startLoc + index2) + mod[1]\n                                    + text.substring(startLoc + index2);\n                            }\n                            else if (mod[0] === DiffOperation.DIFF_DELETE) {\n                                // Deletion\n                                text = text.substring(0, startLoc + index2)\n                                    + text.substring(startLoc\n                                        + this.diff_xIndex(diffs, index1 + mod[1].length));\n                            }\n                            if (mod[0] !== DiffOperation.DIFF_DELETE) {\n                                index1 += mod[1].length;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        // Strip the padding off.\n        text = text.substring(nullPadding.length, text.length - nullPadding.length);\n        return [text, results];\n    };\n    /**\n     * Add some padding on text start and end so that edges can match something.\n     * Intended to be called only from within patch_apply.\n     *\n     * @param {PatchObject[]} patches Array of Patch objects.\n     * @returns {string} The padding string added to each side.\n     */\n    DiffMatchPatch.prototype.patch_addPadding = function (patches) {\n        var paddingLength = this.patchMargin;\n        var nullPadding = \"\";\n        for (var x = 1; x <= paddingLength; x++) {\n            nullPadding += String.fromCharCode(x);\n        }\n        // Bump all the patches forward.\n        for (var x = 0; x < patches.length; x++) {\n            patches[x].start1 += paddingLength;\n            patches[x].start2 += paddingLength;\n        }\n        // Add some padding on start of first diff.\n        var patch = patches[0];\n        var diffs = patch.diffs;\n        if (diffs.length === 0 || diffs[0][0] !== DiffOperation.DIFF_EQUAL) {\n            // Add nullPadding equality.\n            diffs.unshift([DiffOperation.DIFF_EQUAL, nullPadding]);\n            patch.start1 -= paddingLength; // Should be 0.\n            patch.start2 -= paddingLength; // Should be 0.\n            patch.length1 += paddingLength;\n            patch.length2 += paddingLength;\n        }\n        else if (paddingLength > diffs[0][1].length) {\n            // Grow first equality.\n            var extraLength = paddingLength - diffs[0][1].length;\n            diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n            patch.start1 -= extraLength;\n            patch.start2 -= extraLength;\n            patch.length1 += extraLength;\n            patch.length2 += extraLength;\n        }\n        // Add some padding on end of last diff.\n        patch = patches[patches.length - 1];\n        diffs = patch.diffs;\n        if (diffs.length === 0 || diffs[diffs.length - 1][0] !== DiffOperation.DIFF_EQUAL) {\n            // Add nullPadding equality.\n            diffs.push([DiffOperation.DIFF_EQUAL, nullPadding]);\n            patch.length1 += paddingLength;\n            patch.length2 += paddingLength;\n        }\n        else if (paddingLength > diffs[diffs.length - 1][1].length) {\n            // Grow last equality.\n            var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n            diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n            patch.length1 += extraLength;\n            patch.length2 += extraLength;\n        }\n        return nullPadding;\n    };\n    /**\n     * Look through the patches and break up any which are longer than the maximum\n     * limit of the match algorithm.\n     * Intended to be called only from within patch_apply.\n     *\n     * @param {PatchObject[]} patches Array of Patch objects.\n     */\n    DiffMatchPatch.prototype.patch_splitMax = function (patches) {\n        var patchSize = this.matchMaxBits;\n        for (var x = 0; x < patches.length; x++) {\n            if (patches[x].length1 <= patchSize) {\n                continue;\n            }\n            var bigpatch = patches[x];\n            // Remove the big old patch.\n            patches.splice(x--, 1);\n            var start1 = bigpatch.start1;\n            var start2 = bigpatch.start2;\n            var precontext = \"\";\n            while (bigpatch.diffs.length !== 0) {\n                // Create one of several smaller patches.\n                var patch = new PatchObject();\n                var empty = true;\n                patch.start1 = start1 - precontext.length;\n                patch.start2 = start2 - precontext.length;\n                if (precontext !== \"\") {\n                    patch.length1 = patch.length2 = precontext.length;\n                    patch.diffs.push([DiffOperation.DIFF_EQUAL, precontext]);\n                }\n                while (bigpatch.diffs.length !== 0 &&\n                    patch.length1 < patchSize - this.patchMargin) {\n                    var diffType = bigpatch.diffs[0][0];\n                    var diffText = bigpatch.diffs[0][1];\n                    if (diffType === DiffOperation.DIFF_INSERT) {\n                        // Insertions are harmless.\n                        patch.length2 += diffText.length;\n                        start2 += diffText.length;\n                        patch.diffs.push(bigpatch.diffs.shift());\n                        empty = false;\n                    }\n                    else if (diffType === DiffOperation.DIFF_DELETE &&\n                        patch.diffs.length === 1 &&\n                        patch.diffs[0][0] === DiffOperation.DIFF_EQUAL &&\n                        diffText.length > 2 * patchSize) {\n                        // This is a large deletion. Let it pass in one chunk.\n                        patch.length1 += diffText.length;\n                        start1 += diffText.length;\n                        empty = false;\n                        patch.diffs.push([diffType, diffText]);\n                        bigpatch.diffs.shift();\n                    }\n                    else {\n                        // Deletion or equality. Only take as much as we can stomach.\n                        diffText = diffText.substring(0, patchSize - patch.length1 - this.patchMargin);\n                        patch.length1 += diffText.length;\n                        start1 += diffText.length;\n                        if (diffType === DiffOperation.DIFF_EQUAL) {\n                            patch.length2 += diffText.length;\n                            start2 += diffText.length;\n                        }\n                        else {\n                            empty = false;\n                        }\n                        patch.diffs.push([diffType, diffText]);\n                        if (diffText === bigpatch.diffs[0][1]) {\n                            bigpatch.diffs.shift();\n                        }\n                        else {\n                            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diffText.length);\n                        }\n                    }\n                }\n                // Compute the head context for the next patch.\n                precontext = this.diff_text2(patch.diffs);\n                precontext = precontext.substring(precontext.length - this.patchMargin);\n                // Append the end context for this patch.\n                var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.patchMargin);\n                if (postcontext !== \"\") {\n                    patch.length1 += postcontext.length;\n                    patch.length2 += postcontext.length;\n                    if (patch.diffs.length !== 0 &&\n                        patch.diffs[patch.diffs.length - 1][0] === DiffOperation.DIFF_EQUAL) {\n                        patch.diffs[patch.diffs.length - 1][1] += postcontext;\n                    }\n                    else {\n                        patch.diffs.push([DiffOperation.DIFF_EQUAL, postcontext]);\n                    }\n                }\n                if (!empty) {\n                    patches.splice(++x, 0, patch);\n                }\n            }\n        }\n    };\n    /**\n     * Take a list of patches and return a textual representation.\n     *\n     * @param {PatchObject[]} patches Array of Patch objects.\n     * @returns {string} Text representation of patches.\n     */\n    DiffMatchPatch.prototype.patch_toText = function (patches) {\n        var text = [];\n        for (var x = 0; x < patches.length; x++) {\n            text[x] = patches[x];\n        }\n        return text.join(\"\");\n    };\n    /**\n     * Parse a textual representation of patches and return a list of Patch objects.\n     *\n     * @param {string} textline Text representation of patches.\n     * @returns {PatchObject[]} Array of Patch objects.\n     * @throws {Error} If invalid input.\n     */\n    DiffMatchPatch.prototype.patch_fromText = function (textline) {\n        var patches = [];\n        if (!textline) {\n            return patches;\n        }\n        var text = textline.split(\"\\n\");\n        var textPointer = 0;\n        var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n        while (textPointer < text.length) {\n            var m = text[textPointer].match(patchHeader);\n            if (!m) {\n                throw new Error(\"Invalid patch string: \" + text[textPointer]);\n            }\n            var patch = new PatchObject();\n            patches.push(patch);\n            patch.start1 = parseInt(m[1], 10);\n            if (m[2] === \"\") {\n                patch.start1--;\n                patch.length1 = 1;\n            }\n            else if (m[2] === \"0\") {\n                patch.length1 = 0;\n            }\n            else {\n                patch.start1--;\n                patch.length1 = parseInt(m[2], 10);\n            }\n            patch.start2 = parseInt(m[3], 10);\n            if (m[4] === \"\") {\n                patch.start2--;\n                patch.length2 = 1;\n            }\n            else if (m[4] === \"0\") {\n                patch.length2 = 0;\n            }\n            else {\n                patch.start2--;\n                patch.length2 = parseInt(m[4], 10);\n            }\n            textPointer++;\n            var sign = void 0;\n            var line = void 0;\n            var rawLine = void 0;\n            while (textPointer < text.length) {\n                sign = text[textPointer].charAt(0);\n                rawLine = text[textPointer].substring(1);\n                try {\n                    line = decodeURI(rawLine);\n                }\n                catch (ex) {\n                    // Malformed URI sequence.\n                    throw new Error(\"Illegal escape in patch_fromText: \" + rawLine);\n                }\n                if (sign === \"-\") {\n                    // Deletion.\n                    patch.diffs.push([DiffOperation.DIFF_DELETE, line]);\n                }\n                else if (sign === \"+\") {\n                    // Insertion.\n                    patch.diffs.push([DiffOperation.DIFF_INSERT, line]);\n                }\n                else if (sign === \" \") {\n                    // Minor equality.\n                    patch.diffs.push([DiffOperation.DIFF_EQUAL, line]);\n                }\n                else if (sign === \"@\") {\n                    // Start of next patch.\n                    break;\n                }\n                else if (sign === \"\") {\n                    // Blank line?  Whatever.\n                }\n                else {\n                    // WTF?\n                    throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n                }\n                textPointer++;\n            }\n        }\n        return patches;\n    };\n    //#endregion PATCH FUNCTIONS (public)\n    //#region DIFF FUNCTIONS (private)\n    /**\n     * Find the differences between two texts. Assumes that the texts do not\n     * have any common prefix or suffix.\n     *\n     * @private\n     * @param {string} text1 Old string to be diffed.\n     * @param {string} text2 New string to be diffed.\n     * @param {boolean} checklines Speedup flag. If false, then don't run a\n     * line-level diff first to identify the changed areas.\n     * If true, then run a faster, slightly less optimal diff.\n     * @param {number} deadline Time when the diff should be complete by.\n     * @returns {Diff[]} Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n        var diffs;\n        if (!text1) {\n            // Just add some text (speedup).\n            return [[DiffOperation.DIFF_INSERT, text2]];\n        }\n        if (!text2) {\n            // Just delete some text (speedup).\n            return [[DiffOperation.DIFF_DELETE, text1]];\n        }\n        var longtext = text1.length > text2.length ? text1 : text2;\n        var shorttext = text1.length > text2.length ? text2 : text1;\n        var i = longtext.indexOf(shorttext);\n        if (i !== -1) {\n            // Shorter text is inside the longer text (speedup).\n            diffs = [\n                [DiffOperation.DIFF_INSERT, longtext.substring(0, i)],\n                [DiffOperation.DIFF_EQUAL, shorttext],\n                [DiffOperation.DIFF_INSERT, longtext.substring(i + shorttext.length)]\n            ];\n            // Swap insertions for deletions if diff is reversed.\n            if (text1.length > text2.length) {\n                diffs[0][0] = DiffOperation.DIFF_DELETE;\n                diffs[2][0] = DiffOperation.DIFF_DELETE;\n            }\n            return diffs;\n        }\n        if (shorttext.length === 1) {\n            // Single character string.\n            // After the previous speedup, the character can't be an equality.\n            return [\n                [DiffOperation.DIFF_DELETE, text1],\n                [DiffOperation.DIFF_INSERT, text2]\n            ];\n        }\n        // Check to see if the problem can be split in two.\n        var hm = this.diff_halfMatch_(text1, text2);\n        if (hm) {\n            // A half-match was found, sort out the return data.\n            var text1A = hm[0];\n            var text1B = hm[1];\n            var text2A = hm[2];\n            var text2B = hm[3];\n            var midCommon = hm[4];\n            // Send both pairs off for separate processing.\n            var diffsA = this.diff_main(text1A, text2A, checklines, deadline);\n            var diffsB = this.diff_main(text1B, text2B, checklines, deadline);\n            // Merge the results.\n            return diffsA.concat([[DiffOperation.DIFF_EQUAL, midCommon]], diffsB);\n        }\n        if (checklines && text1.length > 100 && text2.length > 100) {\n            return this.diff_lineMode_(text1, text2, deadline);\n        }\n        return this.diff_bisect_(text1, text2, deadline);\n    };\n    /**\n     * Do a quick line-level diff on both strings, then re-diff the parts for\n     * greater accuracy.\n     * This speedup can produce non-minimal diffs.\n     *\n     * @private\n     * @param {string} text1 Old string to be diffed.\n     * @param {string} text2 New string to be diffed.\n     * @param {number} deadline Time when the diff should be complete by.\n     * @returns {Diff[]} Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n        // Scan the text on a line-by-line basis first.\n        var a = this.diff_linesToChars_(text1, text2);\n        text1 = a.chars1;\n        text2 = a.chars2;\n        var linearray = a.lineArray;\n        var diffs = this.diff_main(text1, text2, false, deadline);\n        // Convert the diff back to original text.\n        this.diff_charsToLines_(diffs, linearray);\n        // Eliminate freak matches (e.g. blank lines)\n        this.diff_cleanupSemantic(diffs);\n        // Re-diff any replacement blocks, this time character-by-character.\n        // Add a dummy entry at the end.\n        diffs.push([DiffOperation.DIFF_EQUAL, \"\"]);\n        var pointer = 0;\n        var countDelete = 0;\n        var countInsert = 0;\n        var textDelete = \"\";\n        var textInsert = \"\";\n        while (pointer < diffs.length) {\n            switch (diffs[pointer][0]) {\n                case DiffOperation.DIFF_INSERT:\n                    countInsert++;\n                    textInsert += diffs[pointer][1];\n                    break;\n                case DiffOperation.DIFF_DELETE:\n                    countDelete++;\n                    textDelete += diffs[pointer][1];\n                    break;\n                case DiffOperation.DIFF_EQUAL:\n                    // Upon reaching an equality, check for prior redundancies.\n                    if (countDelete >= 1 && countInsert >= 1) {\n                        // Delete the offending records and add the merged ones.\n                        diffs.splice(pointer - countDelete - countInsert, countDelete + countInsert);\n                        pointer = pointer - countDelete - countInsert;\n                        var subDiff = this.diff_main(textDelete, textInsert, false, deadline);\n                        for (var j = subDiff.length - 1; j >= 0; j--) {\n                            diffs.splice(pointer, 0, subDiff[j]);\n                        }\n                        pointer = pointer + subDiff.length;\n                    }\n                    countInsert = 0;\n                    countDelete = 0;\n                    textDelete = \"\";\n                    textInsert = \"\";\n                    break;\n            }\n            pointer++;\n        }\n        // Remove the dummy entry at the end.\n        diffs.pop();\n        return diffs;\n    };\n    /**\n     * Find the 'middle snake' of a diff, split the problem in two\n     * and return the recursively constructed diff.\n     * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n     *\n     * @private\n     * @param {string} text1 Old string to be diffed.\n     * @param {string} text2 New string to be diffed.\n     * @param {number} deadline Time at which to bail if not yet complete.\n     * @returns {Diff[]} Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n        // Cache the text lengths to prevent multiple calls.\n        var text1Length = text1.length;\n        var text2Length = text2.length;\n        var maxD = Math.ceil((text1Length + text2Length) / 2);\n        var vOffset = maxD;\n        var vLength = 2 * maxD;\n        var v1 = new Array(vLength);\n        var v2 = new Array(vLength);\n        // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n        // integers and undefined.\n        for (var x = 0; x < vLength; x++) {\n            v1[x] = -1;\n            v2[x] = -1;\n        }\n        v1[vOffset + 1] = 0;\n        v2[vOffset + 1] = 0;\n        var delta = text1Length - text2Length;\n        // If the total number of characters is odd, then the front path will collide\n        // with the reverse path.\n        var front = (delta % 2 !== 0);\n        // Offsets for start and end of k loop.\n        // Prevents mapping of space beyond the grid.\n        var k1Start = 0;\n        var k1End = 0;\n        var k2Start = 0;\n        var k2End = 0;\n        for (var d = 0; d < maxD; d++) {\n            // Bail out if deadline is reached.\n            if (Date.now() > deadline) {\n                break;\n            }\n            // Walk the front path one step.\n            for (var k1 = -d + k1Start; k1 <= d - k1End; k1 += 2) {\n                var k1Offset = vOffset + k1;\n                var x1 = void 0;\n                if (k1 === -d || (k1 !== d && v1[k1Offset - 1] < v1[k1Offset + 1])) {\n                    x1 = v1[k1Offset + 1];\n                }\n                else {\n                    x1 = v1[k1Offset - 1] + 1;\n                }\n                var y1 = x1 - k1;\n                while (x1 < text1Length\n                    && y1 < text2Length\n                    && text1.charAt(x1) === text2.charAt(y1)) {\n                    x1++;\n                    y1++;\n                }\n                v1[k1Offset] = x1;\n                if (x1 > text1Length) {\n                    // Ran off the right of the graph.\n                    k1End += 2;\n                }\n                else if (y1 > text2Length) {\n                    // Ran off the bottom of the graph.\n                    k1Start += 2;\n                }\n                else if (front) {\n                    var k2Offset = vOffset + delta - k1;\n                    if (k2Offset >= 0 && k2Offset < vLength && v2[k2Offset] !== -1) {\n                        // Mirror x2 onto top-left coordinate system.\n                        var x2 = text1Length - v2[k2Offset];\n                        if (x1 >= x2) {\n                            // Overlap detected.\n                            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n                        }\n                    }\n                }\n            }\n            // Walk the reverse path one step.\n            for (var k2 = -d + k2Start; k2 <= d - k2End; k2 += 2) {\n                var k2Offset = vOffset + k2;\n                var x2 = void 0;\n                if (k2 === -d || (k2 !== d && v2[k2Offset - 1] < v2[k2Offset + 1])) {\n                    x2 = v2[k2Offset + 1];\n                }\n                else {\n                    x2 = v2[k2Offset - 1] + 1;\n                }\n                var y2 = x2 - k2;\n                while (x2 < text1Length\n                    && y2 < text2Length\n                    && text1.charAt(text1Length - x2 - 1) === text2.charAt(text2Length - y2 - 1)) {\n                    x2++;\n                    y2++;\n                }\n                v2[k2Offset] = x2;\n                if (x2 > text1Length) {\n                    // Ran off the left of the graph.\n                    k2End += 2;\n                }\n                else if (y2 > text2Length) {\n                    // Ran off the top of the graph.\n                    k2Start += 2;\n                }\n                else if (!front) {\n                    var k1Offset = vOffset + delta - k2;\n                    if (k1Offset >= 0 && k1Offset < vLength && v1[k1Offset] !== -1) {\n                        var x1 = v1[k1Offset];\n                        var y1 = vOffset + x1 - k1Offset;\n                        // Mirror x2 onto top-left coordinate system.\n                        x2 = text1Length - x2;\n                        if (x1 >= x2) {\n                            // Overlap detected.\n                            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n                        }\n                    }\n                }\n            }\n        }\n        // Diff took too long and hit the deadline or\n        // number of diffs equals number of characters, no commonality at all.\n        return [\n            [DiffOperation.DIFF_DELETE, text1],\n            [DiffOperation.DIFF_INSERT, text2]\n        ];\n    };\n    /**\n     * Given the location of the 'middle snake', split the diff in two parts\n     * and recurse.\n     *\n     * @private\n     * @param {string} text1 Old string to be diffed.\n     * @param {string} text2 New string to be diffed.\n     * @param {number} x Index of split point in text1.\n     * @param {number} y Index of split point in text2.\n     * @param {number} deadline Time at which to bail if not yet complete.\n     * @returns {Diff[]} Array of diff tuples.\n     */\n    DiffMatchPatch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n        var text1A = text1.substring(0, x);\n        var text2A = text2.substring(0, y);\n        var text1B = text1.substring(x);\n        var text2B = text2.substring(y);\n        // Compute both diffs serially.\n        var diffsA = this.diff_main(text1A, text2A, false, deadline);\n        var diffsB = this.diff_main(text1B, text2B, false, deadline);\n        return diffsA.concat(diffsB);\n    };\n    /**\n     * Split two texts into an array of strings. Reduce the texts to a string of\n     * hashes where each Unicode character represents one line.\n     *\n     * @private\n     * @param {string} text1 First string.\n     * @param {string} text2 Second string.\n     * @returns {{chars1: string, chars2: string, lineArray: string[]}}\n     * An object containing the encoded text1, the encoded text2 and\n     * the array of unique strings.\n     * The zeroth element of the array of unique strings is intentionally blank.\n     */\n    DiffMatchPatch.prototype.diff_linesToChars_ = function (text1, text2) {\n        var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n        var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n        // '\\x00' is a valid character, but various debuggers don't like it.\n        // So we'll insert a junk entry to avoid generating a null character.\n        lineArray[0] = \"\";\n        // Allocate 2/3rds of the space for text1, the rest for text2.\n        var chars1 = this.diff_linesToCharsMunge_(text1, lineArray, lineHash, 40000);\n        var chars2 = this.diff_linesToCharsMunge_(text2, lineArray, lineHash, 65535);\n        return { chars1: chars1, chars2: chars2, lineArray: lineArray };\n    };\n    /**\n     * Split a text into an array of strings. Reduce the texts to a string of\n     * hashes where each Unicode character represents one line.\n     * Modifies linearray and linehash through being a closure.\n     *\n     * @private\n     * @param {string} text String to encode.\n     * @param {string[]} lineArray Array of unique strings.\n     * @param {Record<string, number>} lineHash Line-hash pairs.\n     * @param {number} maxLines\n     * @returns {string} Encoded string.\n     */\n    DiffMatchPatch.prototype.diff_linesToCharsMunge_ = function (text, lineArray, lineHash, maxLines) {\n        var chars = \"\";\n        // Walk the text, pulling out a substring for each line.\n        // text.split('\\n') would would temporarily double our memory footprint.\n        // Modifying text would create many large strings to garbage collect.\n        var lineStart = 0;\n        var lineEnd = -1;\n        // Keeping our own length variable is faster than looking it up.\n        var lineArrayLength = lineArray.length;\n        while (lineEnd < text.length - 1) {\n            lineEnd = text.indexOf(\"\\n\", lineStart);\n            if (lineEnd === -1) {\n                lineEnd = text.length - 1;\n            }\n            var line = text.substring(lineStart, lineEnd + 1);\n            if (lineHash.hasOwnProperty\n                ? lineHash.hasOwnProperty(line)\n                : (lineHash[line] !== undefined)) {\n                chars += String.fromCharCode(lineHash[line]);\n            }\n            else {\n                if (lineArrayLength === maxLines) {\n                    // Bail out at 65535 because\n                    // String.fromCharCode(65536) == String.fromCharCode(0)\n                    line = text.substring(lineStart);\n                    lineEnd = text.length;\n                }\n                chars += String.fromCharCode(lineArrayLength);\n                lineHash[line] = lineArrayLength;\n                lineArray[lineArrayLength++] = line;\n            }\n            lineStart = lineEnd + 1;\n        }\n        return chars;\n    };\n    /**\n     * Rehydrate the text in a diff from a string of line hashes to real lines of\n     * text.\n     *\n     * @private\n     * @param {Diff[]} diffs Array of diff tuples.\n     * @param {string[]} lineArray Array of unique strings.\n     */\n    DiffMatchPatch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n        for (var i = 0; i < diffs.length; i++) {\n            var chars = diffs[i][1];\n            var text = [];\n            for (var j = 0; j < chars.length; j++) {\n                text[j] = lineArray[chars.charCodeAt(j)];\n            }\n            diffs[i][1] = text.join(\"\");\n        }\n    };\n    /**\n     * Determine if the suffix of one string is the prefix of another.\n     *\n     * @private\n     * @param {string} text1 First string.\n     * @param {string} text2 Second string.\n     * @returns {number} The number of characters common to the end of the first\n     * string and the start of the second string.\n     */\n    DiffMatchPatch.prototype.diff_commonOverlap_ = function (text1, text2) {\n        // Cache the text lengths to prevent multiple calls.\n        var text1Length = text1.length;\n        var text2Length = text2.length;\n        // Eliminate the null case.\n        if (text1Length === 0 || text2Length === 0) {\n            return 0;\n        }\n        // Truncate the longer string.\n        if (text1Length > text2Length) {\n            text1 = text1.substring(text1Length - text2Length);\n        }\n        else if (text1Length < text2Length) {\n            text2 = text2.substring(0, text1Length);\n        }\n        var textLength = math.min(text1Length, text2Length);\n        // Quick check for the worst case.\n        if (text1 === text2) {\n            return textLength;\n        }\n        // Start by looking for a single character match\n        // and increase length until no match is found.\n        // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n        var best = 0;\n        var length = 1;\n        while (true) {\n            var pattern = text1.substring(textLength - length);\n            var found = text2.indexOf(pattern);\n            if (found === -1) {\n                return best;\n            }\n            length += found;\n            if (found === 0 ||\n                text1.substring(textLength - length) === text2.substring(0, length)) {\n                best = length;\n                length++;\n            }\n        }\n    };\n    /**\n     * Do the two texts share a substring which is at least half the length of the\n     * longer text?\n     * This speedup can produce non-minimal diffs.\n     *\n     * @private\n     * @param {string} text1 First string.\n     * @param {string} text2 Second string.\n     * @returns {(HalfMatchArray | null)} Five element Array, containing the prefix of\n     * text1, the suffix of text1, the prefix of text2, the suffix of\n     * text2 and the common middle. Or null if there was no match.\n     */\n    DiffMatchPatch.prototype.diff_halfMatch_ = function (text1, text2) {\n        if (this.diffTimeout <= 0) {\n            // Don't risk returning a non-optimal diff if we have unlimited time.\n            return null;\n        }\n        var longtext = text1.length > text2.length ? text1 : text2;\n        var shorttext = text1.length > text2.length ? text2 : text1;\n        if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n            return null; // Pointless.\n        }\n        // First check if the second quarter is the seed for a half-match.\n        var hm1 = this.diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4));\n        // Check again based on the third quarter.\n        var hm2 = this.diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n        var hm;\n        if (!hm1 && !hm2) {\n            return null;\n        }\n        else if (!hm2) {\n            hm = hm1;\n        }\n        else if (!hm1) {\n            hm = hm2;\n        }\n        else {\n            // Both matched. Select the longest.\n            hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n        }\n        // A half-match was found, sort out the return data.\n        var text1A;\n        var text1B;\n        var text2A;\n        var text2B;\n        var midCommon = hm[4];\n        if (text1.length > text2.length) {\n            text1A = hm[0];\n            text1B = hm[1];\n            text2A = hm[2];\n            text2B = hm[3];\n        }\n        else {\n            text2A = hm[0];\n            text2B = hm[1];\n            text1A = hm[2];\n            text1B = hm[3];\n        }\n        return [text1A, text1B, text2A, text2B, midCommon];\n    };\n    /**\n     * Does a substring of shorttext exist within longtext such that the substring\n     * is at least half the length of longtext?\n     * Closure, but does not reference any external variables.\n     *\n     * @private\n     * @param {string} longtext Longer string.\n     * @param {string} shorttext Shorter string.\n     * @param {number} i Start index of quarter length substring within longtext.\n     * @returns {(HalfMatchArray | null)} Five element Array, containing the prefix of\n     * longtext, the suffix of longtext, the prefix of shorttext, the suffix\n     * of shorttext and the common middle. Or null if there was no match.\n     */\n    DiffMatchPatch.prototype.diff_halfMatchI_ = function (longtext, shorttext, i) {\n        // Start with a 1/4 length substring at position i as a seed.\n        var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n        var bestCommon = \"\";\n        var bestLongtextA;\n        var bestLongtextB;\n        var bestShorttextA;\n        var bestShorttextB;\n        // Initial.\n        var j = shorttext.indexOf(seed, 0);\n        while (j !== -1) {\n            var prefixLength = this.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n            var suffixLength = this.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n            if (bestCommon.length < suffixLength + prefixLength) {\n                bestCommon = shorttext.substring(j - suffixLength, j)\n                    + shorttext.substring(j, j + prefixLength);\n                bestLongtextA = longtext.substring(0, i - suffixLength);\n                bestLongtextB = longtext.substring(i + prefixLength);\n                bestShorttextA = shorttext.substring(0, j - suffixLength);\n                bestShorttextB = shorttext.substring(j + prefixLength);\n            }\n            // Step.\n            j = shorttext.indexOf(seed, j + 1);\n        }\n        if (bestCommon.length * 2 >= longtext.length) {\n            return [\n                bestLongtextA,\n                bestLongtextB,\n                bestShorttextA,\n                bestShorttextB,\n                bestCommon\n            ];\n        }\n        return null;\n    };\n    /**\n     * Given two strings, compute a score representing whether the internal\n     * boundary falls on logical boundaries.\n     * Scores range from 6 (best) to 0 (worst).\n     * Closure, but does not reference any external variables.\n     *\n     * @private\n     * @param {string} one First string.\n     * @param {string} two Second string.\n     * @returns {number} The score.\n     */\n    DiffMatchPatch.prototype.diff_cleanupSemanticScore_ = function (one, two) {\n        if (!one || !two) {\n            // Edges are the best.\n            return 6;\n        }\n        // Each port of this function behaves slightly differently due to\n        // subtle differences in each language's definition of things like\n        // 'whitespace'. Since this function's purpose is largely cosmetic,\n        // the choice has been made to use each language's native features\n        // rather than force total conformity.\n        var char1 = one.charAt(one.length - 1);\n        var char2 = two.charAt(0);\n        var nonAlphaNumeric1 = char1.match(NON_ALPHA_NUMERIC_REGEX);\n        var nonAlphaNumeric2 = char2.match(NON_ALPHA_NUMERIC_REGEX);\n        var whitespace1 = nonAlphaNumeric1 && char1.match(WHITESPACE_REGEX);\n        var whitespace2 = nonAlphaNumeric2 && char2.match(WHITESPACE_REGEX);\n        var lineBreak1 = whitespace1 && char1.match(LINEBREAK_REGEX);\n        var lineBreak2 = whitespace2 && char2.match(LINEBREAK_REGEX);\n        var blankLine1 = lineBreak1 && one.match(BLANKLINE_END_REGEX);\n        var blankLine2 = lineBreak2 && two.match(BLANKLINE_START_REGEX);\n        if (blankLine1 || blankLine2) {\n            // Five points for blank lines.\n            return 5;\n        }\n        else if (lineBreak1 || lineBreak2) {\n            // Four points for line breaks.\n            return 4;\n        }\n        else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n            // Three points for end of sentences.\n            return 3;\n        }\n        else if (whitespace1 || whitespace2) {\n            // Two points for whitespace.\n            return 2;\n        }\n        else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n            // One point for non-alphanumeric.\n            return 1;\n        }\n        return 0;\n    };\n    //#endregion DIFF FUNCTIONS (private)\n    //#region MATCH FUNCTIONS (private)\n    /**\n     * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n     * Bitap algorithm.\n     *\n     * @private\n     * @param {string} text The text to search.\n     * @param {string} pattern The pattern to search for.\n     * @param {number} loc The location to search around.\n     * @returns {number} Best match index or -1.\n     */\n    DiffMatchPatch.prototype.match_bitap_ = function (text, pattern, loc) {\n        if (pattern.length > this.matchMaxBits) {\n            throw new Error(\"Pattern too long for this browser\");\n        }\n        // Initialize the alphabet.\n        var s = this.match_alphabet_(pattern);\n        // Highest score beyond which we give up.\n        var scoreThreshold = this.matchThreshold;\n        // Is there a nearby exact match? (speedup)\n        var bestLoc = text.indexOf(pattern, loc);\n        if (bestLoc !== -1) {\n            scoreThreshold = math.min(this.match_bitapScore_(0, bestLoc, pattern, loc), scoreThreshold);\n            // What about in the other direction? (speedup)\n            bestLoc = text.lastIndexOf(pattern, loc + pattern.length);\n            if (bestLoc !== -1) {\n                scoreThreshold = math.min(this.match_bitapScore_(0, bestLoc, pattern, loc), scoreThreshold);\n            }\n        }\n        // Initialize the bit arrays.\n        var matchmask = 1 << (pattern.length - 1);\n        bestLoc = -1;\n        var binMin;\n        var binMid;\n        var binMax = pattern.length + text.length;\n        var lastRD;\n        for (var d = 0; d < pattern.length; d++) {\n            // Scan for the best match; each iteration allows for one more error.\n            // Run a binary search to determine how far from 'loc' we can stray at this\n            // error level.\n            binMin = 0;\n            binMid = binMax;\n            while (binMin < binMid) {\n                if (this.match_bitapScore_(d, loc + binMid, pattern, loc) <= scoreThreshold) {\n                    binMin = binMid;\n                }\n                else {\n                    binMax = binMid;\n                }\n                binMid = Math.floor((binMax - binMin) / 2 + binMin);\n            }\n            // Use the result from this iteration as the maximum for the next.\n            binMax = binMid;\n            var start = math.max(1, loc - binMid + 1);\n            var finish = math.min(loc + binMid, text.length) + pattern.length;\n            var rd = Array(finish + 2);\n            rd[finish + 1] = (1 << d) - 1;\n            for (var j = finish; j >= start; j--) {\n                // The alphabet (s) is a sparse hash, so the following line generates\n                // warnings.\n                var charMatch = s[text.charAt(j - 1)];\n                if (d === 0) {\n                    // First pass: exact match.\n                    rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\n                }\n                else {\n                    // Subsequent passes: fuzzy match.\n                    rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\n                        (((lastRD[j + 1] | lastRD[j]) << 1) | 1) |\n                        lastRD[j + 1];\n                }\n                if (rd[j] & matchmask) {\n                    var score = this.match_bitapScore_(d, j - 1, pattern, loc);\n                    // This match will almost certainly be better than any existing match.\n                    // But check anyway.\n                    if (score <= scoreThreshold) {\n                        // Told you so.\n                        scoreThreshold = score;\n                        bestLoc = j - 1;\n                        if (bestLoc > loc) {\n                            // When passing loc, don't exceed our current distance from loc.\n                            start = math.max(1, 2 * loc - bestLoc);\n                        }\n                        else {\n                            // Already passed loc, downhill from here on in.\n                            break;\n                        }\n                    }\n                }\n            }\n            // No hope for a (better) match at greater error levels.\n            if (this.match_bitapScore_(d + 1, loc, pattern, loc) > scoreThreshold) {\n                break;\n            }\n            lastRD = rd;\n        }\n        return bestLoc;\n    };\n    /**\n     * Compute and return the score for a match with e errors and x location.\n     * Accesses loc and pattern through being a closure.\n     *\n     * @private\n     * @param {number} e Number of errors in match.\n     * @param {number} x Location of match.\n     * @param {string} pattern The pattern to search for.\n     * @param {number} loc The location to search around.\n     * @returns {number} Overall score for match (0.0 = good, 1.0 = bad).\n     */\n    DiffMatchPatch.prototype.match_bitapScore_ = function (e, x, pattern, loc) {\n        var accuracy = e / pattern.length;\n        var proximity = Math.abs(loc - x);\n        if (!this.matchDistance) {\n            // Dodge divide by zero error.\n            return proximity ? 1.0 : accuracy;\n        }\n        return accuracy + (proximity / this.matchDistance);\n    };\n    /**\n     * Initialize the alphabet for the Bitap algorithm.\n     *\n     * @private\n     * @param {string} pattern The text to encode.\n     * @returns {Record<string, number>} Hash of character locations.\n     */\n    DiffMatchPatch.prototype.match_alphabet_ = function (pattern) {\n        var s = {};\n        for (var i = 0; i < pattern.length; i++) {\n            s[pattern.charAt(i)] = 0;\n        }\n        for (var i = 0; i < pattern.length; i++) {\n            s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\n        }\n        return s;\n    };\n    //#endregion MATCH FUNCTIONS (private)\n    //#region PATCH FUNCTIONS (private)\n    /**\n     * Increase the context until it is unique,\n     * but don't let the pattern expand beyond Match_MaxBits.\n     *\n     * @private\n     * @param {PatchObject} patch The patch to grow.\n     * @param {string} text Source text.\n     */\n    DiffMatchPatch.prototype.patch_addContext_ = function (patch, text) {\n        if (text.length === 0) {\n            return;\n        }\n        if (patch.start2 == null) {\n            throw Error(\"patch not initialized\");\n        }\n        var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n        var padding = 0;\n        // Look for the first and last matches of pattern in text. If two different\n        // matches are found, increase the pattern length.\n        while (text.indexOf(pattern) !== text.lastIndexOf(pattern) &&\n            pattern.length < (this.matchMaxBits - this.patchMargin - this.patchMargin)) {\n            padding += this.patchMargin;\n            pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n        }\n        // Add one chunk for good luck.\n        padding += this.patchMargin;\n        // Add the prefix.\n        var prefix = text.substring(patch.start2 - padding, patch.start2);\n        if (prefix) {\n            patch.diffs.unshift([DiffOperation.DIFF_EQUAL, prefix]);\n        }\n        // Add the suffix.\n        var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n        if (suffix) {\n            patch.diffs.push([DiffOperation.DIFF_EQUAL, suffix]);\n        }\n        // Roll back the start points.\n        patch.start1 -= prefix.length;\n        patch.start2 -= prefix.length;\n        // Extend the lengths.\n        patch.length1 += prefix.length + suffix.length;\n        patch.length2 += prefix.length + suffix.length;\n    };\n    return DiffMatchPatch;\n}());\nexport { DiffMatchPatch };\n"],"sourceRoot":""}